if [ $1 -eq 1 ] && [ -x "/usr/lib/systemd/systemd-update-helper" ]; then
    # Initial installation

    # Configure Mosquitto to look for the suite-connector config file
    echo "include_dir /etc/mosquitto/conf.d" >> /etc/mosquitto/mosquitto.conf

    # Use a systemctl preset
    # instead of "systemctl enable"
    # as per Fedora's guidelines

    # Use `:` instead of `true` as this is the usual expansion of rpm scriptlets

    # if mosquitto is already running, restart it to pick up the new configuration
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units suite-connector.service || :

    # if containerd and mosquitto aren't enabled, enable them
    /usr/lib/systemd/systemd-update-helper install-system-units containerd.service || :
    /usr/lib/systemd/systemd-update-helper install-system-units mosquitto.service || :

    # The Kanto services
    /usr/lib/systemd/systemd-update-helper install-system-units suite-connector.service || :
    /usr/lib/systemd/systemd-update-helper install-system-units container-management.service || :
    /usr/lib/systemd/systemd-update-helper install-system-units file-upload.service || :
    /usr/lib/systemd/systemd-update-helper install-system-units software-update.service || :
    /usr/lib/systemd/systemd-update-helper install-system-units file-backup.service || :
    /usr/lib/systemd/systemd-update-helper install-system-units system-metrics.service || :
fi
