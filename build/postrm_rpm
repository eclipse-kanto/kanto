if [ $1 -ge 1 ] && [ -x "/usr/lib/systemd/systemd-update-helper" ]; then
    # Package upgrade, not uninstall

    # Do not call mark-restart-system-units on containerd and mosquitto,
    # they have their own scripts

    # Use `:` instead of `true` as this is the usual expansion of rpm scriptlets

    # The Kanto services, including ones that are usually disabled by default
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units suite-bootpping.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units local-digital-twins.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units suite-connector.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units container-management.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units file-upload.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units software-update.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units file-backup.service || :
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units system-metrics.service || :
fi

# $1 is 0 on uninstall, 1 on upgrade

if [ $1 -eq 0 ] && [ -x "/usr/lib/systemd/systemd-update-helper" ]; then
    # Package uninstall, not upgrade

    # If mosquitto is already running, mark it for restarting to pick up the fact that our configs have been removed
    /usr/lib/systemd/systemd-update-helper mark-restart-system-units mosquitto.service || :
fi