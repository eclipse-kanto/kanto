<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.100.2"><link rel=canonical type=text/html href=https://websites.eclipseprojects.io/kanto/docs/><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/kanto/favicons/favicon.ico><link rel=apple-touch-icon href=/kanto/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/kanto/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/kanto/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/kanto/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/kanto/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/kanto/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/kanto/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/kanto/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/kanto/favicons/android-192x192.png sizes=192x192><title>Eclipse Kanto™ | IoT edge software stack</title><meta name=description content><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://websites.eclipseprojects.io/kanto/docs/"><meta itemprop=name content><meta itemprop=description content><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content><link rel=preload href=/kanto/scss/main.min.9d78ea442f10667da53dc949285597f3277a444ea3077d21c6c57002a3af9dea.css as=style><link href=/kanto/scss/main.min.9d78ea442f10667da53dc949285597f3277a444ea3077d21c6c57002a3af9dea.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/kanto/css/prism.css></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-dark navbar-color td-navbar"><a class=navbar-brand href=/kanto/><span class=navbar-logo><svg id="kanto_logo" data-name="Kanto Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50"><defs><style>.cls-kanto_logo{fill:#fff}</style></defs><title>Eclipse Kanto</title><g transform="translate(0.0,50.0) scale(0.025,-0.025)"><path class="cls-kanto_logo" d="M370 1754c-168-290-306-529-308-533-2-6 557-986 604-1059l14-22h619 619l255 442c327 569 357 622 357 635 0 6-137 246-305 534l-304 524-623 2-623 2-305-525zm780 352c0-2-72-129-161-281-88-152-159-279-157-281s33 14 68 35c255 151 9e2 521 908 521 9 0 182-293 182-308 0-4-219-133-487-287-267-154-485-284-485-290 1-8 930-553 966-568 7-2-140-275-170-316-2-2-222 123-490 278-268 154-490 279-492 276-2-2 66-125 152-274 86-148 156-272 156-275 0-4-80-6-178-6H783L530 768c-139 240-253 442-253 448s114 210 253 452l254 442h183c101 0 183-2 183-4z"/><path class="cls-kanto_logo" d="M2890 1240V520h110 110v236 235l29-3c26-3 50-31 193-233l163-230 128-3c70-1 127 0 127 3s-86 128-191 276c-189 268-191 271-172 292 10 12 96 106 191 208 94 103 172 190 172 193s-60 6-134 6h-135l-158-170c-130-140-163-170-185-170h-28v4e2 4e2H3e3h-110v-720z"/><path class="cls-kanto_logo" d="M5965 1738c-3-18-12-77-20-132-7-54-16-1e2-19-103s-40-15-83-27l-78-22v-64-65l82-3 81-3 4-292c5-323 11-360 71-433 51-61 92-74 245-74h133l-3 67-3 67-80 24c-144 43-145 45-145 381v260l118 3 117 3 3 88 3 87h-121-120v135 135h-90-89l-6-32z"/><path class="cls-kanto_logo" d="M4165 1510c-102-9-236-35-267-51-14-8-18-23-18-74v-65h37c21 0 121 5 224 11 276 16 309 1 309-137v-74h-193c-228 0-277-10-336-69-53-53-71-113-71-234 0-119 12-164 58-217 49-58 102-82 193-88 91-5 158 12 273 69 43 22 80 38 82 36 1-1 12-24 23-50l20-47h86 86l-3 393c-3 385-3 393-26 442-64 139-190 180-477 155zm285-635V770l-27-11c-102-41-176-61-233-66-59-5-69-3-93 18-22 19-29 35-34 79-8 81 10 137 50 155 27 13 170 29 3e2 34l37 1V875z"/><path class="cls-kanto_logo" d="M5225 1486c-33-12-86-39-117-59l-58-37-14 33c-7 19-17 43-20 55-7 20-14 22-92 22h-84v-490-490h105 105v360 359l43 25c99 58 244 83 304 53 61-32 63-47 63-441V520h111 110l-3 378c-4 367-4 379-27 435-30 75-73 124-136 153-70 33-204 33-290 0z"/><path class="cls-kanto_logo" d="M6820 15e2c-96-13-187-63-227-124-43-64-62-128-75-263-13-126-2-288 26-380 49-159 197-231 451-220 239 10 340 82 380 274 17 81 20 318 4 413-24 150-96 243-218 280-76 24-242 34-341 20zm287-206c52-39 66-99 67-279s-10-238-54-280c-33-31-82-45-165-45-135 0-193 40-215 146-17 81-8 346 13 394 33 75 70 90 214 87 96-2 116-5 140-23z"/></svg></span></a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=main_navbar><ul class="navbar-nav mr-4 mb-2 mb-lg-0 pl-4 pl-lg-2"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/><span class=active>Home</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/eclipse-kanto target=_blank><span>GitHub</span></a></li></ul><div class=navbar-nav><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/kanto/offline-search-index.b3c65c7ffffb3d4a589ac962f892654c.json data-offline-search-base-href=/ data-offline-search-max-results=50></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/kanto/docs/>Return to the regular view of this page</a>.</p></div><h1 class=title></h1><ul><li>1: <a href=#pg-17b09a9dc5200475d8a306f18e63a0f9>Getting started</a></li><ul><li>1.1: <a href=#pg-02f5d8e73808806ac924fe6ee4ac7bff>Install Eclipse Kanto</a></li><li>1.2: <a href=#pg-759da719bcf88ff1c05841298fc29ad3>Explore via Eclipse Hono</a></li><li>1.3: <a href=#pg-4259e9d730eac6955fcfb132c82690a4>Explore via Bosch IoT Device Management</a></li></ul><li>2: <a href=#pg-dd948255948d6b59b32c471abcb62997>Concepts</a></li><ul><li>2.1: <a href=#pg-9f620eb6647cb9710020b1bfec6d463f>Suite connector</a></li><li>2.2: <a href=#pg-4a072b39c39e5bf4fcdc72d3ddbf89da>Container management</a></li><li>2.3: <a href=#pg-bb0595debb658b54720b5c3af4a40fc2>Software update</a></li><li>2.4: <a href=#pg-9ccb2b2c18eb4be9efb067f044e4cd18>File upload</a></li></ul><li>3: <a href=#pg-7d8343cd9d2de79b39a26d7fb6d58108>How-to guides</a></li><ul><li>3.1: <a href=#pg-3295c64fd45a7278dec1f9ac3fb381aa>Update software</a></li><li>3.2: <a href=#pg-ea8723f5a1c117f2bc76a16b024f0ff2>Upload files</a></li></ul><li>4: <a href=#pg-043610093194cf60e3758f9f695c73cb>References</a></li><ul><li>4.1: <a href=#pg-1e43023a48407cfe64feb18a5509a0e0>Remote connectivity configuration</a></li><ul><li>4.1.1: <a href=#pg-acb76b8bad367952e99f3af2db1c0c2b>Suite connector configuration</a></li><li>4.1.2: <a href=#pg-8f7bfec5149532d21fcc007c2d3587af>Suite bootstrapping configuration</a></li></ul><li>4.2: <a href=#pg-e3f44522a7168d1eeef35264012b536b>Local digital twins configuration</a></li><li>4.3: <a href=#pg-06af2c208a89b1647c8ccdaa4b0a08d7>Container management configuration</a></li><ul><li>4.3.1: <a href=#pg-5ec561ebd13cd31801c37882f826ab0d>Container configuration</a></li><li>4.3.2: <a href=#pg-3a1ecf0c4318cf78aef2b1c17e1dfd41>Manager configuration</a></li></ul><li>4.4: <a href=#pg-b2c1d21c4a9cc13d9be27087a3526748>Software update configuration</a></li><li>4.5: <a href=#pg-01316635438332b05a343c9a9910a8c4>File upload configuration</a></li><li>4.6: <a href=#pg-3f963e28259de540d29b964715a3016b>File backup configuration</a></li><li>4.7: <a href=#pg-0eee451d3069409589fa6cb50119a20b>System metrics configuration</a></li></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-17b09a9dc5200475d8a306f18e63a0f9>1 - Getting started</h1><div class=lead>Explore different ways to connect and manage your edge device remotely using Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-02f5d8e73808806ac924fe6ee4ac7bff>1.1 - Install Eclipse Kanto</h1><div class=lead>Run Eclipse Kanto on your edge device.</div><h3 id=before-you-begin>Before you begin</h3><p>The <code>containerd</code> Debian package is required. You can install it manually or run:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -fsSL https://github.com/eclipse-kanto/kanto/raw/main/quickstart/install_ctrd.sh | sh
</span></span></code></pre></div><h3 id=install-eclipse-kanto>Install Eclipse Kanto</h3><p>Choose the Eclipse Kanto Debian package for your target device architecture from the ones available
at <a href=https://github.com/eclipse-kanto/kanto/releases target=_blank>the project&rsquo;s GitHub Releases page</a>.
Download and install it via executing the following (adjusted to your package name):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/releases/download/v0.1.0-M2/kanto_0.1.0-M2_linux_x86_64.deb &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>sudo apt install ./kanto_0.1.0-M2_linux_x86_64.deb
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>It&rsquo;s important to check if all the services provided by the Eclipse Kanto package are up and running successfully. You
can quickly do that via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>systemctl status <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>suite-connector.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>container-management.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>software-update.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>file-upload.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>file-backup.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>system-metrics.service
</span></span></code></pre></div><p>All listed services must be in an active running state.</p><h3 id=whats-next>What&rsquo;s next</h3><p><a href=/kanto/docs/getting-started/hono/>Explore via Eclipse Hono</a></p><p><a href=/kanto/docs/getting-started/dmp/>Explore via Bosch IoT Device Management</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-759da719bcf88ff1c05841298fc29ad3>1.2 - Explore via Eclipse Hono</h1><div class=lead>Connect and start managing your edge device via Eclipse Hono.</div><p>Following the steps below you will connect your first device to a publicly
available <a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a> using Eclipse Kanto.
A couple of simple Eclipse Hono northbound business applications written in Python are provided to explore the capabilities for
remotely managing and monitoring your edge device.</p><h3 id=before-you-begin>Before you begin</h3><p>The location where the Python applications and utility shell scripts will run does not have to be your edge device as
they communicate remotely with Eclipse Hono only. To run them, you need:</p><ul><li><p><a href=https://wiki.python.org/moin/BeginnersGuide/Download target=_blank>Python 3</a>
and <a href=https://pip.pypa.io/en/stable/installation/# target=_blank>pip3</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/tree/main/quickstart target=_blank>quickstart applications and
provisioning scripts</a></p><p>You can execute the script below to download them automatically:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir quickstart &amp;&amp; <span style=color:#0aa>cd</span> quickstart &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands.py &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_events.py &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/requirements.txt &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_provisioning.sh
</span></span></code></pre></div></li><li><p>Required Python dependencies to run the scripts</p><p>You can install them by using the downloaded <code>requirements.txt</code> file via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install -r requirements.txt
</span></span></code></pre></div></li></ul><h3 id=provision-the-eclipse-hono-tenant-and-device>Provision the Eclipse Hono tenant and device</h3><p>In order to be able to connect your device to Eclipse Hono, you need to have a dedicated tenant and a device instance
provisioned for it. Fill in the required empty environmental variables definitions in the <code>hono_provisioning.sh</code>, e.g.:<div class="alert alert-light alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-tip{fill:#a19f20}</style></defs><title>Tip</title><path class="cls-alert-tip" d="M53.905 126.999l5.631 5.684-14.292 14.159-5.63-5.684L53.904 127zm98.481-86.3-5.63-5.683-14.414 14.28 5.63 5.683 14.414-14.28zm-19.922 91.984 14.292 14.159 5.63-5.684L138.096 127l-5.631 5.684zM59.658 49.295 45.244 35.016l-5.63 5.684 14.414 14.279 5.63-5.684zM72 160h48v-8H72v8zm4 16h40v-8H76v8zm53.906-118.291C120.844 48.868 108.803 44 96 44s-24.844 4.869-33.906 13.709C53.005 66.575 48 78.37 48 90.922c0 12.553 5.005 24.348 14.094 33.215 1.395 1.36 2.74 2.479 4.042 3.56.448.373.903.751 1.367 1.146.257.217.553.456.877.716 1.354 1.086 3.62 2.905 3.62 4.44v10h8v-10c0-5.373-4.302-8.825-6.613-10.68-.26-.209-.5-.4-.706-.575-.487-.413-.963-.809-1.431-1.199-1.236-1.026-2.402-1.996-3.57-3.135C60.148 111.063 56 101.301 56 90.923s4.148-20.14 11.68-27.488C75.24 56.061 85.298 52 96 52c10.704.0 20.76 4.061 28.32 11.435 7.532 7.348 11.68 17.11 11.68 27.488s-4.148 20.14-11.68 27.488c-1.168 1.139-2.334 2.109-3.57 3.135-.468.39-.944.786-1.431 1.2-.206.174-.445.365-.706.574-2.31 1.855-6.613 5.307-6.613 10.68v10h8v-10c0-1.535 2.266-3.354 3.62-4.44.324-.26.62-.499.876-.716.465-.395.92-.773 1.368-1.145 1.302-1.082 2.647-2.2 4.042-3.561C138.995 115.27 144 103.476 144 90.923c0-12.552-5.005-24.348-14.094-33.215zM152 88v8h19.91v-8H152zM40 88H20.09v8H40v-8zm60-72h-8v20h8V16z"/></svg></span></div>It&rsquo;s nice to choose relatively unique and personalized values to avoid collisions in the public Eclipse Hono sandbox</div></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#aaa;font-style:italic># The Hono tenant to be created</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>TENANT</span>=demo
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># The identifier of the device on the tenant</span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># Note! It&#39;s important for the ID to follow the convention namespace:name (e.g. demo:device)</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>DEVICE_ID</span>=demo:device
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># The authentication identifier of the device</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>AUTH_ID</span>=demo_device
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># A password for the device to authenticate with</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>PWD</span>=secret
</span></span></code></pre></div><p>Run the provisioning script and you will have your Eclipse Hono tenant and device ready to be connected:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./hono_provisioning.sh
</span></span></code></pre></div><h3 id=configure-eclipse-kanto>Configure Eclipse Kanto</h3><p>Eclipse Kanto uses the <code>/etc/suite-connector/config.json</code> to acquire all the remote communication, identification and
authentication data to establish the remote connection. Update it with the following:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;provisioningFile&#34;</span>: <span style=color:#a50>&#34;/etc/suite-connector/provisioning.json&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/suite-connector/suite-connector.log&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>:<span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>:<span style=color:#a50>&#34;demo&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>:<span style=color:#a50>&#34;demo:device&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>:<span style=color:#a50>&#34;demo_device&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>:<span style=color:#a50>&#34;secret&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class="alert alert-light alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-tip{fill:#a19f20}</style></defs><title>Tip</title><path class="cls-alert-tip" d="M53.905 126.999l5.631 5.684-14.292 14.159-5.63-5.684L53.904 127zm98.481-86.3-5.63-5.683-14.414 14.28 5.63 5.683 14.414-14.28zm-19.922 91.984 14.292 14.159 5.63-5.684L138.096 127l-5.631 5.684zM59.658 49.295 45.244 35.016l-5.63 5.684 14.414 14.279 5.63-5.684zM72 160h48v-8H72v8zm4 16h40v-8H76v8zm53.906-118.291C120.844 48.868 108.803 44 96 44s-24.844 4.869-33.906 13.709C53.005 66.575 48 78.37 48 90.922c0 12.553 5.005 24.348 14.094 33.215 1.395 1.36 2.74 2.479 4.042 3.56.448.373.903.751 1.367 1.146.257.217.553.456.877.716 1.354 1.086 3.62 2.905 3.62 4.44v10h8v-10c0-5.373-4.302-8.825-6.613-10.68-.26-.209-.5-.4-.706-.575-.487-.413-.963-.809-1.431-1.199-1.236-1.026-2.402-1.996-3.57-3.135C60.148 111.063 56 101.301 56 90.923s4.148-20.14 11.68-27.488C75.24 56.061 85.298 52 96 52c10.704.0 20.76 4.061 28.32 11.435 7.532 7.348 11.68 17.11 11.68 27.488s-4.148 20.14-11.68 27.488c-1.168 1.139-2.334 2.109-3.57 3.135-.468.39-.944.786-1.431 1.2-.206.174-.445.365-.706.574-2.31 1.855-6.613 5.307-6.613 10.68v10h8v-10c0-1.535 2.266-3.354 3.62-4.44.324-.26.62-.499.876-.716.465-.395.92-.773 1.368-1.145 1.302-1.082 2.647-2.2 4.042-3.561C138.995 115.27 144 103.476 144 90.923c0-12.552-5.005-24.348-14.094-33.215zM152 88v8h19.91v-8H152zM40 88H20.09v8H40v-8zm60-72h-8v20h8V16z"/></svg></span></div>Instead of Eclipse Hono Sandbox a custom Eclipse Hono instance can be used by replacing the address value in accordance
with the Suite Connector configuration reference</div><p>Restart the Suite Connector service for the changes to take effect:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl restart suite-connector.service
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>To explore remote containerized applications management, we
will use the two Python scripts to run, monitor and remove a simple <a href=https://www.influxdata.com/ target=_blank>InfluxDB</a> container
using its public container image available at <a href=https://hub.docker.com/_/influxdb target=_blank>Docker Hub</a>.</p><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and will print all
received events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo
</span></span></code></pre></div><p>In another terminal, we are ready to spin up an InfluxDB container instance at the edge via executing the second application
that requires the command to execute (<code>run</code>), the Eclipse Hono tenant (<code>-t</code>), device identifier (<code>-d</code>) and
the full container image reference to use (<code>--img</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands.py run -t demo -d demo:device --img docker.io/library/influxdb:1.8.4
</span></span></code></pre></div><p>After the script exits with success, you can check out the new container running on your edge device via
executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo kanto-cm list
</span></span></code></pre></div><p>Looking at the terminal where the monitoring application is running, you will be able to see all the events triggered by
the operation.</p><p>To remove the newly created container, execute the same application script
only this time with the <code>rm</code> command and the identifier of the container to remove (<code>--id</code>), e.g.:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands.py rm -t demo -d demo:device --id e6f7fbea-0e95-433c-acc7-16ef21b9c033
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-4259e9d730eac6955fcfb132c82690a4>1.3 - Explore via Bosch IoT Device Management</h1><div class=lead>Connect and start managing your edge device via Bosch IoT Device Management.</div><p><a href=https://bosch-iot-suite.com/service/bosch-iot-device-management/ target=_blank>Bosch IoT Device
Management</a> enables remote data, management and configuration of devices and fleets of devices in a unified and
flexible manner. Eclipse Kanto is Bosch IoT Device Management integrated out-of-the-box.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure you have prepared the backend where your device will be connected you will need to perform the following</p><ul><li>Create a free <a href=https://docs.bosch-iot-suite.com/device-management/Subscribe-a-service-instance.html target=_blank>Bosch
IoT Device Management subscription</a> if you do not already have one</li><li><a href=https://docs.bosch-iot-suite.com/device-management/Register-a-gateway-device-via-the-Bosch-IoT-Suite-Console.html target=_blank>Provision a gateway device</a> from scratch with automatic provisioning of edge devices enabled
so that you are able to explore all capabilities provided by Eclipse Kanto</li></ul><h3 id=configure-eclipse-kanto>Configure Eclipse Kanto</h3><p>Eclipse Kanto uses the generated <code>provisioning.json</code> to acquire all the remote communication, identification and
authentication data to establish the remote connection. Once you have it available on the device
in <code>/etc/suite-connector/provisioning.json</code>, Eclipse Kanto will connect your device automatically.</p><h3 id=verify>Verify</h3><p>If the connection has been established successfully, you should be able to see two <em>Things</em> with a green plugged-in icon
on the right-hand side</p><ul><li><strong>&lt;your-namespace>:&lt;gateway-name></strong> - the gateway you have provisioned with <em>Features</em>, e.g.<ul><li>ConnectionStatus</li><li>SoftwareUpdatable</li><li>AutoUploadable</li><li>BackupAndRestore</li><li>Metrics</li></ul></li><li><strong>&lt;your-namespace>:&lt;gateway-name>:edge:containers</strong> - a virtual one that provides the edge container management <em>Features</em>, e.g.<ul><li>ConnectionStatus</li><li>ContainerFactory</li><li>SoftwareUpdatable</li><li>Metrics</li></ul></li></ul><h3 id=whats-next>What&rsquo;s next</h3><a href=https://docs.bosch-iot-suite.com/device-management/How-to-guides.html target=_blank>Learn how to manage your device via Bosch
IoT Device Management</a></div><div class=td-content style=page-break-before:always><h1 id=pg-dd948255948d6b59b32c471abcb62997>2 - Concepts</h1><div class=lead>Explore key essentials of Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-9f620eb6647cb9710020b1bfec6d463f>2.1 - Suite connector</h1><div class=lead>Empower the edge device with a remote connectivity.</div><p>Suite connector enables the remote connectivity to an IoT cloud ecosystem of choice, powered by Eclipse Hono™ (e.g. <a href=https://www.eclipse.org/packages/packages/cloud2edge target=_blank>Eclipse Cloud2Edge</a> and Bosch IoT Suite). It provides the following use cases:</p><ul><li><strong>Enriched remote connection</strong><ul><li><strong>Optimized</strong> - to pass the messages via a single underlying connection</li><li><strong>Secured</strong> - to protect the edge identity and data via TLS with basic and certificate-based authentication</li><li><strong>Maintained</strong> - with a reconnect exponential backoff algorithm</li><li><strong>Synchronized</strong> - on a connectivity recovering via a message buffering</li></ul></li><li><strong>Application protection</strong> - suite connector is the only one component with a remote connectivity i.e. all local applications are protected from exposure to the public network</li><li><strong>Offline mode</strong> - local applications don&rsquo;t need to care about the status of the remote connection, they can stay fully operable in offline mode</li></ul><p><img src=/kanto/images/docs/concepts/suite-connector.png alt="Suite connector"></p><h3 id=how-it-works>How it works</h3><p>The suite connector plays a key role in two communication aspects - local and remote.</p><h4 id=cloud-connectivity>Cloud connectivity</h4><p>To initiate its connection, the edge has to be manually or automatically provisioned. The result of this operation is different parameters and identifiers. Currently, suite connector supports MQTT transport as a connection-oriented and requiring less resources in comparison to AMQP. Once established, the connection is used as a channel to pass the edge telemetry and event messages. The IoT cloud can control the edge via commands and responses.</p><p>In case of a connection interruption, the suite connector will switch to offline mode. The message buffer mechanism will be activated to ensure that there is no data loss. Reconnect exponential backoff algorithm will be started to guarantee that no excessive load will be generated to the IoT cloud. All local applications are not affected and can continue to operate as normal. Once the remote connection is restored, all buffered messages will be sent and the edge will be fully restored to online mode.</p><h4 id=local-communication>Local communication</h4><p>Ensuring that local applications are loosely coupled, Eclipse Hono™ MQTT definitions are in use. The event-driven local messages exchange is done via a MQTT message broker - Eclipse Mosquitto™. The suite connector takes the responsibility to forward these messages to the IoT cloud and vice versa.</p><p>The provisioning information used to establish the remote communication is available locally both on request via a predefined message and on update populated via an announcement. Applications that would like to extend the edge functionality can further use it in Eclipse Hono™ and Eclipse Ditto™ definitions.</p><p>Monitoring of the remote connection status is also enabled locally as well, along with details like the last known state of the connection, timestamp and a predefined connect/disconnect reason.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4a072b39c39e5bf4fcdc72d3ddbf89da>2.2 - Container management</h1><div class=lead>Empower the edge device for containerized applications.</div><p>Container management enables a lightweight standard runtime which is capable to run containerized applications with all advantages of the technology: isolation, portability and efficiency. The deployment and management are available both locally and remotely via an IoT cloud ecosystem of choice. The following use cases are provided:</p><ul><li><strong>Standardized approach</strong> - with OCI (Open Container Initiative) compliant container images and runtime</li><li><strong>Lightweight runtime</strong> - with a default integration of <a href=https://containerd.io/ target=_blank><code>containerd</code></a> and a possibility for another container technology of choice like podman, LXC and more</li><li><strong>Isolation</strong> - with a default isolation from other containerized applications and the host system</li><li><strong>Portability</strong> - with an option to run one and the same containerized application on different platforms</li><li><strong>Pluggable architecture</strong> - with extension points on different levels</li></ul><p><img src=/kanto/images/docs/concepts/container-management.png alt="Container management"></p><h3 id=how-it-works>How it works</h3><p>A container image packs the application executable along with all its needed dependencies into a single artifact that can be built by a tooling of choice.
The built image is made available for usage by being pushed to a container image registry where the runtime can refer it to.</p><p>To create a new container instance, the container management uses such an image reference and a configuration for it to produce a fully functional container.
The container lifecycle (start, update, stop, remove) and environment (memory constraints, restart policy, etc.) are also handled by the runtime.
The container management continuously ensures the applications availability via state awareness and restart policies, provides monitoring via flexible logging and fine-grained resources management.
All of that is achieved on top of an underlying runtime of choice (<a href=https://containerd.io/ target=_blank><code>containerd</code></a> by default) that takes care of the low-level isolation mechanisms.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-bb0595debb658b54720b5c3af4a40fc2>2.3 - Software update</h1><div class=lead>Empower the edge device to handle diverse software updates.</div><p>Software update enables the deployment and management of various software artifacts, both locally and remotely via an IoT cloud ecosystem of choice. It provides the following use cases:</p><ul><li><strong>Robust download</strong> - with a retry and resume mechanism when the network connection is interrupted</li><li><strong>Artifact validation</strong> - with an integrity validation of every downloaded artifact</li><li><strong>Universal installation</strong> - with customizable install scripts to handle any kind of software</li><li><strong>Operation monitoring</strong> - with a status reporting of the download and install operations</li></ul><p><img src=/kanto/images/docs/concepts/software-update.png alt="Software update"></p><h3 id=how-it-works>How it works</h3><p>When the install operation is received at the edge, the download process is initiated. Retrieving the artifacts will continue until they are stored at the edge or their size threshold is reached. If successful, the artifacts are validated for integrity and further processed by the configured script. It is responsible to apply the new software and finish the operation. A status report is announced on each step of the process enabling its transparent monitoring.</p><p>On start up, if there have been any ongoing operations, they will be automatically resumed as the operation state is persistently stored.</p><h3 id=whats-next>What&rsquo;s next</h3><p><a href=/kanto/docs/how-to-guides/update-software/>How to update software</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-9ccb2b2c18eb4be9efb067f044e4cd18>2.4 - File upload</h1><div class=lead>Empower the edge device to upload files to various storage providers.</div><p>File upload enables sending of files to a backend storage of choice. It can be used both locally and remotely via a desired IoT cloud ecosystem. The following use cases are provided:</p><ul><li><strong>Storage diversity</strong> - with ready to use integrations with Azure Blob Storage, Amazon S3 and standard HTTP upload</li><li><strong>Automatic uploads</strong> - with periodically triggered uploads at a specified interval in a given time frame</li><li><strong>Data integrity</strong> - with an option to calculate and send the integrity check required information</li><li><strong>Operation monitoring</strong> - with a status reporting of the upload operation</li></ul><p><img src=/kanto/images/docs/concepts/file-upload.png alt="File upload"></p><h3 id=how-it-works>How it works</h3><p>It&rsquo;s not always possible to inline all the data into exchanged messages. For example, large log files or large diagnostic files cannot be sent as a telemetry message. In such scenarios, file upload can assist enabling massive amount of data to be stored to the backend storage.</p><p>There are different triggers which can initiate the upload operation: periodic or explicit. Once initiated, the request will be sent to the IoT cloud for confirmation or cancellation transferred back to the edge. If starting is confirmed, the files
to upload will be selected according to the specified configuration, their integrity check information can be calculated and the transfer of the binary content will begin. A status report is announced on each step of the upload process
enabling its transparent monitoring.</p><h3 id=whats-next>What&rsquo;s next</h3><p><a href=/kanto/docs/how-to-guides/upload-files/>How to upload files</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-7d8343cd9d2de79b39a26d7fb6d58108>3 - How-to guides</h1><div class=lead>Explore the functionalities of Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-3295c64fd45a7278dec1f9ac3fb381aa>3.1 - Update software</h1><div class=lead>Install a Debian package on your edge device.</div><p>Following the steps below you will install a<a href=https://www.gnu.org/software/hello/ target=_blank><code>hello</code></a>
Debian package via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A couple of simple Eclipse Hono northbound business applications written in Python are provided to explore
the capabilities for remotely installing and monitoring.
On the edge side, a basic
<a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/install_hello.sh target=_blank><code>install_hello.sh</code></a>
script will be downloaded and executed.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that your edge device is capable to execute the steps in this guide, you need:</p><ul><li><p>Debian-based linux distribution and the <code>apt</code> command line tool</p></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto, follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_su.py target=_blank>software update application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a>
guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_su.py
</span></span></code></pre></div></li><li><p>Executing <code>hello</code> in the terminal will return that the command is not found</p></li></ul><h3 id=install-debian-package>Install Debian package</h3><p>To explore the software management, we will use two Python scripts to install and monitor the <code>hello</code> Debian package.
The location where the Python applications will run does not have to be your edge device as they communicate remotely
with Eclipse Hono only.</p><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and will print all
received events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo
</span></span></code></pre></div><p>In another terminal, we are ready to spin up a <code>hello</code> Debian package at the edge via executing the second application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_su.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the new package is installed on your edge device via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>hello
</span></span></code></pre></div><p>The command now displays: <code>Hello, world!</code></p><h3 id=clean-up>Clean up</h3><p>The installed <code>hello</code> Debian package can be removed via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt remove hello
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-ea8723f5a1c117f2bc76a16b024f0ff2>3.2 - Upload files</h1><div class=lead>Upload a log file from your edge device.</div><p>Following the steps below you will upload an example log file to your HTTP file server
via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A simple Eclipse Hono northbound business application written in Python is
provided to explore the capabilities for remotely uploading and monitoring.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://github.com/sebageek/servefile/ target=_blank><code>servefile</code></a> installed</p><p>This is a small Python HTTP server used in the example to serve the uploads.
It does not have to be running on your edge device but it has to be accessible from there.
You can install it by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install servefile
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_fu.py target=_blank>file upload application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_fu.py
</span></span></code></pre></div></li></ul><h3 id=upload-log-file>Upload log file</h3><p>By default, all files in <code>/var/tmp/file-upload/</code> directory can be uploaded.
For example, grab the suite connector log file and place it in the directory via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir -p /var/tmp/file-upload/ &amp;&amp; sudo cp /var/log/suite-connector/suite-connector.log /var/tmp/file-upload/
</span></span></code></pre></div><p>Choose a directory where the log file will be uploaded, open a new terminal there and run <code>servefile</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -u .
</span></span></code></pre></div><p>To explore the file upload, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the log file upload from the edge via executing the application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fu.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the log file is on your HTTP file server listing the content of <code>servefile</code> working directory.</p><h3 id=clean-up>Clean up</h3><p>Stop <code>servefile</code> and clean up its working directory.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-043610093194cf60e3758f9f695c73cb>4 - References</h1><div class=lead>Explore customization of Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-1e43023a48407cfe64feb18a5509a0e0>4.1 - Remote connectivity configuration</h1><div class=lead>Customize the remote connectivity and automatic provisioning.</div></div><div class=td-content><h1 id=pg-acb76b8bad367952e99f3af2db1c0c2b>4.1.1 - Suite connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the suite connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>provisioningFile</td><td>string ​</td><td>provisioning.json</td><td>Path to the provisioning file, if <a href=/kanto/docs/getting-started/dmp/ target=_blank>Bosch IoT Device Management</a> is in use</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the suite connector will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the suite connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/suite-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect the publicly available
<a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>:<span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/suite-connector/suite-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;provisioningFile&#34;</span>: <span style=color:#a50>&#34;provisioning.json&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/suite-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8f7bfec5149532d21fcc007c2d3587af>4.1.2 - Suite bootstrapping configuration</h1><div class=lead>Customize the automatic provisioning.</div><h3 id=properties>Properties</h3><p>To control all aspects of the suite bootstrapping behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>preBootstrapScript</td><td>string[]</td><td></td><td>Path to the script/command with an optional sequence of additional flags/parameters that is executed before a bootstrapping request, optionally producing a <code>preBootstrapFile</code></td></tr><tr><td>preBootstrapFile</td><td>string</td><td></td><td>Path to the file used as a bootstrapping request data</td></tr><tr><td>postBootstrapScript</td><td>string[]</td><td></td><td>Path to the script/command with an optional sequence of additional flags/parameters that is executed after a bootstrapping response, optionally consuming a <code>postBootstrapFile</code></td></tr><tr><td>postBootstrapFile</td><td>string</td><td></td><td>Path to the file used for a bootstrapping response data</td></tr><tr><td>bootstrapProvisioningFile</td><td>string</td><td></td><td>Path to the file that stores the provisioning information from a bootstrapping response</td></tr><tr><td>maxChunkSize</td><td>int</td><td>46080</td><td>Maximum chunk size of the request data in bytes</td></tr><tr><td>provisioningFile</td><td>string</td><td>provisioning.json</td><td>Path to the provisioning file, if <a href=/kanto/docs/getting-started/dmp/ target=_blank>Bosch IoT Device Management</a> is in use</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the suite bootstrapping will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/suite-bootstrapping.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><p><strong>Example</strong></p><p>The minimal required configuration to connect the publicly available
<a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a> and request automatic provisioning.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>:<span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/suite-bootstrapping/suite-bootstrapping.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;preBootstrapScript&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;preBootstrapFile&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;postBootstrapScript&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;postBootstrapFile&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;bootstrapProvisioningFile&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;maxChunkSize&#34;</span>: <span style=color:#099>46080</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;provisioningFile&#34;</span>: <span style=color:#a50>&#34;provisioning.json&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/suite-bootstrapping.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-e3f44522a7168d1eeef35264012b536b>4.2 - Local digital twins configuration</h1><div class=lead>Customize the local digital twins persistency, access and synchronization.</div><h3 id=properties>Properties</h3><p>To control all aspects of the local digital twins behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>thingsDb</td><td>string</td><td>things.db</td><td>Path to the file where digital twins will be stored</td></tr><tr><td>provisioningFile</td><td>string ​</td><td>provisioning.json</td><td>Path to the provisioning file, if <a href=/kanto/docs/getting-started/dmp/ target=_blank>Bosch IoT Device Management</a> is in use</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the local digital twins will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the local digital twins will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/local-digital-twins.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to enable the local digital twins and their synchronization with the publicly available <a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>:<span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/local-digital-twins/local-digital-twins.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;thingsDb&#34;</span>: <span style=color:#a50>&#34;things.db&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;provisioningFile&#34;</span>: <span style=color:#a50>&#34;provisioning.json&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/local-digital-twins.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-06af2c208a89b1647c8ccdaa4b0a08d7>4.3 - Container management configuration</h1><div class=lead>Customize the deployment and management of containers.</div></div><div class=td-content><h1 id=pg-5ec561ebd13cd31801c37882f826ab0d>4.3.1 - Container configuration</h1><div class=lead>Customize the deployment of a container instance.</div><h3 id=properties>Properties</h3><p>To control all aspects of the container instance behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>container_name</td><td>string</td><td>&lt;container_id></td><td>User-defined name for the container, if omitted the internally auto-generated container ID will be set</td></tr><tr><td><strong>Image</strong></td><td></td><td></td><td></td></tr><tr><td>name</td><td>string</td><td></td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td><strong>Image - decryption</strong></td><td></td><td></td><td></td></tr><tr><td>keys</td><td>string[]</td><td></td><td>Private keys (GPG private key ring, JWE or PKCS7) used for decrypting the container&rsquo;s image, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>recipients</td><td>string[]</td><td></td><td>Recipients (only for PKCS7 and must be an x509) used for decrypting the container&rsquo;s image, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td><strong>Networking</strong></td><td></td><td></td><td></td></tr><tr><td>domain_name</td><td>string</td><td>&lt;container_name>-domain</td><td>Domain name inside the container, if omitted the <code>container_name</code> with suffix -domain will be set</td></tr><tr><td>host_name</td><td>string</td><td>&lt;container_name>-host</td><td>Host name for the container, if omitted the <code>container_name</code> with suffix -host will be set</td></tr><tr><td>network_mode</td><td>string</td><td>bridge</td><td>The container&rsquo;s networking capabilities type based on the desired communication mode, the possible options are: bridge or host</td></tr><tr><td>extra_hosts</td><td>string[]</td><td></td><td>Extra host name to IP address mappings added to the container network configuration, the format is: <code>hostname:ip</code></td></tr><tr><td><strong>Networking - port mappings</strong></td><td></td><td></td><td></td></tr><tr><td>proto</td><td>string</td><td>tcp</td><td>Protocol used for the port mapping from the container to the host, the possible options are: tcp and udp</td></tr><tr><td>container_port</td><td>int</td><td></td><td>Port number on the container that is mapped to the host port</td></tr><tr><td>host_ip</td><td>string</td><td>0.0.0.0</td><td>Host IP address</td></tr><tr><td>host_port</td><td>int</td><td></td><td>Beginning of the host ports range</td></tr><tr><td>host_port_end</td><td>int</td><td>&lt;host_port></td><td>Ending of the host ports range</td></tr><tr><td><strong>Host resources - devices</strong></td><td></td><td></td><td></td></tr><tr><td>path_on_host</td><td>string</td><td></td><td>Path to the device on the host</td></tr><tr><td>path_in_container</td><td>string</td><td></td><td>Path to the device in the container</td></tr><tr><td>cgroup_permissions</td><td>string</td><td>rwm</td><td>Cgroup permissions for the device access, possible options are: r(read), w(write), m(mknod) and all combinations are possible</td></tr><tr><td>privileged</td><td>bool</td><td>false</td><td>Grant root capabilities to all devices on the host system</td></tr><tr><td><strong>Host resources - mount points</strong></td><td></td><td></td><td></td></tr><tr><td>source</td><td>string</td><td></td><td>Path to the file or directory on the host that is referred from within the container</td></tr><tr><td>destination</td><td>string</td><td></td><td>Path to the file or directory that is mounted inside the container</td></tr><tr><td>propagation_mode</td><td>string</td><td>rprivate</td><td>Bind propagation for the mount, supported are: rprivate, private, rshared, shared, rslave or slave</td></tr><tr><td><strong>Process</strong></td><td></td><td></td><td></td></tr><tr><td>env</td><td>string[]</td><td></td><td>Environment variables that are set into the container</td></tr><tr><td>cmd</td><td>string[]</td><td></td><td>Command with arguments that is executed upon the container&rsquo;s start</td></tr><tr><td><strong>Resource management</strong></td><td></td><td></td><td></td></tr><tr><td>memory</td><td>string</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memory_reservation</td><td>string</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memory_reservation</code> must be smaller than it</td></tr><tr><td>memory_swap</td><td>string</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr><tr><td><strong>Lifecycle</strong></td><td></td><td></td><td></td></tr><tr><td>type</td><td>string</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maximum_retry_count</td><td>int</td><td></td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>retry_timeout</td><td>int</td><td></td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>type</td><td>string</td><td>json-file</td><td>Type in which the logs are produced, the possible options are: json-file or none</td></tr><tr><td>max_files</td><td>int</td><td>2</td><td>Maximum log files before getting rotated</td></tr><tr><td>max_size</td><td>string</td><td>100M</td><td>Maximum log file size before getting rotated as a number with a unit suffix of B, K, M and G</td></tr><tr><td>root_dir</td><td>string</td><td>&lt;meta_path>/containers/&lt;container_id></td><td>Root directory where the container&rsquo;s log messages are stored</td></tr><tr><td>mode</td><td>string</td><td>blocking</td><td>Messaging delivery mode from the container to the log driver, the supported modes are: blocking and non-blocking</td></tr><tr><td>max_buffer_size</td><td>string</td><td>1M</td><td>Maximum size of the buffered container&rsquo;s log messages in a non-blocking mode as a number with a unit suffix of B, K, M and G</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to spin up an InfluxDB container instance.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;image&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;docker.io/library/influxdb:1.8.4&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case. The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may require property removal</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;container_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;image&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;decrypt_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;keys&#34;</span>: [],
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;recipients&#34;</span>: []
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;domain_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;host_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mount_points&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;destination&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;source&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;propagation_mode&#34;</span>: <span style=color:#a50>&#34;rprivate&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;env&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;cmd&#34;</span>: []
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;host_config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;devices&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;path_on_host&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;path_in_container&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;cgroup_permissions&#34;</span>: <span style=color:#a50>&#34;rwm&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;network_mode&#34;</span>: <span style=color:#a50>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;privileged&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;extra_hosts&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;port_mappings&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;proto&#34;</span>: <span style=color:#a50>&#34;tcp&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;container_port&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_ip&#34;</span>: <span style=color:#a50>&#34;0.0.0.0&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_port&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_port_end&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory_reservation&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory_swap&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;restart_policy&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;unless-stopped&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;maximum_retry_count&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;retry_timeout&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;driver_config&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_files&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_size&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;root_dir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;mode_config&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_buffer_size&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3a1ecf0c4318cf78aef2b1c17e1dfd41>4.3.2 - Manager configuration</h1><div class=lead>Customize the container manager components.</div><h3 id=properties>Properties</h3><p>To control all aspects of the container manager behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the container manager data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the container manager&rsquo;s executable artifacts</td></tr><tr><td>container_client_sid</td><td>string</td><td>container-management.service.local.v1.service-containerd-client</td><td>Unique identifier that is used for an interaction with the runtime</td></tr><tr><td>network_manager_sid</td><td>string</td><td>container-management.service.local.v1.service-libnetwork-manager</td><td>Unique identifier that is used for networking</td></tr><tr><td>default_ctrs_stop_timeout</td><td>int</td><td>30</td><td>Timeout in seconds for a container to stop gracefully, otherwise its root process will be force stopped</td></tr><tr><td><strong>Runtime</strong></td><td></td><td></td><td></td></tr><tr><td>default_ns</td><td>string</td><td>kanto-cm</td><td>Namespace that is used by the runtime for isolation</td></tr><tr><td>address_path</td><td>string</td><td>/run/containerd/containerd.sock</td><td>Path to the runtime&rsquo;s communication endpoint</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the runtime data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the runtime&rsquo;s executable artifacts</td></tr><tr><td>image_dec_keys</td><td>string[]</td><td></td><td>Private keys (GPG private key ring, JWE or PKCS7) used for decrypting container images, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>image_dec_recipients</td><td>string[]</td><td></td><td>Recipients (only for PKCS7 and must be an x509) used for decrypting container images, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td>runc_runtime</td><td>string</td><td>io.containerd.runc.v2</td><td>Runc communication mode, the possible values are: io.containerd.runtime.v1.linux, io.containerd.runc.v1 and io.containerd.runc.v2</td></tr><tr><td>image_expiry</td><td>string</td><td>744h</td><td>Time period for the cached images and content to be kept in the form of e.g. 72h3m0.5s</td></tr><tr><td>image_expiry_disable</td><td>bool</td><td>false</td><td>Disable expiry management of cached images and content, must be used with caution as it may lead to large memory volumes being persistently allocated</td></tr><tr><td>lease_id</td><td>string</td><td>kanto-cm.lease</td><td>Lease identifier to be used for container resources persistence</td></tr><tr><td><strong>Registry access - secure</strong></td><td></td><td></td><td></td></tr><tr><td>user_id</td><td>string</td><td></td><td>User unique identifier to authenticate to the image registry</td></tr><tr><td>password</td><td>string</td><td></td><td>Password to authenticate to the image registry</td></tr><tr><td>root_ca</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>client_cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the image registry</td></tr><tr><td>client_key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the image registry</td></tr><tr><td><strong>Registry access - insecure</strong></td><td></td><td></td><td></td></tr><tr><td>insecure_registries</td><td>string[]</td><td>localhost</td><td>Image registries that do not use valid certificates or do not require a HTTPS connection, the format is: <code>host[:port]</code></td></tr><tr><td><strong>Networking</strong></td><td></td><td></td><td></td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the network manager data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the network manager&rsquo;s executable artifacts</td></tr><tr><td><strong>Networking - bridge</strong></td><td></td><td></td><td></td></tr><tr><td>name</td><td>string</td><td>kanto-cm0</td><td>Bridge name</td></tr><tr><td>ip4</td><td>string</td><td></td><td>Bridge IPv4 address</td></tr><tr><td>fcidr4</td><td>string</td><td></td><td>IPv4 address range for the bridge, using the standard CIDR notation</td></tr><tr><td>gwip4</td><td>string</td><td></td><td>Bridge gateway IPv4 address</td></tr><tr><td>enable_ip6</td><td>bool</td><td>false</td><td>Permit the bridge IPv6 support</td></tr><tr><td>mtu</td><td>int</td><td>1500</td><td>Bridge maximum transmission unit in bytes</td></tr><tr><td>icc</td><td>bool</td><td>true</td><td>Permit the inter-container communication</td></tr><tr><td>ip_tables</td><td>bool</td><td>true</td><td>Permit the IP tables rules</td></tr><tr><td>ip_forward</td><td>bool</td><td>true</td><td>Permit the IP forwarding</td></tr><tr><td>ip_masq</td><td>bool</td><td>true</td><td>Permit the IP masquerading</td></tr><tr><td>userland_proxy</td><td>bool</td><td>false</td><td>Forbid the userland proxy for the loopback traffic</td></tr><tr><td><strong>Local communication</strong></td><td></td><td></td><td></td></tr><tr><td>protocol</td><td>string</td><td>unix</td><td>Communication protocol used for accessing the gRPC server, the possible values are: tcp, tcp4, tcp6, unix or unixpacket</td></tr><tr><td>address_path</td><td>string</td><td>/run/container-management/container-management.sock</td><td>Path to the gRPC server&rsquo;s communication endpoint</td></tr><tr><td><strong>Digital twin</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the container manager digital twin representation</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the digital twin data</td></tr><tr><td>features</td><td>string[]</td><td>ContainerFactory, SoftwareUpdatable, Metrics</td><td>Features that will be registered for the container manager digital twin, the possible values are: ContainerFactory, SoftwareUpdatable and Metrics</td></tr><tr><td><strong>Digital twin - connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker_url</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the container manager will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>keep_alive</td><td>int</td><td>20000</td><td>Keep alive duration in milliseconds for the MQTT requests</td></tr><tr><td>disconnect_timeout</td><td>int</td><td>250</td><td>Disconnect timeout in milliseconds for the MQTT server/broker</td></tr><tr><td>client_username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>client_password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>connect_timeout</td><td>int</td><td>30000</td><td>Connect timeout in milliseconds for the MQTT server/broker</td></tr><tr><td>acknowledge_timeout</td><td>int</td><td>15000</td><td>Acknowledge timeout in milliseconds for the MQTT requests</td></tr><tr><td>subscribe_timeout</td><td>int</td><td>15000</td><td>Subscribe timeout in milliseconds for the MQTT requests</td></tr><tr><td>unsubscribe_timeout</td><td>int</td><td>5000</td><td>Unsubscribe timeout in milliseconds for the MQTT requests</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>log_file</td><td>string</td><td>log/container-management.log</td><td>Path to the file where the container manager&rsquo;s log messages are written</td></tr><tr><td>log_level</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>log_file_count</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>log_file_max_age</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>log_file_size</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr><tr><td>syslog</td><td>bool</td><td>false</td><td>Route logs to the local syslog</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets a timeout period of 5 seconds for the managed containers to stop gracefully.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;manager&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ctrs_stop_timeout&#34;</span>: <span style=color:#099>5</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file&#34;</span>: <span style=color:#a50>&#34;/var/log/container-management/container-management.log&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that in the registry configuration the host (used as a key) has to be set instead of the default empty string, the format is: host[:port]</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;manager&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;container_client_sid&#34;</span>: <span style=color:#a50>&#34;container-management.service.local.v1.service-containerd-client&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;network_manager_sid&#34;</span>: <span style=color:#a50>&#34;container-management.service.local.v1.service-libnetwork-manager&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ctrs_stop_timeout&#34;</span>: <span style=color:#099>30</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ns&#34;</span>: <span style=color:#a50>&#34;kanto-cm&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;address_path&#34;</span>: <span style=color:#a50>&#34;/run/containerd/containerd.sock&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_dec_keys&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_dec_recipients&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;runc_runtime&#34;</span>: <span style=color:#a50>&#34;io.containerd.runc.v2&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_expiry&#34;</span>: <span style=color:#a50>&#34;744h&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_expiry_disable&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;lease_id&#34;</span>: <span style=color:#a50>&#34;kanto-cm.lease&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;registry_configurations&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;credentials&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;user_id&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;transport&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;root_ca&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;client_cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;client_key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;insecure_registries&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;localhost&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;network&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_bridge&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;kanto-cm0&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip4&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;fcidr4&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;enable_ip6&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;mtu&#34;</span>: <span style=color:#099>1500</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;icc&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_tables&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_forward&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_masq&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;userland_proxy&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;grpc_server&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;protocol&#34;</span>: <span style=color:#a50>&#34;unix&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;address_path&#34;</span>: <span style=color:#a50>&#34;/run/container-management/container-management.sock&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;things&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;features&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;ContainerFactory&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;SoftwareUpdatable&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;Metrics&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;connection&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;broker_url&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;keep_alive&#34;</span>: <span style=color:#099>20000</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;disconnect_timeout&#34;</span>: <span style=color:#099>250</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;client_username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;client_password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;connect_timeout&#34;</span>: <span style=color:#099>30000</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;acknowledge_timeout&#34;</span>: <span style=color:#099>15000</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;subscribe_timeout&#34;</span>: <span style=color:#099>15000</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;unsubscribe_timeout&#34;</span>: <span style=color:#099>5000</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file&#34;</span>: <span style=color:#a50>&#34;log/container-management.log&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_level&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_count&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_size&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_max_age&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;syslog&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-b2c1d21c4a9cc13d9be27087a3526748>4.4 - Software update configuration</h1><div class=lead>Customize the deployment and management of software artifacts.</div><h3 id=properties>Properties</h3><p>To control all aspects of the software update behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>SoftwareUpdatable</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>moduleType</td><td>string</td><td>software</td><td>Type of the software that is managed by this feature</td></tr><tr><td>artifactType</td><td>string</td><td>archive</td><td>Type of the artifact that is to be processed: archive or plain</td></tr><tr><td>install</td><td>string[]</td><td></td><td>Absolute path to the install script/command and an optional sequence of additional flags/parameters</td></tr><tr><td>storageLocation</td><td>string</td><td>./</td><td>Path to the storage directory where the working files are stored</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the software update will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/software-update.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets the software type to firmware.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;moduleType&#34;</span>: <span style=color:#a50>&#34;firmware&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storageLocation&#34;</span>: <span style=color:#a50>&#34;/var/lib/software-update&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/software-update/software-update.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;SoftwareUpdatable&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;moduleType&#34;</span>: <span style=color:#a50>&#34;software&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;artifactType&#34;</span>: <span style=color:#a50>&#34;archive&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;install&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storageLocation&#34;</span>: <span style=color:#a50>&#34;./&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/software-update.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-01316635438332b05a343c9a9910a8c4>4.5 - File upload configuration</h1><div class=lead>Customize the files transfer to a backend storage.</div><h3 id=properties>Properties</h3><p>To control all aspects of the file upload behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>AutoUploadable</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>type</td><td>string</td><td>file</td><td>Type of the files that are uploaded by this feature</td></tr><tr><td>context</td><td>string</td><td>edge</td><td>Context of the files that are uploaded by this feature, unique in the scope of the <code>type</code></td></tr><tr><td>files</td><td>string</td><td></td><td>Glob pattern to select the files for upload</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction on files that can be dynamically selected for an upload, the supported modes are: strict, lax and scoped</td></tr><tr><td>singleUpload</td><td>bool</td><td>false</td><td>Forbid triggering of new uploads when there is an upload in progress</td></tr><tr><td>checksum</td><td>bool</td><td>false</td><td>Send MD5 checksum for uploaded files to ensure data integrity</td></tr><tr><td>stopTimeout</td><td>string</td><td>30s</td><td>Time to wait for running uploads to finish as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td>delete</td><td>bool</td><td>false</td><td>Delete successfully uploaded files</td></tr><tr><td><strong>Upload - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure uploads</td></tr><tr><td><strong>Auto upload</strong></td><td></td><td></td><td></td></tr><tr><td>active</td><td>bool</td><td>false</td><td>Activate periodic uploads</td></tr><tr><td>activeFrom</td><td>string</td><td></td><td>Time from which periodic uploads should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) current time will be used as start of the periodic uploads</td></tr><tr><td>activeTill</td><td>string</td><td></td><td>Time till which periodic uploads should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) periodic uploads will be active indefinitely</td></tr><tr><td>period</td><td>string</td><td>10h</td><td>Upload period as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the file upload will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/file-upload.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets the file type to log.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;files&#34;</span>: <span style=color:#a50>&#34;/var/tmp/file-upload/*.*&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/file-upload/file-upload.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;AutoUploadable&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;file&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;context&#34;</span>: <span style=color:#a50>&#34;edge&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;files&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;singleUpload&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;checksum&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;stopTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;delete&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;active&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;activeFrom&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;activeTill&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;period&#34;</span>: <span style=color:#a50>&#34;10h&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/file-upload.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3f963e28259de540d29b964715a3016b>4.6 - File backup configuration</h1><div class=lead>Customize the files backup and restore to and from a backend storage.</div><h3 id=properties>Properties</h3><p>To control all aspects of the file backup behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>BackupAndRestore</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>type</td><td>string</td><td>file</td><td>Type of the files that are backed up by this feature</td></tr><tr><td>context</td><td>string</td><td>edge</td><td>Context of the files backed up by this feature, unique in the scope of the <code>type</code></td></tr><tr><td>dir</td><td>string</td><td></td><td>Directory to be backed up</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction on directories that can be dynamically selected for a backup, the supported modes are: strict, lax and scoped</td></tr><tr><td>backupCmd</td><td>string</td><td></td><td>Command to be executed before the backup is done</td></tr><tr><td>restoreCmd</td><td>string</td><td></td><td>Command to be executed after the restore</td></tr><tr><td>singleUpload</td><td>bool</td><td>false</td><td>Forbid triggering of new backups when there is a backup in progress</td></tr><tr><td>checksum</td><td>bool</td><td>false</td><td>Send MD5 checksum for backed up files to ensure data integrity</td></tr><tr><td>stopTimeout</td><td>string</td><td>30s</td><td>Time to wait for running backups to finish as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td>keepUploaded</td><td>bool</td><td>false</td><td>Keep successfully uploaded backups locally</td></tr><tr><td>storage</td><td>string</td><td>./storage</td><td>Directory where backups and downloads will be stored</td></tr><tr><td><strong>Upload/Download - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure uploads and downloads</td></tr><tr><td><strong>Auto backup</strong></td><td></td><td></td><td></td></tr><tr><td>active</td><td>bool</td><td>false</td><td>Activate periodic backups</td></tr><tr><td>activeFrom</td><td>string</td><td></td><td>Time from which periodic backups should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) current time will be used as start of the periodic backups</td></tr><tr><td>activeTill</td><td>string</td><td></td><td>Time till which periodic backups should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) periodic backups will be active indefinitely</td></tr><tr><td>period</td><td>string</td><td>10h</td><td>Backup period as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the file backup will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/file-backup.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that enables backing up a directory and sets the file type to config.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;config&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;dir&#34;</span>: <span style=color:#a50>&#34;/var/tmp/file-backup&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;scoped&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storage&#34;</span>: <span style=color:#a50>&#34;/var/lib/file-backup&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/file-backup/file-backup.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible.</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;BackupAndRestore&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;file&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;context&#34;</span>: <span style=color:#a50>&#34;edge&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;dir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;backupCmd&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;restoreCmd&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;singleUpload&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;checksum&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;stopTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;keepUploaded&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;storage&#34;</span>: <span style=color:#a50>&#34;./storage&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;active&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;activeFrom&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;activeTill&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;period&#34;</span>: <span style=color:#a50>&#34;10h&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/file-backup.log&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-0eee451d3069409589fa6cb50119a20b>4.7 - System metrics configuration</h1><div class=lead>Customize the reporting of system metrics.</div><h3 id=properties>Properties</h3><p>To control all aspects of the system metrics behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>frequency</td><td>string</td><td></td><td>Initial system metrics reporting frequency as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the system metrics will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/system-metrics.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that enables the auto reporting of system metrics.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>: <span style=color:#a50>&#34;60s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/system-metrics/system-metrics.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span> : <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#a50>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/system-metrics.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Eclipse Kanto Project" aria-label="Eclipse Kanto Project"><a class=text-white target=_blank rel=noopener href=https://projects.eclipse.org/projects/iot.kanto aria-label="Eclipse Kanto Project"><i class="fas fa-external-link-alt"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://accounts.eclipse.org/mailing-list/kanto-dev aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The Eclipse Kanto™ Project. All Rights Reserved.</small></div></div><div class=row><div class="col-12 text-center mb-2"><a href=https://eclipse.org/projects/what-is-incubation.php><img class=eclipse-incubation-logo src=https://websites.eclipseprojects.io/kanto//images/logos/eclipse/eclipse_incubation_horizontal.svg alt=eclipse-incubation-logo></a>
<a href=https://iot.eclipse.org/><img class=eclipse-iot-logo src="https://websites.eclipseprojects.io/kanto//images/logos/eclipse/new_iot_logo_clr -white.svg" alt=eclipse-iot></a></div></div><div class=row><div class="col-12 text-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org>Eclipse Foundation</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/>Legal</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/raw/main/LICENSE>License</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/security/>Report a Vulnerability</a></small></li></ul></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/kanto/js/tabpane-persist.js></script>
<script src=/kanto/js/main.min.63f7ccf0f6f052be82a52cc628622eadcdaa7d38aa242c60a3cad13badb12dd9.js integrity="sha256-Y/fM8PbwUr6CpSzGKGIurc2qfTiqJCxgo8rRO62xLdk=" crossorigin=anonymous></script>
<script src=/kanto/js/prism.js></script>
<script src=//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js></script></body></html>