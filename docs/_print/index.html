<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://eclipse.dev/kanto/docs/><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/kanto/favicons/favicon.ico><link rel=apple-touch-icon href=/kanto/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/kanto/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/kanto/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/kanto/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/kanto/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/kanto/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/kanto/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/kanto/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/kanto/favicons/android-192x192.png sizes=192x192><title>Eclipse Kanto™ | IoT edge software stack</title>
<meta name=description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta property="og:title" content><meta property="og:description" content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta property="og:type" content="website"><meta property="og:url" content="https://eclipse.dev/kanto/docs/"><meta itemprop=name content><meta itemprop=description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><link rel=preload href=/kanto/scss/main.min.a18aba0e2d7976803148e96cc2d140e57525cec88f2ff9e586327efa4c1a646e.css as=style><link href=/kanto/scss/main.min.a18aba0e2d7976803148e96cc2d140e57525cec88f2ff9e586327efa4c1a646e.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/kanto/css/prism.css></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-dark navbar-color td-navbar"><div class=container-fluid role=navigation><a class=navbar-brand href=/kanto/><span class=navbar-logo><svg id="kanto_logo" data-name="Kanto Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50"><defs><style>.cls-kanto_logo{fill:#fff}</style></defs><title>Eclipse Kanto</title><g transform="translate(0.0,50.0) scale(0.025,-0.025)"><path class="cls-kanto_logo" d="M370 1754c-168-290-306-529-308-533-2-6 557-986 604-1059l14-22h619 619l255 442c327 569 357 622 357 635 0 6-137 246-305 534l-304 524-623 2-623 2-305-525zm780 352c0-2-72-129-161-281-88-152-159-279-157-281s33 14 68 35c255 151 9e2 521 908 521 9 0 182-293 182-308 0-4-219-133-487-287-267-154-485-284-485-290 1-8 930-553 966-568 7-2-140-275-170-316-2-2-222 123-490 278-268 154-490 279-492 276-2-2 66-125 152-274 86-148 156-272 156-275 0-4-80-6-178-6H783L530 768c-139 240-253 442-253 448s114 210 253 452l254 442h183c101 0 183-2 183-4z"/><path class="cls-kanto_logo" d="M2890 1240V520h110 110v236 235l29-3c26-3 50-31 193-233l163-230 128-3c70-1 127 0 127 3s-86 128-191 276c-189 268-191 271-172 292 10 12 96 106 191 208 94 103 172 190 172 193s-60 6-134 6h-135l-158-170c-130-140-163-170-185-170h-28v4e2 4e2H3e3h-110v-720z"/><path class="cls-kanto_logo" d="M5965 1738c-3-18-12-77-20-132-7-54-16-1e2-19-103s-40-15-83-27l-78-22v-64-65l82-3 81-3 4-292c5-323 11-360 71-433 51-61 92-74 245-74h133l-3 67-3 67-80 24c-144 43-145 45-145 381v260l118 3 117 3 3 88 3 87h-121-120v135 135h-90-89l-6-32z"/><path class="cls-kanto_logo" d="M4165 1510c-102-9-236-35-267-51-14-8-18-23-18-74v-65h37c21 0 121 5 224 11 276 16 309 1 309-137v-74h-193c-228 0-277-10-336-69-53-53-71-113-71-234 0-119 12-164 58-217 49-58 102-82 193-88 91-5 158 12 273 69 43 22 80 38 82 36 1-1 12-24 23-50l20-47h86 86l-3 393c-3 385-3 393-26 442-64 139-190 180-477 155zm285-635V770l-27-11c-102-41-176-61-233-66-59-5-69-3-93 18-22 19-29 35-34 79-8 81 10 137 50 155 27 13 170 29 3e2 34l37 1V875z"/><path class="cls-kanto_logo" d="M5225 1486c-33-12-86-39-117-59l-58-37-14 33c-7 19-17 43-20 55-7 20-14 22-92 22h-84v-490-490h105 105v360 359l43 25c99 58 244 83 304 53 61-32 63-47 63-441V520h111 110l-3 378c-4 367-4 379-27 435-30 75-73 124-136 153-70 33-204 33-290 0z"/><path class="cls-kanto_logo" d="M6820 15e2c-96-13-187-63-227-124-43-64-62-128-75-263-13-126-2-288 26-380 49-159 197-231 451-220 239 10 340 82 380 274 17 81 20 318 4 413-24 150-96 243-218 280-76 24-242 34-341 20zm287-206c52-39 66-99 67-279s-10-238-54-280c-33-31-82-45-165-45-135 0-193 40-215 146-17 81-8 346 13 394 33 75 70 90 214 87 96-2 116-5 140-23z"/></svg></span>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=main_navbar><ul class="navbar-nav me-4 mb-2 mb-lg-0 ps-4 pl-lg-2"><li class="nav-item me-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/><span class=active>Home</span></a></li><li class="nav-item me-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/about/><span>About</span></a></li><li class="nav-item me-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/docs/><span class=active>Documentation</span></a></li><li class="nav-item me-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/community/><span>Community</span></a></li></ul><div class=navbar-nav><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/kanto/offline-search-index.4e58df7dc7e66072d29d3ddba2cf4f3a.json data-offline-search-base-href=/ data-offline-search-max-results=50></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/kanto/docs/>Return to the regular view of this page</a>.</p></div><h1 class=title></h1><ul><li>1: <a href=#pg-17b09a9dc5200475d8a306f18e63a0f9>Getting started</a></li><ul><li>1.1: <a href=#pg-02f5d8e73808806ac924fe6ee4ac7bff>Install Eclipse Kanto</a></li><li>1.2: <a href=#pg-759da719bcf88ff1c05841298fc29ad3>Explore via Eclipse Hono</a></li></ul><li>2: <a href=#pg-dd948255948d6b59b32c471abcb62997>Concepts</a></li><ul><li>2.1: <a href=#pg-580d985510487e15c6eab66a98607676>AWS Connector</a></li><li>2.2: <a href=#pg-9f620eb6647cb9710020b1bfec6d463f>Suite connector</a></li><li>2.3: <a href=#pg-4a072b39c39e5bf4fcdc72d3ddbf89da>Container management</a></li><li>2.4: <a href=#pg-3f32cf3487f749ba1c798b8737d8952a>Update manager</a></li><li>2.5: <a href=#pg-bb0595debb658b54720b5c3af4a40fc2>Software update</a></li><li>2.6: <a href=#pg-9ccb2b2c18eb4be9efb067f044e4cd18>File upload</a></li></ul><li>3: <a href=#pg-7d8343cd9d2de79b39a26d7fb6d58108>How-to guides</a></li><ul><li>3.1: <a href=#pg-3295c64fd45a7278dec1f9ac3fb381aa>Update software</a></li><li>3.2: <a href=#pg-ea8723f5a1c117f2bc76a16b024f0ff2>Upload files</a></li><li>3.3: <a href=#pg-170e578a7b1df9ad1c0c8ef0bb738ad1>Back up and restore files</a></li><li>3.4: <a href=#pg-9ebac16b59e8e67bb0ee2b0c90c399b0>Create and update the containers `Desired State`</a></li><li>3.5: <a href=#pg-6fde9501abfa40949911a42750ff0751>Monitor system metrics</a></li><li>3.6: <a href=#pg-ebe8e48efb87068b8a27ab00b3a217ba>Verify signed container images</a></li><li>3.7: <a href=#pg-1270c26a5987c83543f97ae3e9983a6f>Offline explore edge device</a></li></ul><li>4: <a href=#pg-043610093194cf60e3758f9f695c73cb>References</a></li><ul><li>4.1: <a href=#pg-1e43023a48407cfe64feb18a5509a0e0>Remote connectivity configuration</a></li><ul><li>4.1.1: <a href=#pg-4f33a938f47417e037b21a19a6c0028e>AWS Connector configuration</a></li><li>4.1.2: <a href=#pg-7644324c298e25d5c07c0085882211ba>Azure Connector configuration</a></li><li>4.1.3: <a href=#pg-acb76b8bad367952e99f3af2db1c0c2b>Suite connector configuration</a></li><li>4.1.4: <a href=#pg-3926d661a7ae1c567034b932f3851a4a>Local digital twins configuration</a></li></ul><li>4.2: <a href=#pg-06af2c208a89b1647c8ccdaa4b0a08d7>Container management configuration</a></li><ul><li>4.2.1: <a href=#pg-3a1ecf0c4318cf78aef2b1c17e1dfd41>Manager configuration</a></li><li>4.2.2: <a href=#pg-5ec561ebd13cd31801c37882f826ab0d>Container configuration</a></li><li>4.2.3: <a href=#pg-86f70e119f54e5f918738ddf3b2df8e5>API Reference</a></li><ul><li>4.2.3.1: <a href=#pg-9e6d9e03d959ccc1c4cf3a1b8df4dd16>Container Factory API</a></li><li>4.2.3.2: <a href=#pg-d92b0c2d8055aa885d88d167e96c76bb>Container API</a></li><li>4.2.3.3: <a href=#pg-a06f881f26a5aaab4f513dd987342133>Metrics API</a></li><li>4.2.3.4: <a href=#pg-a87803cbe8a7f247e049f3f168b5dec9>Software Updatable API</a></li></ul><li>4.2.4: <a href=#pg-872c561eb6735f729f4b50e9127140d4>Container configuration as Desired State component</a></li></ul><li>4.3: <a href=#pg-5743bc867ec5e301d16f987251313c8d>Software Updatable</a></li><ul><li>4.3.1: <a href=#pg-9767bb4be0bb151351b0ddd78b022cca>Software update configuration</a></li><li>4.3.2: <a href=#pg-2c8e931dc6982e84bbb9b080f0132227>Software Updatable API</a></li></ul><li>4.4: <a href=#pg-9d38c7f4f5116dc634462336dcb1b22f>File Upload</a></li><ul><li>4.4.1: <a href=#pg-ca900b9c63933f0b4aafc84a253b5e30>File upload configuration</a></li><li>4.4.2: <a href=#pg-3e671f908383d295c4130420c45793ae>File Upload API</a></li></ul><li>4.5: <a href=#pg-84e5886ae702fe90cbd5bba81b089dae>File Backup</a></li><ul><li>4.5.1: <a href=#pg-290fdafe0927e4ac6fe74cc82c6af513>File backup configuration</a></li><li>4.5.2: <a href=#pg-7559fb3ffc69ee07f9345429fd1560b5>File Backup API</a></li></ul><li>4.6: <a href=#pg-9e75257ab5f9aee5b02ba95678c80a00>System Metrics</a></li><ul><li>4.6.1: <a href=#pg-a6c68d347ea5a9f2fae78240687edde1>System metrics configuration</a></li><li>4.6.2: <a href=#pg-d1f90cffafa688f363b91bee56938207>System Metrics API</a></li></ul><li>4.7: <a href=#pg-2c5a03ed5bfeb95bab2eb24b32a3e2ab>Update Manager</a></li><ul><li>4.7.1: <a href=#pg-aa8ed68920984e8aaf115be9f72d2e4b>Update Manager API</a></li><li>4.7.2: <a href=#pg-33034280392f17e986def02436a6d904>Update manager configuration</a></li></ul></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-17b09a9dc5200475d8a306f18e63a0f9>1 - Getting started</h1><div class=lead>Explore different ways to connect and manage your edge device remotely using Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-02f5d8e73808806ac924fe6ee4ac7bff>1.1 - Install Eclipse Kanto</h1><div class=lead>Run Eclipse Kanto on your edge device.</div><h3 id=before-you-begin>Before you begin</h3><p>The <code>containerd</code> Debian package is required. You can install it manually or run:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -fsSL https://github.com/eclipse-kanto/kanto/raw/main/quickstart/install_ctrd.sh | sh
</span></span></code></pre></div><h3 id=install-eclipse-kanto>Install Eclipse Kanto</h3><p>Choose the Eclipse Kanto Debian package for your target device architecture from the ones available
at <a href=https://github.com/eclipse-kanto/kanto/releases target=_blank>the project&rsquo;s GitHub Releases page</a>.
Download and install it via executing the following (adjusted to your package name):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/releases/download/v1.0.0/kanto_1.0.0_linux_x86_64.deb &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>sudo apt install ./kanto_1.0.0_linux_x86_64.deb
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>It&rsquo;s important to check if all the services provided by the Eclipse Kanto package are up and running successfully. You
can quickly do that via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>systemctl status <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>suite-connector.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>container-management.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>software-update.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>file-upload.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>file-backup.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>system-metrics.service <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>kanto-update-manager.service
</span></span></code></pre></div><p>All listed services must be in an active running state.</p><h3 id=whats-next>What&rsquo;s next</h3><p><a href=/kanto/docs/getting-started/hono/>Explore via Eclipse Hono</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-759da719bcf88ff1c05841298fc29ad3>1.2 - Explore via Eclipse Hono</h1><div class=lead>Connect and start managing your edge device via Eclipse Hono.</div><p>By following the steps below you will connect your first device to a publicly
available <a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a> using Eclipse Kanto.
A couple of simple Eclipse Hono northbound business applications written in Python are provided to explore the capabilities for
remotely managing and monitoring your edge device.</p><h3 id=before-you-begin>Before you begin</h3><p>The location where the Python applications and utility shell scripts will run does not have to be your edge device as
they communicate remotely with Eclipse Hono only. To run them, you need:</p><ul><li><p><a href=https://wiki.python.org/moin/BeginnersGuide/Download target=_blank>Python 3</a>
and <a href=https://pip.pypa.io/en/stable/installation/# target=_blank>pip3</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/tree/main/quickstart target=_blank>quickstart applications and
provisioning scripts</a></p><p>You can execute the script below to download them automatically:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir quickstart &amp;&amp; <span style=color:#0aa>cd</span> quickstart &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands.py &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_events.py &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/requirements.txt &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_provisioning.sh
</span></span></code></pre></div></li><li><p>OpenSSL and the following SSL and SASL related libraries: <code>pkg-config</code>, <code>swig</code>, <code>libsasl2-dev</code>, <code>libsasl2-2</code> <code>libsasl2-modules-gssapi-mit</code> and <code>libssl-dev</code>, e.g.:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt install openssl pkg-config swig libsasl2-dev libsasl2-2 libsasl2-modules-gssapi-mit libssl-dev
</span></span></code></pre></div></li><li><p>Required Python dependencies to run the scripts</p><p>You can install them by using the downloaded <code>requirements.txt</code> file via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install -r requirements.txt
</span></span></code></pre></div></li></ul><h3 id=provision-the-eclipse-hono-tenant-and-device>Provision the Eclipse Hono tenant and device</h3><p>In order to be able to connect your device to Eclipse Hono, you need to have a dedicated tenant and a device instance
provisioned for it. Fill in the required empty environmental variables definitions in the <code>hono_provisioning.sh</code>, e.g.:<div class="alert alert-light alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-tip{fill:#a19f20}</style></defs><title>Tip</title><path class="cls-alert-tip" d="M53.905 126.999l5.631 5.684-14.292 14.159-5.63-5.684L53.904 127zm98.481-86.3-5.63-5.683-14.414 14.28 5.63 5.683 14.414-14.28zm-19.922 91.984 14.292 14.159 5.63-5.684L138.096 127l-5.631 5.684zM59.658 49.295 45.244 35.016l-5.63 5.684 14.414 14.279 5.63-5.684zM72 160h48v-8H72v8zm4 16h40v-8H76v8zm53.906-118.291C120.844 48.868 108.803 44 96 44s-24.844 4.869-33.906 13.709C53.005 66.575 48 78.37 48 90.922c0 12.553 5.005 24.348 14.094 33.215 1.395 1.36 2.74 2.479 4.042 3.56.448.373.903.751 1.367 1.146.257.217.553.456.877.716 1.354 1.086 3.62 2.905 3.62 4.44v10h8v-10c0-5.373-4.302-8.825-6.613-10.68-.26-.209-.5-.4-.706-.575-.487-.413-.963-.809-1.431-1.199-1.236-1.026-2.402-1.996-3.57-3.135C60.148 111.063 56 101.301 56 90.923s4.148-20.14 11.68-27.488C75.24 56.061 85.298 52 96 52c10.704.0 20.76 4.061 28.32 11.435 7.532 7.348 11.68 17.11 11.68 27.488s-4.148 20.14-11.68 27.488c-1.168 1.139-2.334 2.109-3.57 3.135-.468.39-.944.786-1.431 1.2-.206.174-.445.365-.706.574-2.31 1.855-6.613 5.307-6.613 10.68v10h8v-10c0-1.535 2.266-3.354 3.62-4.44.324-.26.62-.499.876-.716.465-.395.92-.773 1.368-1.145 1.302-1.082 2.647-2.2 4.042-3.561C138.995 115.27 144 103.476 144 90.923c0-12.552-5.005-24.348-14.094-33.215zM152 88v8h19.91v-8H152zM40 88H20.09v8H40v-8zm60-72h-8v20h8V16z"/></svg></span></div>It&rsquo;s nice to choose relatively unique and personalized values to avoid collisions in the public Eclipse Hono sandbox</div></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#aaa;font-style:italic># The Hono tenant to be created</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>TENANT</span>=demo
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># The identifier of the device on the tenant</span>
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># Note! It&#39;s important for the ID to follow the convention namespace:name (e.g. demo:device)</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>DEVICE_ID</span>=demo:device
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># The authentication identifier of the device</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>AUTH_ID</span>=demo_device
</span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic># A password for the device to authenticate with</span>
</span></span><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>PWD</span>=secret
</span></span></code></pre></div><p>Run the provisioning script and you will have your Eclipse Hono tenant and device ready to be connected:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>./hono_provisioning.sh
</span></span></code></pre></div><h3 id=configure-eclipse-kanto>Configure Eclipse Kanto</h3><p>Eclipse Kanto uses the <code>/etc/suite-connector/config.json</code> to acquire all the remote communication, identification and
authentication data to establish the remote connection. Update it with the following:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/suite-connector/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/suite-connector/suite-connector.log&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://hono.eclipseprojects.io:8883&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;demo&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;demo:device&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;demo_device&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class="alert alert-light alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-tip{fill:#a19f20}</style></defs><title>Tip</title><path class="cls-alert-tip" d="M53.905 126.999l5.631 5.684-14.292 14.159-5.63-5.684L53.904 127zm98.481-86.3-5.63-5.683-14.414 14.28 5.63 5.683 14.414-14.28zm-19.922 91.984 14.292 14.159 5.63-5.684L138.096 127l-5.631 5.684zM59.658 49.295 45.244 35.016l-5.63 5.684 14.414 14.279 5.63-5.684zM72 160h48v-8H72v8zm4 16h40v-8H76v8zm53.906-118.291C120.844 48.868 108.803 44 96 44s-24.844 4.869-33.906 13.709C53.005 66.575 48 78.37 48 90.922c0 12.553 5.005 24.348 14.094 33.215 1.395 1.36 2.74 2.479 4.042 3.56.448.373.903.751 1.367 1.146.257.217.553.456.877.716 1.354 1.086 3.62 2.905 3.62 4.44v10h8v-10c0-5.373-4.302-8.825-6.613-10.68-.26-.209-.5-.4-.706-.575-.487-.413-.963-.809-1.431-1.199-1.236-1.026-2.402-1.996-3.57-3.135C60.148 111.063 56 101.301 56 90.923s4.148-20.14 11.68-27.488C75.24 56.061 85.298 52 96 52c10.704.0 20.76 4.061 28.32 11.435 7.532 7.348 11.68 17.11 11.68 27.488s-4.148 20.14-11.68 27.488c-1.168 1.139-2.334 2.109-3.57 3.135-.468.39-.944.786-1.431 1.2-.206.174-.445.365-.706.574-2.31 1.855-6.613 5.307-6.613 10.68v10h8v-10c0-1.535 2.266-3.354 3.62-4.44.324-.26.62-.499.876-.716.465-.395.92-.773 1.368-1.145 1.302-1.082 2.647-2.2 4.042-3.561C138.995 115.27 144 103.476 144 90.923c0-12.552-5.005-24.348-14.094-33.215zM152 88v8h19.91v-8H152zM40 88H20.09v8H40v-8zm60-72h-8v20h8V16z"/></svg></span></div>Instead of Eclipse Hono Sandbox a custom Eclipse Hono instance can be used by replacing the address value in accordance
with the Suite Connector configuration reference</div><p>Restart the Suite Connector service for the changes to take effect:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl restart suite-connector.service
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>To explore remote containerized applications management, we
will use the two Python scripts to run, monitor and remove a simple <a href=https://www.influxdata.com/ target=_blank>InfluxDB</a> container
using its public container image available at <a href=https://hub.docker.com/_/influxdb target=_blank>Docker Hub</a>.</p><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and will print all
received events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo
</span></span></code></pre></div><p>In another terminal, we are ready to spin up an InfluxDB container instance at the edge via executing the second application
that requires the command to execute (<code>run</code>), the Eclipse Hono tenant (<code>-t</code>), device identifier (<code>-d</code>) and
the full container image reference to use (<code>--img</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands.py run -t demo -d demo:device --img docker.io/library/influxdb:1.8.4
</span></span></code></pre></div><p>After the script exits with success, you can check out the new container running on your edge device via
executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo kanto-cm list
</span></span></code></pre></div><p>Looking at the terminal where the monitoring application is running, you will be able to see all the events triggered by
the operation.</p><p>To remove the newly created container, execute the same application script
only this time with the <code>rm</code> command and the identifier of the container to remove (<code>--id</code>), e.g.:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands.py rm -t demo -d demo:device --id e6f7fbea-0e95-433c-acc7-16ef21b9c033
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-dd948255948d6b59b32c471abcb62997>2 - Concepts</h1><div class=lead>Explore key essentials of Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-580d985510487e15c6eab66a98607676>2.1 - AWS Connector</h1><div class=lead>Empower the edge device with a remote connectivity.</div><p>AWS Connector enables the remote connectivity to an AWS IoT cloud ecosystem. It provides the following use cases:</p><ul><li><strong>Enriched remote connection</strong><ul><li><strong>Optimized</strong> - to pass the messages via a single underlying connection</li><li><strong>Secured</strong> - to protect the edge identity and data via TLS with basic and certificate-based authentication</li><li><strong>Maintained</strong> - with a reconnect exponential backoff algorithm</li><li><strong>Synchronized</strong> - on a connectivity recovering via a message buffering</li></ul></li><li><strong>Application protection</strong> - AWS Connector is the only one component with a remote connectivity i.e. all local applications are protected from exposure to the public network</li><li><strong>Offline mode</strong> - local applications don&rsquo;t need to care about the status of the remote connection, they can stay fully operable in offline mode</li><li><strong>Device Shadow</strong> - messages sent to the <a href=https://eclipse.dev/ditto/protocol-twinlive.html#twin>Twin Channel</a> are converted to messages more suitable for <a href=https://docs.aws.amazon.com/iot/latest/developerguide/device-shadow-document.html>AWS Device Shadow</a> service and sent to it.</li></ul><p><img src=/kanto/images/docs/concepts/aws-connector.png alt="AWS Connector"></p><h3 id=how-it-works>How it works</h3><p>The AWS Connector plays a key role in two communication aspects - local and remote.</p><h4 id=cloud-connectivity>Cloud connectivity</h4><p>To initiate its connection, the edge has to be manually or automatically provisioned. The result of this operation is different parameters and identifiers. Currently, AWS Connector supports MQTT transport as a connection-oriented and requiring less resources in comparison to AMQP. Once established, the connection is used as a channel to pass the edge telemetry and event messages. The IoT cloud can control the edge via commands and responses.</p><p>In case of a connection interruption, the AWS Connector will switch to offline mode. The message buffer mechanism will be activated to ensure that there is no data loss. Reconnect exponential backoff algorithm will be started to guarantee that no excessive load will be generated to the IoT cloud. All local applications are not affected and can continue to operate as normal. Once the remote connection is restored, all buffered messages will be sent and the edge will be fully restored to online mode.</p><h4 id=local-communication>Local communication</h4><p>Ensuring that local applications are loosely coupled, Eclipse Hono™ MQTT definitions are in use. The event-driven local messages exchange is done via a MQTT message broker - Eclipse Mosquitto™. The AWS Connector takes the responsibility to forward these messages to the IoT cloud and vice versa.</p><p>Monitoring of the remote connection status is also enabled locally as well, along with details like the last known state of the connection, timestamp and a predefined connect/disconnect reason.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9f620eb6647cb9710020b1bfec6d463f>2.2 - Suite connector</h1><div class=lead>Empower the edge device with a remote connectivity.</div><p>Suite connector enables the remote connectivity to an IoT cloud ecosystem of choice, powered by Eclipse Hono™ (e.g. <a href=https://www.eclipse.org/packages/packages/cloud2edge target=_blank>Eclipse Cloud2Edge</a> and Bosch IoT Suite). It provides the following use cases:</p><ul><li><strong>Enriched remote connection</strong><ul><li><strong>Optimized</strong> - to pass the messages via a single underlying connection</li><li><strong>Secured</strong> - to protect the edge identity and data via TLS with basic and certificate-based authentication</li><li><strong>Maintained</strong> - with a reconnect exponential backoff algorithm</li><li><strong>Synchronized</strong> - on a connectivity recovering via a message buffering</li></ul></li><li><strong>Application protection</strong> - suite connector is the only one component with a remote connectivity i.e. all local applications are protected from exposure to the public network</li><li><strong>Offline mode</strong> - local applications don&rsquo;t need to care about the status of the remote connection, they can stay fully operable in offline mode</li></ul><p><img src=/kanto/images/docs/concepts/suite-connector.png alt="Suite connector"></p><h3 id=how-it-works>How it works</h3><p>The suite connector plays a key role in two communication aspects - local and remote.</p><h4 id=cloud-connectivity>Cloud connectivity</h4><p>To initiate its connection, the edge has to be manually or automatically provisioned. The result of this operation is different parameters and identifiers. Currently, suite connector supports MQTT transport as a connection-oriented and requiring less resources in comparison to AMQP. Once established, the connection is used as a channel to pass the edge telemetry and event messages. The IoT cloud can control the edge via commands and responses.</p><p>In case of a connection interruption, the suite connector will switch to offline mode. The message buffer mechanism will be activated to ensure that there is no data loss. Reconnect exponential backoff algorithm will be started to guarantee that no excessive load will be generated to the IoT cloud. All local applications are not affected and can continue to operate as normal. Once the remote connection is restored, all buffered messages will be sent and the edge will be fully restored to online mode.</p><h4 id=local-communication>Local communication</h4><p>Ensuring that local applications are loosely coupled, Eclipse Hono™ MQTT definitions are in use. The event-driven local messages exchange is done via a MQTT message broker - Eclipse Mosquitto™. The suite connector takes the responsibility to forward these messages to the IoT cloud and vice versa.</p><p>The provisioning information used to establish the remote communication is available locally both on request via a predefined message and on update populated via an announcement. Applications that would like to extend the edge functionality can further use it in Eclipse Hono™ and Eclipse Ditto™ definitions.</p><p>Monitoring of the remote connection status is also enabled locally as well, along with details like the last known state of the connection, timestamp and a predefined connect/disconnect reason.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4a072b39c39e5bf4fcdc72d3ddbf89da>2.3 - Container management</h1><div class=lead>Empower the edge device for containerized applications.</div><p>Container management enables a lightweight standard runtime which is capable to run containerized applications with all advantages of the technology: isolation, portability and efficiency. The deployment and management are available both locally and remotely via an IoT cloud ecosystem of choice. The following use cases are provided:</p><ul><li><strong>Standardized approach</strong> - with OCI (Open Container Initiative) compliant container images and runtime</li><li><strong>Lightweight runtime</strong> - with a default integration of <a href=https://containerd.io/ target=_blank><code>containerd</code></a> and a possibility for another container technology of choice like podman, LXC and more</li><li><strong>Isolation</strong> - with a default isolation from other containerized applications and the host system</li><li><strong>Portability</strong> - with an option to run one and the same containerized application on different platforms</li><li><strong>Pluggable architecture</strong> - with extension points on different levels</li></ul><p><img src=/kanto/images/docs/concepts/container-management.png alt="Container management"></p><h3 id=how-it-works>How it works</h3><p>A container image packs the application executable along with all its needed dependencies into a single artifact that can be built by a tooling of choice.
The built image is made available for usage by being pushed to a container image registry where the runtime can refer it to.</p><p>To create a new container instance, the container management uses such an image reference and a configuration for it to produce a fully functional container.
The container lifecycle (start, update, stop, remove) and environment (memory constraints, restart policy, etc.) are also handled by the runtime.
The container management continuously ensures the applications availability via state awareness and restart policies, provides monitoring via flexible logging and fine-grained resources management.
All of that is achieved on top of an underlying runtime of choice (<a href=https://containerd.io/ target=_blank><code>containerd</code></a> by default) that takes care of the low-level isolation mechanisms.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-3f32cf3487f749ba1c798b8737d8952a>2.4 - Update manager</h1><div class=lead>Empower the edge device for OTA updates.</div><p>Update manager enables a lightweight core component which is capable to easily perform complex OTA update scenarios on a target device. The following capabilities are provided:</p><ul><li><strong>Lightweight</strong> - consists of a single core component which orchestrates the update process</li><li><strong>Flexible deployment</strong> - supports different deployment models - natively, as an executable or container</li><li><strong>Unified API</strong> - all domain agents utilize a unified Update Agent API for interacting with the Update Manager</li><li><strong>MQTT Connectivity</strong> - the connectivity and communication between the Update Manager and domain agent is MQTT-based</li><li><strong>Multi-domain integration</strong> - easily integrates, scales and performs complex update operations across multiple domains</li><li><strong>Default update agents</strong> - integrates with the Kanto provided out-of-the box domain update agent implementation for deployment of container into the Kanto container management</li><li><strong>Pluggable architecture</strong> - provides an extensible model for plug-in custom orchestration logic</li><li><strong>Asynchronous updates</strong> - asynchronous and independent update process across the different domains</li><li><strong>Multi-staged updates</strong> - the update process is organized into different stages</li><li><strong>Configurable</strong> - offers a variety of configuration options for connectivity, supported domains, message reporting and etc</li></ul><p><img src=/kanto/images/docs/concepts/update-manager.png alt="Update manager"></p><h3 id=how-it-works>How it works</h3><p>The update process is initiated by sending the desired state specification as an MQTT message towards the device, which is handled by the Update Manager component.</p><p>The desired state specification in the scope of the Update Manager is a JSON-based document, which consists of multiple component definitions per domain, representing the desired state to be applied on the target device.
A component in the same context means a single, atomic and updatable unit, for example, OCI-compliant container, software application or firmware image.</p><p>Each domain agent is a separate and independent software component, which implements the Update Agent API for interaction with the Update Manager and manages the update logic for concrete domain. For example - container management.</p><p>The Update Manager, operating as a coordinator, is responsible for processing the desired state specification, distributing the split specification across the different domain agents, orchestrating the update process via MQTT-based commands, collecting and consolidating the feedback responses from the domain update agents, and reporting the final result of the update campaign to the backend.</p><p>As extra features and capabilities, the Update Manager enables reboot of the host after the update process is completed and reporting of the current state of the system to the backend.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-bb0595debb658b54720b5c3af4a40fc2>2.5 - Software update</h1><div class=lead>Empower the edge device to handle diverse software updates.</div><p>Software update enables the deployment and management of various software artifacts, both locally and remotely via an IoT cloud ecosystem of choice. It provides the following use cases:</p><ul><li><strong>Robust download</strong> - with a retry and resume mechanism when the network connection is interrupted</li><li><strong>Artifact validation</strong> - with an integrity validation of every downloaded artifact</li><li><strong>Universal installation</strong> - with customizable install scripts to handle any kind of software</li><li><strong>Operation monitoring</strong> - with a status reporting of the download and install operations</li></ul><p><img src=/kanto/images/docs/concepts/software-update.png alt="Software update"></p><h3 id=how-it-works>How it works</h3><p>When the install operation is received at the edge, the download process is initiated. Retrieving the artifacts will continue until they are stored at the edge or their size threshold is reached. If successful, the artifacts are validated for integrity and further processed by the configured script. It is responsible to apply the new software and finish the operation. A status report is announced on each step of the process enabling its transparent monitoring.</p><p>On start up, if there have been any ongoing operations, they will be automatically resumed as the operation state is persistently stored.</p><h3 id=whats-next>What&rsquo;s next</h3><p><a href=/kanto/docs/how-to-guides/update-software/>How to update software</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-9ccb2b2c18eb4be9efb067f044e4cd18>2.6 - File upload</h1><div class=lead>Empower the edge device to upload files to various storage providers.</div><p>File upload enables sending of files to a backend storage of choice. It can be used both locally and remotely via a desired IoT cloud ecosystem. The following use cases are provided:</p><ul><li><strong>Storage diversity</strong> - with ready to use integrations with Azure Blob Storage, Amazon S3 and standard HTTP upload</li><li><strong>Automatic uploads</strong> - with periodically triggered uploads at a specified interval in a given time frame</li><li><strong>Data integrity</strong> - with an option to calculate and send the integrity check required information</li><li><strong>Operation monitoring</strong> - with a status reporting of the upload operation</li></ul><p><img src=/kanto/images/docs/concepts/file-upload.png alt="File upload"></p><h3 id=how-it-works>How it works</h3><p>It&rsquo;s not always possible to inline all the data into exchanged messages. For example, large log files or large diagnostic files cannot be sent as a telemetry message. In such scenarios, file upload can assist enabling massive amount of data to be stored to the backend storage.</p><p>There are different triggers which can initiate the upload operation: periodic or explicit. Once initiated, the request will be sent to the IoT cloud for confirmation or cancellation transferred back to the edge. If starting is confirmed, the files
to upload will be selected according to the specified configuration, their integrity check information can be calculated and the transfer of the binary content will begin. A status report is announced on each step of the upload process
enabling its transparent monitoring.</p><h3 id=whats-next>What&rsquo;s next</h3><p><a href=/kanto/docs/how-to-guides/upload-files/>How to upload files</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-7d8343cd9d2de79b39a26d7fb6d58108>3 - How-to guides</h1><div class=lead>Explore the functionalities of Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-3295c64fd45a7278dec1f9ac3fb381aa>3.1 - Update software</h1><div class=lead>Install a Debian package on your edge device.</div><p>By following the steps below you will install a<a href=https://www.gnu.org/software/hello/ target=_blank><code>hello</code></a>
Debian package via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A couple of simple Eclipse Hono northbound business applications written in Python are provided to explore
the capabilities for remotely installing and monitoring.
On the edge side, a basic
<a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/install_hello.sh target=_blank><code>install_hello.sh</code></a>
script will be downloaded and executed.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that your edge device is capable to execute the steps in this guide, you need:</p><ul><li><p>Debian-based linux distribution and the <code>apt</code> command line tool</p></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto, follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_su.py target=_blank>software update application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a>
guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_su.py
</span></span></code></pre></div></li><li><p>Executing <code>hello</code> in the terminal will return that the command is not found</p></li></ul><h3 id=install-debian-package>Install Debian package</h3><p>To explore the software management, we will use two Python scripts to install and monitor the <code>hello</code> Debian package.
The location where the Python applications will run does not have to be your edge device as they communicate remotely
with Eclipse Hono only.</p><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and will print all
received events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo
</span></span></code></pre></div><p>In another terminal, we are ready to spin up a <code>hello</code> Debian package at the edge via executing the second application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_su.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the new package is installed on your edge device via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>hello
</span></span></code></pre></div><p>The command now displays: <code>Hello, world!</code></p><h3 id=clean-up>Clean up</h3><p>The installed <code>hello</code> Debian package can be removed via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt remove hello
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-ea8723f5a1c117f2bc76a16b024f0ff2>3.2 - Upload files</h1><div class=lead>Upload a log file from your edge device.</div><p>By following the steps below you will upload an example log file to your HTTP file server
via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A simple Eclipse Hono northbound business application written in Python is
provided to explore the capabilities for remotely uploading and monitoring.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://github.com/sebageek/servefile/ target=_blank><code>servefile</code></a> installed</p><p>This is a small Python HTTP server used in the example to serve the uploads.
It does not have to be running on your edge device but it has to be accessible from there.
You can install it by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install servefile
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_fu.py target=_blank>file upload application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_fu.py
</span></span></code></pre></div></li></ul><h3 id=upload-log-file>Upload log file</h3><p>By default, all files in <code>/var/tmp/file-upload/</code> directory can be uploaded.
For example, grab the suite connector log file and place it in the directory via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir -p /var/tmp/file-upload/ &amp;&amp; sudo cp /var/log/suite-connector/suite-connector.log /var/tmp/file-upload/
</span></span></code></pre></div><p>Choose a directory where the log file will be uploaded, open a new terminal there and run <code>servefile</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -u .
</span></span></code></pre></div><p>To explore the file upload, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the log file upload from the edge via executing the application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fu.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the log file is on your HTTP file server by listing the content of <code>servefile</code> working directory.</p><h3 id=clean-up>Clean up</h3><p>Stop <code>servefile</code> and clean up its working directory.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-170e578a7b1df9ad1c0c8ef0bb738ad1>3.3 - Back up and restore files</h1><div class=lead>Back up and restore a file from and to your edge device.</div><p>By following the steps below you will back up a simple text file to an HTTP file server
and then restore it back via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A simple Eclipse Hono northbound business application written in Python is
provided to explore the capabilities for remotely backing up and restoring files.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://github.com/sebageek/servefile/ target=_blank><code>servefile</code></a> installed</p><p>This is a small Python HTTP server used in the example to serve the uploads and downloads.
It does not have to be running on your edge device, but it has to be accessible from there.
You can install it by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install servefile
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_fb.py target=_blank>file backup and restore application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_fb.py
</span></span></code></pre></div></li></ul><h3 id=back-up>Back up</h3><p>By default, all directories in <code>/var/tmp/file-backup/</code> or the directory itself can be backed up.
For this example, create a file <code>data.txt</code> which will be later backed up:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo mkdir -p /var/tmp/file-backup &amp;&amp; sudo <span style=color:#0aa>echo</span> <span style=color:#a50>&#34;This is the first line in the file!&#34;</span> &gt;&gt; /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>You can verify that the file was successfully created by executing the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>This should produce <code>This is the first line in the file!</code> as an output.</p><p>Choose a directory where the text file will be uploaded, open a new terminal there and run <code>servefile</code>
with the flag <code>-u</code> to enable a file upload:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -u .
</span></span></code></pre></div><p>To explore the file backup, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the text file backup from the edge via executing the application that requires the command
to execute (<code>backup</code>), Eclipse Hono tenant (<code>-t</code>), the device identifier (<code>-d</code>) and the host where the backup will
be uploaded to:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fb.py backup -t demo -d demo:device -h localhost
</span></span></code></pre></div><p>You can check out that the backup file <code>data.zip</code> is on your HTTP file server by
listing the content of the <code>servefile</code> working directory.</p><h3 id=restore>Restore</h3><p>To explore the restore capabilities you will first modify the <code>data.txt</code> file, and then you will restore it to
the version before the changes by using the backup, that was created earlier.</p><p>You can modify the <code>data.txt</code> file with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo <span style=color:#0aa>echo</span> <span style=color:#a50>&#34;This is the second line in the file!&#34;</span> &gt;&gt; /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>You can verify that the file was successfully updated by executing the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>This output should be:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>This is the first line in the file!
</span></span><span style=display:flex><span>This is the second line in the file!
</span></span></code></pre></div><p>Navigate to the terminal where <code>servefile</code> was started and terminate it.
Start it again with the flag <code>-l</code> to enable a file download:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -l .
</span></span></code></pre></div><p>To explore the file restore, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the text file restore from the edge via executing the application that requires the command
to execute (<code>restore</code>), Eclipse Hono tenant (<code>-t</code>), the device identifier (<code>-d</code>) and the host where the backup file
will be downloaded from:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fb.py restore -t demo -d demo:device -h localhost
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the original file is restored by executing the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>This should produce <code>This is the first line in the file!</code> as an output.</p><h3 id=clean-up>Clean up</h3><p>Stop <code>servefile</code> and clean up its working directory.
Remove the <code>data.txt</code> file from the <code>/var/tmp/file-backup</code> directory.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-9ebac16b59e8e67bb0ee2b0c90c399b0>3.4 - Create and update the containers `Desired State`</h1><div class=lead>Create and update containers via <code>Desired State</code> using the <code>update-manage</code></div><p>By following the steps below you will publish a simple <code>Desired State</code> specification via a publicly available Eclipse Hono sandbox and then the specification will be handled by the Eclipse Kanto Update Manager, which will trigger an OTA update on
the edge device.</p><p>A simple monitoring application will track the progress and the status of the update process.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p>Debian-based linux distribution and the <code>apt</code> command line tool</p></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto, follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_um.py target=_blank>update manager application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a>
guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_um.py
</span></span></code></pre></div></li><li><p>Enable the <code>containers update agent</code> service of the <code>Container Management</code> by adding the <code>"update_agent": {"enable": true}</code> property to the <code>container-management</code> service configuration (by default located at <code>/etc/container-management/config.json</code>)
and restart the service:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>systemctl restart container-management
</span></span></code></pre></div></li></ul><h3 id=publish-the-desired-state-specification>Publish the <code>Desired State</code> specification</h3><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and an optional filter parameter (<code>-f</code>). It will print all
received feedback events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo -f demo/device/things/live/messages/feedback
</span></span></code></pre></div><p>The starting point of the OTA update process is to publish the example <code>Desired State</code> specification:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_um.py -t demo -d demo:device -o apply
</span></span></code></pre></div><p>The <code>Desired State</code> specification in this case consists of single domain section definition for the containers domain and a three container components - <code>influxdb</code>, <code>hello-world</code> and <code>alpine</code> image.</p><h3 id=apply-desired-state-specification>Apply <code>Desired State</code> specification</h3><p>The Update Manager receives the published <code>Desired State</code> to the local Mosquitto broker, splits the specification (in this case into single domain) and then
distributes the processed specification to the domain agents which initiates the actual update process logic on the domain agents side.</p><p>The update process is organized into multiple phases, which are triggered by sending specific <code>Desired State</code> commands (<code>DOWNLOAD/UPDATE/ACTIVATE</code>).</p><p>In the example scenario, the three images for the three container components will be pulled (if not available in the cache locally), created as containers during the <code>UPDATING</code> phase and
started in the <code>ACTIVATING</code> phase.</p><h3 id=monitor-ota-update-progress>Monitor OTA update progress</h3><p>During the OTA update, the progress can be tracked in the monitoring application fot the <code>Desired State</code> feedback messages, started in the prerequisite section above.</p><p>The Update Manager reports at a time interval of a second the status of the active update process. For example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>   <span style=color:#1e90ff;font-weight:700>&#34;activityId&#34;</span>:<span style=color:#a50>&#34;e5c858cc-2057-41b0-bd5f-83aee0aad22e&#34;</span>,
</span></span><span style=display:flex><span>   <span style=color:#1e90ff;font-weight:700>&#34;timestamp&#34;</span>:<span style=color:#099>1693201088401</span>,
</span></span><span style=display:flex><span>   <span style=color:#1e90ff;font-weight:700>&#34;desiredStateFeedback&#34;</span>:{
</span></span><span style=display:flex><span>      <span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#a50>&#34;RUNNING&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#1e90ff;font-weight:700>&#34;actions&#34;</span>:[
</span></span><span style=display:flex><span>         {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;component&#34;</span>:{
</span></span><span style=display:flex><span>               <span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;containers:alpine&#34;</span>,
</span></span><span style=display:flex><span>               <span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;latest&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#a50>&#34;UPDATE_SUCCESS&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;message&#34;</span>:<span style=color:#a50>&#34;New container instance is started.&#34;</span>
</span></span><span style=display:flex><span>         },
</span></span><span style=display:flex><span>         {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;component&#34;</span>:{
</span></span><span style=display:flex><span>               <span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;containers:hello-world&#34;</span>,
</span></span><span style=display:flex><span>               <span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;latest&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#a50>&#34;UPDATE_SUCCESS&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;message&#34;</span>:<span style=color:#a50>&#34;New container instance is started.&#34;</span>
</span></span><span style=display:flex><span>         },
</span></span><span style=display:flex><span>         {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;component&#34;</span>:{
</span></span><span style=display:flex><span>               <span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;containers:influxdb&#34;</span>,
</span></span><span style=display:flex><span>               <span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;2.7.1&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#a50>&#34;UPDATING&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;message&#34;</span>:<span style=color:#a50>&#34;New container created.&#34;</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=list-containers>List containers</h3><p>After the update process is completed, list the installed containers by executing the command <code>kanto-cm list</code> to verify if the <code>Desired State</code> is applied correctly.</p><p>The output of the command should display the info about the three containers, described in the <code>Desired State</code> specification. The <code>influxdb</code> is expected to be in <code>RUNNING</code> state and
the other containers in status <code>EXITED</code>. For example :</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ID                                    |Name         |Image                               |Status   |Finished At |Exit Code
</span></span><span style=display:flex><span>|-------------------------------------|-------------|------------------------------------|----------------------|---------
</span></span><span style=display:flex><span>7fe6b689-eb76-476d-a730-c2f422d6e8ea  |influxdb     |docker.io/library/influxdb:1.8.4    |Running  |            |0
</span></span><span style=display:flex><span>c36523d7-8d17-4255-ae0c-37f11003f658  |hello-world  |docker.io/library/hello-world:latest|Exited   |            |0
</span></span><span style=display:flex><span>9b99978b-2593-4736-bb52-7a07be4a7ed1  |alpine       |docker.io/library/alpine:latest     |Exited   |            |0
</span></span></code></pre></div><h3 id=update-desired-state-specification>Update <code>Desired State</code> specification</h3><p>To update the existing <code>Desired State</code> run the command below. The update changes affect two containers - <code>alpine</code> and <code>influxdb</code>. Being not present in the updated <code>Desired State</code> specification, the <code>alpine</code> container will be removed from the system. The <code>influxdb</code> will be updated to version 1.8.5. The last container - <code>hello-world</code> is not affected and any events will be not reported from the container update agent for this particular container.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_um.py -t demo -d demo:device -o update
</span></span></code></pre></div><h3 id=list-updated-containers>List updated containers</h3><p>After the update process of the existing <code>Desired State</code> is completed, list again the available containers to the verify the <code>Desired State</code> is updated correctly.</p><p>The output of the command should display the info about the two containers, described in the <code>Desired State</code> specification. The <code>influxdb</code> is expected to be updated with the version 1.8.5 and in <code>RUNNING</code> state and <code>hello-world</code> container to be status <code>EXITED</code> with version unchanged. The <code>alpine</code> container must be removed and not displayed.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>ID                                    |Name         |Image                               |Status   |Finished At |Exit Code
</span></span><span style=display:flex><span>|-------------------------------------|-------------|------------------------------------|----------------------|---------
</span></span><span style=display:flex><span>7fe6b689-eb76-476d-a730-c2f422d6e8ea  |influxdb     |docker.io/library/influxdb:1.8.5    |Running  |            |0
</span></span><span style=display:flex><span>c36523d7-8d17-4255-ae0c-37f11003f658  |hello-world  |docker.io/library/hello-world:latest|Exited   |            |0
</span></span></code></pre></div><h3 id=remove-all-containers>Remove all containers</h3><p>To remove all containers, publish an empty <code>Desired State</code> specification (with empty <code>components</code> section):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_um.py -t demo -d demo:device -o clean
</span></span></code></pre></div><p>As a final step, execute the command <code>kanto-cm list</code> to verify that the containers are actually removed from the Kanto container management.
The expected output is <code>No found containers.</code>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6fde9501abfa40949911a42750ff0751>3.5 - Monitor system metrics</h1><div class=lead>Monitor system metrics from your edge device.</div><p>By following the steps below you will be able to monitor the system metrics from your edge device
via a publicly available Eclipse Hono sandbox using Eclipse Kanto. A simple Eclipse Hono
northbound business application written in Python is provided to explore the capabilities
for remotely monitoring the CPU and memory utilization.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://plotly.com/ target=_blank><code>Plotly</code></a> and
<a href=https://plotly.com/dash/ target=_blank><code>Dash</code></a> installed</p><p><a href=https://plotly.com/ target=_blank><code>Plotly</code></a> is an open-source plotting library and
<a href=https://plotly.com/dash/ target=_blank><code>Dash</code></a> is a framework for building data application in Python.
They are used in this example to run a simple HTTP server and visualize the incoming system metrics data
in real time, and they do not have to be running on your edge device.
You can install them by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install plotly dash
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_sm.py target=_blank>system metrics application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_sm.py
</span></span></code></pre></div></li></ul><h3 id=monitor-system-metrics>Monitor system metrics</h3><p>To explore the system metrics, we will use a Python script to request and monitor the
CPU and memory utilization. The location where the Python application will run does
not have to be your edge device as it communicates remotely with Eclipse Hono only.</p><p>Now we are ready to request the system metrics from the edge via executing the application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_sm.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the CPU and memory utilization metrics are properly received and displayed
by checking out the application dashboard (by default - <a href=http://127.0.0.1:8050 target=_blank>http://127.0.0.1:8050</a>).</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ebe8e48efb87068b8a27ab00b3a217ba>3.6 - Verify signed container images</h1><div class=lead>Verify that container image is signed when creating a container from it in Kanto Container Management.</div><p>By following the steps below, you will sign a container image and push it to a local registry using a<a href=https://github.com/notaryproject/notation target=_blank><code>notation</code></a>. Then a notation trust policy and the Kanto Container Management service will be configured in a way that running containers from the signed image via kanto-cm CLI will be successful, while running containers from unsigned images will fail.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that your edge device is capable to execute the steps in this guide, you need:</p><ul><li>If you don&rsquo;t have an installed and running Eclipse Kanto, follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></li><li>Installed <a href=https://notaryproject.dev/docs/user-guides/installation/cli/ target=_blank>Notation CLI</a></li><li>Installed and running <a href=https://www.docker.com/products/docker-desktop/ target=_blank>Docker</a></li></ul><h3 id=create-an-image-and-push-it-to-a-local-registry-using-docker-and-than-sign-it-with-notation>Create an image and push it to a local registry using docker and than sign it with notation</h3><p>Create and run a local container registry:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo kanto-cm create --ports 5000:5000 --e <span style=color:#a00>REGISTRY_STORAGE_DELETE_ENABLED</span>=<span style=color:#0aa>true</span> --name registry docker.io/library/registry:latest
</span></span><span style=display:flex><span>sudo kanto-cm start -n registry
</span></span></code></pre></div><p>Build a dummy hello world image and push it to the registry:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat <span style=color:#a50>&lt;&lt;EOF | sudo docker build -t localhost:5000/dummy-hello:signed -
</span></span></span><span style=display:flex><span><span style=color:#a50>FROM busybox:latest
</span></span></span><span style=display:flex><span><span style=color:#a50>CMD [ &#34;echo&#34;, &#34;Hello World&#34; ]
</span></span></span><span style=display:flex><span><span style=color:#a50>EOF</span>
</span></span><span style=display:flex><span>sudo docker push localhost:5000/dummy-hello:signed
</span></span></code></pre></div><p><div class="alert alert-light alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-tip{fill:#a19f20}</style></defs><title>Tip</title><path class="cls-alert-tip" d="M53.905 126.999l5.631 5.684-14.292 14.159-5.63-5.684L53.904 127zm98.481-86.3-5.63-5.683-14.414 14.28 5.63 5.683 14.414-14.28zm-19.922 91.984 14.292 14.159 5.63-5.684L138.096 127l-5.631 5.684zM59.658 49.295 45.244 35.016l-5.63 5.684 14.414 14.279 5.63-5.684zM72 160h48v-8H72v8zm4 16h40v-8H76v8zm53.906-118.291C120.844 48.868 108.803 44 96 44s-24.844 4.869-33.906 13.709C53.005 66.575 48 78.37 48 90.922c0 12.553 5.005 24.348 14.094 33.215 1.395 1.36 2.74 2.479 4.042 3.56.448.373.903.751 1.367 1.146.257.217.553.456.877.716 1.354 1.086 3.62 2.905 3.62 4.44v10h8v-10c0-5.373-4.302-8.825-6.613-10.68-.26-.209-.5-.4-.706-.575-.487-.413-.963-.809-1.431-1.199-1.236-1.026-2.402-1.996-3.57-3.135C60.148 111.063 56 101.301 56 90.923s4.148-20.14 11.68-27.488C75.24 56.061 85.298 52 96 52c10.704.0 20.76 4.061 28.32 11.435 7.532 7.348 11.68 17.11 11.68 27.488s-4.148 20.14-11.68 27.488c-1.168 1.139-2.334 2.109-3.57 3.135-.468.39-.944.786-1.431 1.2-.206.174-.445.365-.706.574-2.31 1.855-6.613 5.307-6.613 10.68v10h8v-10c0-1.535 2.266-3.354 3.62-4.44.324-.26.62-.499.876-.716.465-.395.92-.773 1.368-1.145 1.302-1.082 2.647-2.2 4.042-3.561C138.995 115.27 144 103.476 144 90.923c0-12.552-5.005-24.348-14.094-33.215zM152 88v8h19.91v-8H152zM40 88H20.09v8H40v-8zm60-72h-8v20h8V16z"/></svg></span></div>When signing and verifying container images it is recommended to use the image digest instead of a tag as the digest is immutable.</div>Get the image digest and assign it to an environment variable to be used the next steps of the guide:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>IMAGE</span>=<span style=color:#00a>$(</span>sudo docker inspect --format=<span style=color:#a50>&#39;{{index .RepoDigests 0}}&#39;</span> localhost:5000/dummy-hello:signed<span style=color:#00a>)</span>
</span></span><span style=display:flex><span><span style=color:#0aa>echo</span> <span style=color:#a00>$IMAGE</span>
</span></span></code></pre></div><p>Generate a key-pair with notation and add it as the default signing key:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>notation cert generate-test --default <span style=color:#a50>&#34;kanto&#34;</span>
</span></span></code></pre></div><p>Sign the image and store the signature in the registry:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>notation sign <span style=color:#a00>$IMAGE</span>
</span></span></code></pre></div><h3 id=configure-notation-truspolicy-and-container-management-verifier>Configure notation truspolicy and container management verifier</h3><p>Get the notation config directory and assign it to an environment variable to be used in the next steps of the guide:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#0aa>export</span> <span style=color:#a00>NOTATION_CONFIG</span>=<span style=color:#a50>${</span><span style=color:#a00>XDG_CONFIG_HOME</span><span style=color:#00a>:-</span><span style=color:#a00>$HOME</span>/.config<span style=color:#a50>}</span>/notation
</span></span><span style=display:flex><span><span style=color:#0aa>echo</span> <span style=color:#a00>$NOTATION_CONFIG</span>
</span></span></code></pre></div><p>Create a simple <a href=https://github.com/notaryproject/specifications/blob/main/specs/trust-store-trust-policy.md#trust-policy target=_blank>notation trustpolicy</a> as a <code>trustpolicy.json</code> file in the notation config directory:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat <span style=color:#a50>&lt;&lt;EOF | tee $NOTATION_CONFIG/trustpolicy.json
</span></span></span><span style=display:flex><span><span style=color:#a50>{
</span></span></span><span style=display:flex><span><span style=color:#a50>  &#34;version&#34;: &#34;1.0&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a50>  &#34;trustPolicies&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#a50>    {
</span></span></span><span style=display:flex><span><span style=color:#a50>      &#34;name&#34;: &#34;kanto-images&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a50>      &#34;registryScopes&#34;: [ &#34;*&#34; ],
</span></span></span><span style=display:flex><span><span style=color:#a50>      &#34;signatureVerification&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#a50>        &#34;level&#34; : &#34;strict&#34;
</span></span></span><span style=display:flex><span><span style=color:#a50>      },
</span></span></span><span style=display:flex><span><span style=color:#a50>      &#34;trustStores&#34;: [ &#34;ca:kanto&#34; ],
</span></span></span><span style=display:flex><span><span style=color:#a50>      &#34;trustedIdentities&#34;: [ &#34;*&#34; ]
</span></span></span><span style=display:flex><span><span style=color:#a50>    }
</span></span></span><span style=display:flex><span><span style=color:#a50>  ]
</span></span></span><span style=display:flex><span><span style=color:#a50>}
</span></span></span><span style=display:flex><span><span style=color:#a50>EOF</span>
</span></span></code></pre></div><p>Create a backup of the initial Kanto Container Management configuration that is found in <code>/etc/container-management/config.json</code>(the backup will be restored at the end of the guide):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo cp /etc/container-management/config.json /etc/container-management/config-backup.json
</span></span></code></pre></div><p>Configure the use of notation verifier, set its config directory, mark the local registry as an insecure one, and set the image expiry time to zero seconds, so the local cache of the images used in the how-to will be deleted upon container removal:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat <span style=color:#a50>&lt;&lt;EOF | sudo tee /etc/container-management/config.json
</span></span></span><span style=display:flex><span><span style=color:#a50>{
</span></span></span><span style=display:flex><span><span style=color:#a50>  &#34;log&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#a50>    &#34;log_file&#34;: &#34;/var/log/container-management/container-management.log&#34;
</span></span></span><span style=display:flex><span><span style=color:#a50>  },
</span></span></span><span style=display:flex><span><span style=color:#a50>  &#34;containers&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#a50>    &#34;image_verifier_type&#34;: &#34;notation&#34;,
</span></span></span><span style=display:flex><span><span style=color:#a50>    &#34;image_verifier_config&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#a50>      &#34;configDir&#34;: &#34;$NOTATION_CONFIG&#34;
</span></span></span><span style=display:flex><span><span style=color:#a50>    },
</span></span></span><span style=display:flex><span><span style=color:#a50>    &#34;insecure_registries&#34;: [ &#34;localhost:5000&#34; ],
</span></span></span><span style=display:flex><span><span style=color:#a50>    &#34;image_expiry&#34;: &#34;0s&#34;
</span></span></span><span style=display:flex><span><span style=color:#a50>  }
</span></span></span><span style=display:flex><span><span style=color:#a50>}
</span></span></span><span style=display:flex><span><span style=color:#a50>EOF</span>
</span></span></code></pre></div><p>Restart the Container Management service for the changes to take effect:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl restart container-management.service
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>Create and run a container from the signed image. The container prints <code>Hello world</code> to the console:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo kanto-cm create --name dummy-hello --rp no --t <span style=color:#a00>$IMAGE</span>
</span></span><span style=display:flex><span>sudo kanto-cm start --name dummy-hello --a
</span></span></code></pre></div><p>Make sure that a docker hub hello-world image is not cached locally, by removing any containers with this image, and verify that creating containers from it fails, as the image is not signed, and the signature verification fails:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo kanto-cm remove -f <span style=color:#00a>$(</span>sudo kanto-cm list --quiet --filter <span style=color:#a00>image</span>=docker.io/library/hello-world:latest<span style=color:#00a>)</span>
</span></span><span style=display:flex><span>sudo kanto-cm create --name dockerhub-hello --rp no --t docker.io/library/hello-world:latest
</span></span></code></pre></div><h3 id=clean-up>Clean up</h3><p>Remove the created containers from the Kanto Container Management:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo kanto-cm remove -n dummy-hello
</span></span><span style=display:flex><span>sudo kanto-cm remove -n registry -f
</span></span></code></pre></div><p>Restore the initial Kanto Container Management configuration and restart the service:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo mv -f /etc/container-management/config-backup.json /etc/container-management/config.json
</span></span><span style=display:flex><span>sudo systemctl restart container-management.service
</span></span></code></pre></div><p>Remove the localy cached images from Docker:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo docker image rm localhost:5000/dummy-hello:signed registry:latest
</span></span></code></pre></div><p>Reset the notation configuration by removing the directory:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>rm -r <span style=color:#a00>$NOTATION_CONFIG</span>
</span></span></code></pre></div><p>Unset exported environment variables:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#0aa>unset</span> IMAGE NOTATION_CONFIG
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-1270c26a5987c83543f97ae3e9983a6f>3.7 - Offline explore edge device</h1><div class=lead>Offline receive the structure of your edge device.</div><p>By following the steps below, you will get the structure of the edge digital twins with all its features and properties using Eclipse Kanto.
A simple Eclipse Hono northbound business application written in Python is provided to display the things&rsquo; and their features&rsquo; structure.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that your edge device is capable to execute the steps in this guide, you need:</p><ul><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>Stop <code>suite-connector.service</code>. The local digital twins service is a replacement for the suite connector service, that is why either one of the services must be running.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl stop suite-connector.service
</span></span></code></pre></div></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_ldt.py target=_blank>offline explore application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_ldt.py
</span></span></code></pre></div></li></ul><h3 id=configure-local-digital-twins>Configure Local digital twins</h3><p>Open file <code>/etc/suite-connector/config.json</code>, copy <code>tenantId</code>, <code>deviceId</code>, <code>authId</code> and <code>password</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:red;background-color:#faa>...</span>
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;demo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;demo:device&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;demo_device&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:red;background-color:#faa>...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The local digital twins service uses the <code>/etc/local-digital-twins/config.json</code> to acquire all the remote communication, identification and
authentication data to establish the remote connection. Update the configuration as shown below and
replace <code>tenantId</code>, <code>deviceId</code>, <code>authId</code> and <code>password</code> with the settings that you copied in the previous step.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/local-digital-twins/local-digital-twins.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/local-digital-twins/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;thingsDb&#34;</span>: <span style=color:#a50>&#34;/var/lib/local-digital-twins/thing.db&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;demo&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;demo:device&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;demo_device&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span></code></pre></div><p>Save the configuration and start the local digital twins service using the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl start local-digital-twins.service
</span></span></code></pre></div><h3 id=receive-the-structure-of-the-edge-device>Receive the structure of the edge device</h3><p>Now we are ready to request the structure of the edge digital twins via executing the offline explore application that requires the local digital twins tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_ldt.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>On the shell there will be output of the structure of the edge digital twins with all its features and properties. Things with the following identifiers will be presented:</p><ul><li>demo:device</li><li>demo:device:edge:containers</li></ul><h3 id=clean-up>Clean up</h3><p>Stop the local digital twins service and start suite connector service by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl stop local-digital-twins.service &amp;&amp; <span style=color:#a50>\
</span></span></span><span style=display:flex><span><span style=color:#a50></span>sudo systemctl restart suite-connector.service
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-043610093194cf60e3758f9f695c73cb>4 - References</h1><div class=lead>Explore customization of Eclipse Kanto.</div></div><div class=td-content><h1 id=pg-1e43023a48407cfe64feb18a5509a0e0>4.1 - Remote connectivity configuration</h1><div class=lead>Customize the remote connectivity and automatic provisioning.</div></div><div class=td-content><h1 id=pg-4f33a938f47417e037b21a19a6c0028e>4.1.1 - AWS Connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the aws connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>topicFilter</td><td>string ​</td><td></td><td>Regex filter used to block incoming messages by their topic</td></tr><tr><td>payloadFilters</td><td>string ​</td><td></td><td>Regex filters used to exclude parts of the incoming messages payload</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td></td><td>Address of the MQTT endpoint that the connector will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>tenantId</td><td>string</td><td>default-tenant-id</td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>alpn</td><td>string[]</td><td></td><td>TLS application layer protocol negotiation options space separated for cloud access</td></tr><tr><td>caCert</td><td>string</td><td>aws.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the aws connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>logs/aws-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;tls://&lt;AWS-endpoint-address&gt;:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;AmazonRootCA1.pem&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;example-device.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;example-device.key&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/aws-connector/aws-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;topicFilter&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;payloadFilters&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;default-tenant-id&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;alpn&#34;</span> : [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;aws.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;logs/aws-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-7644324c298e25d5c07c0085882211ba>4.1.2 - Azure Connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the azure connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>tenantId</td><td>string</td><td>defaultTenant</td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>connectionString</td><td>string ​</td><td></td><td>The connection string for connectivity to Azure IoT Hub, the format is: <code>"HostName=newHostName.azure-devices.net;DeviceId=deviceId;SharedAccessKey=accessKey"</code></td></tr><tr><td>sasTokenValidity</td><td>string</td><td>1h</td><td>The validity period for the generated SAS token for device authentication. Positive integer number followed by a unit suffix, such as &lsquo;300m&rsquo;, &lsquo;1h&rsquo;, etc., time units are: m, h, d</td></tr><tr><td>idScope</td><td>string</td><td></td><td>ID scope for Azure Device Provisioning service</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>alpn</td><td>string[]</td><td></td><td>TLS application layer protocol negotiation options space separated for cloud access</td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the azure connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>logs/azure-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;connectionString&#34;</span>: <span style=color:#a50>&#34;HostName=hostName.azure-devices.net;DeviceId=deviceId;SharedAccessKey=cGFzc3AvcKQ=&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/azure-connector/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/azure-connector/azure-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;defaultTenant&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;connectionString&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;sasTokenValidity&#34;</span>: <span style=color:#a50>&#34;1h&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;idScope&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;alpn&#34;</span> : [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;logs/azure-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-acb76b8bad367952e99f3af2db1c0c2b>4.1.3 - Suite connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the suite connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the suite connector will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>username</td><td>string</td><td></td><td>MQTT username that is a part of the credentials. This parameter takes precedence over authId and tenantId</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td>generic</td><td>bool</td><td></td><td>Force use of modified topics for cloud access</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>alpn</td><td>string[]</td><td></td><td>TLS application layer protocol negotiation options space separated for cloud access</td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the suite connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/suite-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect the publicly available
<a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/suite-connector/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/suite-connector/suite-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;generic&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;alpn&#34;</span> : [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/suite-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3926d661a7ae1c567034b932f3851a4a>4.1.4 - Local digital twins configuration</h1><div class=lead>Customize the local digital twins persistency, access and synchronization.</div><h3 id=properties>Properties</h3><p>To control all aspects of the local digital twins behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>thingsDb</td><td>string</td><td>things.db</td><td>Path to the file where digital twins will be stored</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the local digital twins will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the local digital twins will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/local-digital-twins.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to enable the local digital twins and their synchronization with the publicly available <a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/local-digital-twins/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;thingsDb&#34;</span>: <span style=color:#a50>&#34;/var/lib/local-digital-twins/thing.db&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/local-digital-twins/local-digital-twins.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;thingsDb&#34;</span>: <span style=color:#a50>&#34;things.db&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/local-digital-twins.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-06af2c208a89b1647c8ccdaa4b0a08d7>4.2 - Container management configuration</h1><div class=lead>Customize the deployment and management of containers.</div></div><div class=td-content><h1 id=pg-3a1ecf0c4318cf78aef2b1c17e1dfd41>4.2.1 - Manager configuration</h1><div class=lead>Customize the container manager components.</div><h3 id=properties>Properties</h3><p>To control all aspects of the container manager behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the container manager data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the container manager&rsquo;s executable artifacts</td></tr><tr><td>container_client_sid</td><td>string</td><td>container-management.service.local.v1.service-containerd-client</td><td>Unique identifier that is used for an interaction with the runtime</td></tr><tr><td>network_manager_sid</td><td>string</td><td>container-management.service.local.v1.service-libnetwork-manager</td><td>Unique identifier that is used for networking</td></tr><tr><td>default_ctrs_stop_timeout</td><td>string</td><td>30s</td><td>Timeout for a container to stop gracefully in duration string format (e.g. 1h2m3s5ms), otherwise its root process will be forcefully stopped</td></tr><tr><td><strong>Runtime</strong></td><td></td><td></td><td></td></tr><tr><td>default_ns</td><td>string</td><td>kanto-cm</td><td>Namespace that is used by the runtime for isolation</td></tr><tr><td>address_path</td><td>string</td><td>/run/containerd/containerd.sock</td><td>Path to the runtime&rsquo;s communication endpoint</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the runtime data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the runtime&rsquo;s executable artifacts</td></tr><tr><td>image_dec_keys</td><td>string[]</td><td></td><td>Private keys (GPG private key ring, JWE or PKCS7) used for decrypting container images, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>image_dec_recipients</td><td>string[]</td><td></td><td>Recipients (only for PKCS7 and must be an x509) used for decrypting container images, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td>runc_runtime</td><td>string</td><td>io.containerd.runc.v2</td><td>Runc communication mode, the possible values are: io.containerd.runtime.v1.linux, io.containerd.runc.v1 and io.containerd.runc.v2</td></tr><tr><td>image_expiry</td><td>string</td><td>744h</td><td>Time period for the cached images and content to be kept in the form of e.g. 72h3m0.5s</td></tr><tr><td>image_expiry_disable</td><td>bool</td><td>false</td><td>Disable expiry management of cached images and content, must be used with caution as it may lead to large memory volumes being persistently allocated</td></tr><tr><td>lease_id</td><td>string</td><td>kanto-cm.lease</td><td>Lease identifier to be used for container resources persistence</td></tr><tr><td>image_verifier_type</td><td>string</td><td>none</td><td>The image verifier type - possible values are none and notation, when set to none image signatures wil not be verified</td></tr><tr><td>image_verifier_config</td><td>map[string]string</td><td></td><td>The configuration of the image verifier, as a string map - possible keys for notation verifier are <code>configDir</code> and <code>libexecDir</code>, for more info check <a href=https://notaryproject.dev/docs/user-guides/how-to/directory-structure/#user-level>notation documentation</a></td></tr><tr><td><strong>Registry access - secure</strong></td><td></td><td></td><td></td></tr><tr><td>user_id</td><td>string</td><td></td><td>User unique identifier to authenticate to the image registry</td></tr><tr><td>password</td><td>string</td><td></td><td>Password to authenticate to the image registry</td></tr><tr><td>root_ca</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>client_cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the image registry</td></tr><tr><td>client_key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the image registry</td></tr><tr><td><strong>Registry access - insecure</strong></td><td></td><td></td><td></td></tr><tr><td>insecure_registries</td><td>string[]</td><td>localhost</td><td>Image registries that do not use valid certificates or do not require a HTTPS connection, the format is: <code>host[:port]</code></td></tr><tr><td><strong>Networking</strong></td><td></td><td></td><td></td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the network manager data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the network manager&rsquo;s executable artifacts</td></tr><tr><td><strong>Networking - bridge</strong></td><td></td><td></td><td></td></tr><tr><td>name</td><td>string</td><td>kanto-cm0</td><td>Bridge name</td></tr><tr><td>ip4</td><td>string</td><td></td><td>Bridge IPv4 address</td></tr><tr><td>fcidr4</td><td>string</td><td></td><td>IPv4 address range for the bridge, using the standard CIDR notation</td></tr><tr><td>gwip4</td><td>string</td><td></td><td>Bridge gateway IPv4 address</td></tr><tr><td>enable_ip6</td><td>bool</td><td>false</td><td>Permit the bridge IPv6 support</td></tr><tr><td>mtu</td><td>int</td><td>1500</td><td>Bridge maximum transmission unit in bytes</td></tr><tr><td>icc</td><td>bool</td><td>true</td><td>Permit the inter-container communication</td></tr><tr><td>ip_tables</td><td>bool</td><td>true</td><td>Permit the IP tables rules</td></tr><tr><td>ip_forward</td><td>bool</td><td>true</td><td>Permit the IP forwarding</td></tr><tr><td>ip_masq</td><td>bool</td><td>true</td><td>Permit the IP masquerading</td></tr><tr><td>userland_proxy</td><td>bool</td><td>false</td><td>Forbid the userland proxy for the loopback traffic</td></tr><tr><td><strong>Local communication</strong></td><td></td><td></td><td></td></tr><tr><td>protocol</td><td>string</td><td>unix</td><td>Communication protocol used for accessing the gRPC server, the possible values are: tcp, tcp4, tcp6, unix or unixpacket</td></tr><tr><td>address_path</td><td>string</td><td>/run/container-management/container-management.sock</td><td>Path to the gRPC server&rsquo;s communication endpoint</td></tr><tr><td><strong>Digital twin</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the container manager digital twin representation</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the digital twin data</td></tr><tr><td>features</td><td>string[]</td><td>ContainerFactory, SoftwareUpdatable, Metrics</td><td>Features that will be registered for the container manager digital twin, the possible values are: ContainerFactory, SoftwareUpdatable and Metrics</td></tr><tr><td><strong>Update Agent</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the containers update agent service</td></tr><tr><td>domain</td><td>string</td><td>containers</td><td>The domain of the update agent, used as a prefix in MQTT topic handled by the update agent implementation</td></tr><tr><td>containers</td><td>string[]</td><td></td><td>List of system (core) containers that shall not be updated/destroyed by the containers update agent</td></tr><tr><td>verbose_inventory_report</td><td>bool</td><td>false</td><td>Includes extensive, verbose key-value properties in containers software nodes for the current state report. If not set, only valuable and non-default key-value parameters are reported</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker_url</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the container manager will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>keep_alive</td><td>string</td><td>20s</td><td>Keep alive duration for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>disconnect_timeout</td><td>string</td><td>250ms</td><td>Disconnect timeout for the MQTT server/broker, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>client_username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>client_password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>connect_timeout</td><td>string</td><td>30s</td><td>Connect timeout for the MQTT server/broker, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>acknowledge_timeout</td><td>string</td><td>15s</td><td>Acknowledge timeout for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>subscribe_timeout</td><td>string</td><td>15s</td><td>Subscribe timeout for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>unsubscribe_timeout</td><td>string</td><td>5s</td><td>Unsubscribe timeout for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>root_ca</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>client_cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>client_key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>log_file</td><td>string</td><td>log/container-management.log</td><td>Path to the file where the container manager&rsquo;s log messages are written</td></tr><tr><td>log_level</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>log_file_count</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>log_file_max_age</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>log_file_size</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr><tr><td>syslog</td><td>bool</td><td>false</td><td>Route logs to the local syslog</td></tr><tr><td><strong>Deployment</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the deployment manager service providing installation/update of containers via the container descriptor files</td></tr><tr><td>mode</td><td>string</td><td>update</td><td>Deployment manager mode, the possible values are: init (container descriptors are processed only on first start, new containers are deployed and started), update (container descriptors are processed on each restart, new containers can be deployed and started, existing containers may be updated, no container removals)</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the deployment manager data</td></tr><tr><td>ctr_dir</td><td>string</td><td>/etc/container-management/containers</td><td>Directory containing descriptors of containers that will be automatically deployed on first start or updated on restart</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets a timeout period of 5 seconds for the managed containers to stop gracefully.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;manager&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ctrs_stop_timeout&#34;</span>: <span style=color:#099>5</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file&#34;</span>: <span style=color:#a50>&#34;/var/log/container-management/container-management.log&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that in the registry configuration the host (used as a key) has to be set instead of the default empty string, the format is: host[:port]</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;manager&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;container_client_sid&#34;</span>: <span style=color:#a50>&#34;container-management.service.local.v1.service-containerd-client&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;network_manager_sid&#34;</span>: <span style=color:#a50>&#34;container-management.service.local.v1.service-libnetwork-manager&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ctrs_stop_timeout&#34;</span>: <span style=color:#099>30</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ns&#34;</span>: <span style=color:#a50>&#34;kanto-cm&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;address_path&#34;</span>: <span style=color:#a50>&#34;/run/containerd/containerd.sock&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_dec_keys&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_dec_recipients&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;runc_runtime&#34;</span>: <span style=color:#a50>&#34;io.containerd.runc.v2&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_expiry&#34;</span>: <span style=color:#a50>&#34;744h&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_expiry_disable&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_verifier_type&#34;</span>: <span style=color:#a50>&#34;notation&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_verifier_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;configDir&#34;</span>: <span style=color:#a50>&#34;/home/user/.config/notation&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;lease_id&#34;</span>: <span style=color:#a50>&#34;kanto-cm.lease&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;registry_configurations&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;credentials&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;user_id&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;transport&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;root_ca&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;client_cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;client_key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;insecure_registries&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;localhost&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;network&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_bridge&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;kanto-cm0&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip4&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;fcidr4&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;enable_ip6&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;mtu&#34;</span>: <span style=color:#099>1500</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;icc&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_tables&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_forward&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_masq&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;userland_proxy&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;grpc_server&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;protocol&#34;</span>: <span style=color:#a50>&#34;unix&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;address_path&#34;</span>: <span style=color:#a50>&#34;/run/container-management/container-management.sock&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;things&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;features&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;ContainerFactory&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;SoftwareUpdatable&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;Metrics&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;update_agent&#34;</span>: {
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;domain&#34;</span>: <span style=color:#a50>&#34;containers&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;system_containers&#34;</span>: [
</span></span><span style=display:flex><span>             <span style=color:#a50>&#34;my-core-container-that-is-auto-deployed-and-updatable-only-through-firmware-update&#34;</span>
</span></span><span style=display:flex><span>         ],
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;verbose_inventory_report&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;connection&#34;</span>: {
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;broker_url&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;keep_alive&#34;</span>: <span style=color:#a50>&#34;20s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;disconnect_timeout&#34;</span>: <span style=color:#a50>&#34;250ms&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;client_username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;client_password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;connect_timeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;acknowledge_timeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;subscribe_timeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;unsubscribe_timeout&#34;</span>: <span style=color:#a50>&#34;5s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;transport&#34;</span>: {
</span></span><span style=display:flex><span>             <span style=color:#1e90ff;font-weight:700>&#34;root_ca&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>             <span style=color:#1e90ff;font-weight:700>&#34;client_cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>             <span style=color:#1e90ff;font-weight:700>&#34;client_key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file&#34;</span>: <span style=color:#a50>&#34;log/container-management.log&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_level&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_count&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_size&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_max_age&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;syslog&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deployment&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;update&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;ctr_dir&#34;</span>: <span style=color:#a50>&#34;/etc/container-management/containers&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5ec561ebd13cd31801c37882f826ab0d>4.2.2 - Container configuration</h1><div class=lead>Customize the deployment of a container instance.</div><h3 id=properties>Properties</h3><p>To control all aspects of the container instance behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>container_name</td><td>string</td><td>&lt;container_id></td><td>User-defined name for the container, if omitted the internally auto-generated container ID will be set</td></tr><tr><td><strong>Image</strong></td><td></td><td></td><td></td></tr><tr><td>name</td><td>string</td><td></td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td><strong>Image - decryption</strong></td><td></td><td></td><td></td></tr><tr><td>keys</td><td>string[]</td><td></td><td>Private keys (GPG private key ring, JWE or PKCS7) used for decrypting the container&rsquo;s image, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>recipients</td><td>string[]</td><td></td><td>Recipients (only for PKCS7 and must be an x509) used for decrypting the container&rsquo;s image, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td><strong>Networking</strong></td><td></td><td></td><td></td></tr><tr><td>domain_name</td><td>string</td><td>&lt;container_name>-domain</td><td>Domain name inside the container, if omitted the <code>container_name</code> with suffix -domain will be set</td></tr><tr><td>host_name</td><td>string</td><td>&lt;container_name>-host</td><td>Host name for the container, if omitted the <code>container_name</code> with suffix -host will be set</td></tr><tr><td>network_mode</td><td>string</td><td>bridge</td><td>The container&rsquo;s networking capabilities type based on the desired communication mode, the possible options are: bridge or host</td></tr><tr><td>extra_hosts</td><td>string[]</td><td></td><td>Extra host name to IP address mappings added to the container network configuration, the format is: <code>hostname:ip</code>. If the IP of the host machine is to be added to the container&rsquo;s hosts file the reserved host_ip[_&lt;network-interface>] must be provided. If only host_ip (the network-interface part is skipped) is used, by default it will be resolved to the host&rsquo;s IP on the default bridge network interface for containerm (the default configuration is kanto-cm0) and add it to the container&rsquo;s hosts file. If the IP of a container in the same bridge network is to be added to the hosts file the reserved container_&lt;container-host_name> must be provided.</td></tr><tr><td><strong>Networking - port mappings</strong></td><td></td><td></td><td></td></tr><tr><td>proto</td><td>string</td><td>tcp</td><td>Protocol used for the port mapping from the container to the host, the possible options are: tcp and udp</td></tr><tr><td>container_port</td><td>int</td><td></td><td>Port number on the container that is mapped to the host port</td></tr><tr><td>host_ip</td><td>string</td><td>0.0.0.0</td><td>Host IP address</td></tr><tr><td>host_port</td><td>int</td><td></td><td>Beginning of the host ports range</td></tr><tr><td>host_port_end</td><td>int</td><td>&lt;host_port></td><td>Ending of the host ports range</td></tr><tr><td><strong>Host resources - devices</strong></td><td></td><td></td><td></td></tr><tr><td>path_on_host</td><td>string</td><td></td><td>Path to the device on the host</td></tr><tr><td>path_in_container</td><td>string</td><td></td><td>Path to the device in the container</td></tr><tr><td>cgroup_permissions</td><td>string</td><td>rwm</td><td>Cgroup permissions for the device access, possible options are: r(read), w(write), m(mknod) and all combinations are possible</td></tr><tr><td>privileged</td><td>bool</td><td>false</td><td>Grant root capabilities to all devices on the host system</td></tr><tr><td>extra_capabilities</td><td>string[]</td><td></td><td>Add additional Linux capabilities to the container</td></tr><tr><td><strong>Host resources - mount points</strong></td><td></td><td></td><td></td></tr><tr><td>source</td><td>string</td><td></td><td>Path to the file or directory on the host that is referred from within the container</td></tr><tr><td>destination</td><td>string</td><td></td><td>Path to the file or directory that is mounted inside the container</td></tr><tr><td>propagation_mode</td><td>string</td><td>rprivate</td><td>Bind propagation for the mount, supported are: rprivate, private, rshared, shared, rslave or slave</td></tr><tr><td><strong>Process</strong></td><td></td><td></td><td></td></tr><tr><td>env</td><td>string[]</td><td></td><td>Environment variables that are set into the container</td></tr><tr><td>cmd</td><td>string[]</td><td></td><td>Command with arguments that is executed upon the container&rsquo;s start</td></tr><tr><td><strong>I/O</strong></td><td></td><td></td><td></td></tr><tr><td>open_stdin</td><td>bool</td><td></td><td>Open the terminal&rsquo;s standard input for an interaction with the current container</td></tr><tr><td>tty</td><td>bool</td><td></td><td>Attach standard streams to a TTY</td></tr><tr><td><strong>Resource management</strong></td><td></td><td></td><td></td></tr><tr><td>memory</td><td>string</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memory_reservation</td><td>string</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memory_reservation</code> must be smaller than it</td></tr><tr><td>memory_swap</td><td>string</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr><tr><td><strong>Lifecycle</strong></td><td></td><td></td><td></td></tr><tr><td>type</td><td>string</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maximum_retry_count</td><td>int</td><td></td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>retry_timeout</td><td>int</td><td></td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>type</td><td>string</td><td>json-file</td><td>Type in which the logs are produced, the possible options are: json-file or none</td></tr><tr><td>max_files</td><td>int</td><td>2</td><td>Maximum log files before getting rotated</td></tr><tr><td>max_size</td><td>string</td><td>100M</td><td>Maximum log file size before getting rotated as a number with a unit suffix of B, K, M and G</td></tr><tr><td>root_dir</td><td>string</td><td>&lt;meta_path>/containers/&lt;container_id></td><td>Root directory where the container&rsquo;s log messages are stored</td></tr><tr><td>mode</td><td>string</td><td>blocking</td><td>Messaging delivery mode from the container to the log driver, the supported modes are: blocking and non-blocking</td></tr><tr><td>max_buffer_size</td><td>string</td><td>1M</td><td>Maximum size of the buffered container&rsquo;s log messages in a non-blocking mode as a number with a unit suffix of B, K, M and G</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to spin up an InfluxDB container instance.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;image&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;docker.io/library/influxdb:1.8.4&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case. The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may require property removal</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;container_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;image&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;decrypt_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;keys&#34;</span>: [],
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;recipients&#34;</span>: []
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;domain_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;host_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mount_points&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;destination&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;source&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;propagation_mode&#34;</span>: <span style=color:#a50>&#34;rprivate&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;env&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;cmd&#34;</span>: []
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;io_config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;open_stdin&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;tty&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;host_config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;devices&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;path_on_host&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;path_in_container&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;cgroup_permissions&#34;</span>: <span style=color:#a50>&#34;rwm&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;network_mode&#34;</span>: <span style=color:#a50>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;privileged&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;extra_hosts&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;extra_capabilities&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;port_mappings&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;proto&#34;</span>: <span style=color:#a50>&#34;tcp&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;container_port&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_ip&#34;</span>: <span style=color:#a50>&#34;0.0.0.0&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_port&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_port_end&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory_reservation&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory_swap&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;restart_policy&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;unless-stopped&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;maximum_retry_count&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;retry_timeout&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;driver_config&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_files&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_size&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;root_dir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;mode_config&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_buffer_size&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-86f70e119f54e5f918738ddf3b2df8e5>4.2.3 - API Reference</h1><div class=lead>API Reference for the Container Management Things service.</div></div><div class=td-content><h1 id=pg-9e6d9e03d959ccc1c4cf3a1b8df4dd16>4.2.3.1 - Container Factory API</h1><div class=lead>The container factory service provides the ability to create new containers form a container image, or from a <a href=../container-config.md>container configuration</a>.</div><h2 id=create><strong>Create</strong></h2><p>Create a container from a single container image reference with an option to start it.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//create</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/create</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/inbox/messages/create</code></td><td>A path to the <code>ContainerFactory</code> Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>imageRef</td><td>URL</td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td>start</td><td>true/false</td><td>Start or only create the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Create and automatically start a new <code>Hello World</code> container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//create</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/inbox/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;imageRef&#34;</span>:<span style=color:#a50>&#34;docker.io/library/hello-world:latest&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;start&#34;</span>:<span style=color:#00a>true</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//create</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/create</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/outbox/messages/create</code></td><td>A path to the Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td>application/json</td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Value</strong></td><td></td><td>UUID of the created container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a <code>create</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//create``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/outbox/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#a50>&#34;&lt;Container UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=create--with-config><strong>Create with config</strong></h2><p>Create a container with a specified container configuration.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//createWithConfig</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/createWithConfig</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/inbox/messages/createWithConfig</code></td><td>A path to the <code>ContainerFactory</code> Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>imageRef</td><td>URL</td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td>start</td><td>true/false</td><td>Force to start created container</td></tr><tr><td><strong>config</strong></td><td></td><td>json presentation of the configuration</td></tr><tr><td>domainName</td><td></td><td>Domain name inside the container, if omitted the container&rsquo;s domain name will be set to a system-defined value</td></tr><tr><td>hostName</td><td></td><td>Host name for the container, if omitted the container&rsquo;s hostname will be set to a system-defined value</td></tr><tr><td>env</td><td></td><td>An array of environment variables that are set into the container</td></tr><tr><td>cmd</td><td></td><td>An array of command with arguments that is executed upon the container&rsquo;s start</td></tr><tr><td>privileged</td><td>false</td><td>Grant root capabilities to all devices on the host system</td></tr><tr><td>extraHosts</td><td></td><td>An array of additional extra host names to IP address mappings added to the container network configuration, the format is: hostname:ip. If the IP of the host machine is to be added to the container&rsquo;s hosts file the reserved host_ip[<em><network-interface>] must be provided. If only host_ip (the network-interface part is skipped) is used, by default it will be resolved to the host&rsquo;s IP on the default bridge network interface for containerm (the default configuration is kanto-cm0) and add it to the container&rsquo;s hosts file. If the IP of a container in the same bridge network is to be added to the hosts file the reserved container</em>&lt;container-host_name> must be provided.</td></tr><tr><td>extraCapabilities</td><td></td><td>An array of additional capabilities for a container</td></tr><tr><td>networkMode</td><td></td><td>The container&rsquo;s networking capabilities type based on the desired communication mode. The possible options are: bridge or host</td></tr><tr><td>openStdin</td><td>true/false</td><td>Open the terminal&rsquo;s standard input for an interaction with the current container</td></tr><tr><td>tty</td><td>true/false</td><td>Attach standard streams to a TTY</td></tr><tr><td><strong>mountPoints</strong></td><td></td><td>An array of the mount points</td></tr><tr><td>source</td><td></td><td>Path to the file or directory on the host that is referred from within the container</td></tr><tr><td>destination</td><td></td><td>Path to the file or directory that is mounted inside the container</td></tr><tr><td>propagationMode</td><td></td><td>Bind propagation for the mount, supported are: rprivate, private, rshared, shared, rslave or slave</td></tr><tr><td><strong>decryption</strong></td><td></td><td></td></tr><tr><td>keys</td><td></td><td>A string array of private keys (GPG private key ring, JWE or PKCS7) used for decrypting the container&rsquo;s image, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>recipients</td><td></td><td>A string array of recipients (only for PKCS7 and must be an x509) used for decrypting the container&rsquo;s image, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td><strong>devices</strong></td><td></td><td>An array of accessible devices from the host</td></tr><tr><td>pathOnHost</td><td></td><td>Path to the device on the host</td></tr><tr><td>pathInContainer</td><td></td><td>Path to the device in the container</td></tr><tr><td>cgroupPermissions</td><td>rwm</td><td>Cgroup permissions for the device access, possible options are: r(read), w(write), m(mknod) and all combinations are possible</td></tr><tr><td><strong>restartPolicy</strong></td><td></td><td>The container restart policy</td></tr><tr><td>type</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maxRetryCount</td><td></td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>retryTimeout</td><td></td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>portMappings</strong></td><td></td><td>An array of port mappings from the host to a container</td></tr><tr><td>proto</td><td>tcp</td><td>Protocol used for the port mapping from the container to the host, the possible options are: tcp and udp</td></tr><tr><td>containerPort</td><td></td><td>Port number on the container that is mapped to the host port</td></tr><tr><td>hostIP</td><td>0.0.0.0</td><td>Host IP address</td></tr><tr><td>hostPort</td><td></td><td>Beginning of the host ports range</td></tr><tr><td>hostPortEnd</td><td>&lt;host_port></td><td>Ending of the host ports range</td></tr><tr><td><strong>log</strong></td><td></td><td></td></tr><tr><td>type</td><td>json-file</td><td>Type in which the logs are produced, the possible options are: json-file or none</td></tr><tr><td>maxFiles</td><td>2</td><td>Maximum log files before getting rotated</td></tr><tr><td>maxSize</td><td>100M</td><td>Maximum log file size before getting rotated as a number with a unit suffix of B, K, M and G</td></tr><tr><td>rootDir</td><td>&lt;meta_path>/containers/&lt;container_id></td><td>Root directory where the container&rsquo;s log messages are stored</td></tr><tr><td>mode</td><td>blocking</td><td>Messaging delivery mode from the container to the log driver, the supported modes are: blocking and non-blocking</td></tr><tr><td>maxBufferSize</td><td>1M</td><td>Maximum size of the buffered container&rsquo;s log messages in a non-blocking mode as a number with a unit suffix of B, K, M and G</td></tr><tr><td><strong>resources</strong></td><td></td><td></td></tr><tr><td>memory</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memoryReservation</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memoryReservation</code> must be smaller than it</td></tr><tr><td>memorySwap</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Create and automatically start a new <code>Hello World</code> container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//createWithConfig</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/inbox/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;imageRef&#34;</span>:<span style=color:#a50>&#34;docker.io/library/influxdb:1.8.4&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;start&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;domainName&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;hostName&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;env&#34;</span>: [],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;cmd&#34;</span>: [],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;privileged&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;extraHosts&#34;</span>: [<span style=color:#a50>&#34;ctrhost:host_ip&#34;</span>],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;extraCapabilities&#34;</span>: [],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;networkMode&#34;</span>: <span style=color:#a50>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;openStdin&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;tty&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;mountPoints&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;source&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;destination&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;propagationMode&#34;</span>: <span style=color:#a50>&#34;rprivate&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;decryption&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;keys&#34;</span>: [],
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;recipients&#34;</span>: []
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;devices&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;pathOnHost&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;pathInContainer&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;cgroupPermissions&#34;</span>: <span style=color:#a50>&#34;rwm&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;restartPolicy&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;unless-stopped&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxRetryCount&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;retryTimeout&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;portMappings&#34;</span>:[
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;proto&#34;</span>: <span style=color:#a50>&#34;tcp&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;containerPort&#34;</span>: <span style=color:#099>80</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;hostIP&#34;</span>: <span style=color:#a50>&#34;0.0.0.0&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;hostPort&#34;</span>: <span style=color:#099>5000</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;hostPortEnd&#34;</span>: <span style=color:#099>5005</span>,
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxFiles&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxSize&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;rootDir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxBufferSize&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;memoryReservation&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;memorySwap&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//createWithConfig</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/createWithConfig</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/outbox/messages/createWithConfig</code></td><td>A path to the <code>ContainerFactory</code> Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td></td></tr><tr><td><strong>Value</strong></td><td></td><td>UUID of the created container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a <code>createWithConfig</code> operation.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/res//createWithConfig</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/outbox/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#a50>&#34;&lt;Container UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-d92b0c2d8055aa885d88d167e96c76bb>4.2.3.2 - Container API</h1><div class=lead>The container service offers a comprehensive range of operations for managing existing containers. Users can effortlessly start, pause, resume or stop, containers with specific configurations. Additionally, they have the flexibility to rename, update, or remove containers as needed.</div><h2 id=start><strong>Start</strong></h2><p>Start an existing container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/start</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Start an existing container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//start</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/start</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation start over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful <code>start</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//start``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=stop><strong>Stop</strong></h2><p>Stop an existing and running container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//stop</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stop</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/stop</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stop</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Stop an existing and running container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//stop</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//stop</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stop</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/stop</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stop</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation stop over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful stop operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//stop``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=stop-with-options><strong>Stop with options</strong></h2><p>Stop an existing and running container with given options.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//stopWithOptions</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stopWithOptions</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/stopWithOptions</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stopWithOptions</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>signal</td><td><code>SIGTERM</code></td><td>Stop a container using a specific signal. Signals could be specified by using their names or numbers, e.g. <code>SIGINT</code> or 2</td></tr><tr><td>timeout</td><td>-1 &#171; 63 // -9223372036854775808</td><td>Sets the timeout period in seconds to gracefully stop the container. When timeout expires the container process would be forcibly killed</td></tr><tr><td>force</td><td>true/false</td><td>Whether to send a SIGKILL signal to the container&rsquo;s process if it does not finish within the timeout specified</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Stop an existing and running container with specified options.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//stopWithOptions</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;signal&#34;</span>:<span style=color:#a50>&#34;SIGINT&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;timeout&#34;</span>: <span style=color:#099>30</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;force&#34;</span>: <span style=color:#00a>true</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//stopWithOptions</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stopWithOptions</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/stopWithOptions</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stopWithOptions</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation stop with options over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful the <code>stopWithOptions</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//stopWithOptions``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=rename><strong>Rename</strong></h2><p>Change the name of an existing container to the specified new name.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//rename</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/rename</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/rename</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>rename</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td>The new name of the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Change the name of an existing container to the specified new name.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//rename</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#a50>&#34;new_container_name&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//rename</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/rename</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/rename</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>rename</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation rename container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the rename operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//rename``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=update><strong>Update</strong></h2><p>Update an existing container without recreating it. The provided configurations will be merged with the current one.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//update</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/update</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/update</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>update</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td><strong>restartPolicy</strong></td><td></td><td>Updates the restart policy for the container. The policy will be applied when the container exits</td></tr><tr><td>type</td><td>no/always/unless-stopped/on-failure</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maxRetryCount</td><td>-1 &#171; 31 // -2147483648</td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>timeout</td><td>-1 &#171; 63 // -9223372036854775808</td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>resources</strong></td><td></td><td></td></tr><tr><td>memory</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memoryReservation</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memoryReservation</code> must be smaller than it</td></tr><tr><td>memorySwap</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Update an existing container resources and restart policy.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//update</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;restartPolicy&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>:<span style=color:#a50>&#34;on-failure&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;maxRetryCount&#34;</span>:<span style=color:#099>3</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;timeout&#34;</span>:<span style=color:#099>10</span>
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>:<span style=color:#a50>&#34;500M&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;memoryReservation&#34;</span>:<span style=color:#a50>&#34;300M&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;memorySwap&#34;</span>:<span style=color:#a50>&#34;1G&#34;</span>,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//update</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/update</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/update</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>update</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>update</code> operation over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an <code>update</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//update``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=remove><strong>Remove</strong></h2><p>Remove an existing container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/remove</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td>true/false</td><td>Force stopping before removing a container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Remove an existing container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//remove</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#00a>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/remove</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation remove container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an <code>remove</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//remove``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-a06f881f26a5aaab4f513dd987342133>4.2.3.3 - Metrics API</h1><div class=lead>With the metrics service, you can request and receive metrics data for specific containers.</div><h2 id=request><strong>Request</strong></h2><p>Request to receive data from the container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/inbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>frequency</td><td></td><td>Time interval of how often the metrics data will be published as duration string (e.g. 5s)</td></tr><tr><td><strong>filter</strong></td><td></td><td>Filter defines the type of metric data to be reported</td></tr><tr><td>id</td><td></td><td>An array of identifiers whose metric data to be reported, supported are: <code>cpu.utilization</code>, <code>memory.utilization</code>, <code>memory.total</code>, <code>memory.used</code>, <code>io.readBytes</code>, <code>io.writeBytes</code>, <code>net.readBytes</code>, <code>net.writeBytes</code>, <code>pids</code></td></tr><tr><td>originator</td><td></td><td>Metrics data originator</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Request metrics data with a specified filter and frequency.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//request</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/inbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;filter&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#00a>null</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;SYSTEM&#34;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>:<span style=color:#a50>&#34;2s&#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>request</code> metrics operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the request metrics data operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//request``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=data><strong>Data</strong></h2><p>Metrics data from a container based on the frequency specified in the request.</p><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//data</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/data</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/data</code></td><td>A path to the <code>Metrics</code> Feature and it&rsquo;s message channel.</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td><strong>Value</strong></td><td></td><td>The value of the received data from the container in json format</td></tr><tr><td>timestamp</td><td></td><td>The timestamp in ms when this measure data is published</td></tr><tr><td><strong>shapshot</strong></td><td></td><td>All the measurements collected per originator</td></tr><tr><td>originator</td><td></td><td>The originator for whose metric data to be reported</td></tr><tr><td><strong>measurements</strong></td><td></td><td>An array of measurements identifier and value for originator</td></tr><tr><td>id</td><td></td><td>The identifier whose metric data to be reported, supported are: <code>cpu.utilization</code>, <code>memory.utilization</code>, <code>memory.total</code>, <code>memory.used</code>, <code>io.readBytes</code>, <code>io.writeBytes</code>, <code>net.readBytes</code>, <code>net.writeBytes</code>, <code>pids</code></td></tr><tr><td>value</td><td></td><td>The measured value per metric ID</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Metrics data from a container.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//data``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;snapshot&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;Container:test&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;measurements&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.total&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>10371616768</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.used&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>1396736</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.01346690714903206</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.readBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>180</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.writeBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;pids&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>6</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;Container:test2&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;measurements&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>8.751566666666667</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.total&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>10371616768</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.used&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>4759552</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.04589016453717083</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;io.readBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;io.writeBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>4096</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.readBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>610</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.writeBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>202</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;pids&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>14</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;timestamp&#34;</span>:<span style=color:#099>1234567890</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-a87803cbe8a7f247e049f3f168b5dec9>4.2.3.4 - Software Updatable API</h1><div class=lead>The software updatable service utilizes the Eclipse hawkBit message format to install a specified list of containers (software modules) and remove already installed modules.</div><h2 id=install><strong>Install</strong></h2><p>You can install a specified list of containers (software modules).</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Forced to install the software modules</td></tr><tr><td><strong>softwareModules</strong></td><td></td><td>An array of modules that will be installed</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td><strong>softwareModule</strong></td><td></td><td>An unique identifier for the software module</td></tr><tr><td>name</td><td></td><td>The name of the software module</td></tr><tr><td>version</td><td></td><td>The version of the software module</td></tr><tr><td><strong>artifacts</strong></td><td></td><td>An array of artifacts contained in the software module</td></tr><tr><td>filename</td><td></td><td>The file name of the artifact behind the provided URLs</td></tr><tr><td>size</td><td></td><td>The size of the file in bytes</td></tr><tr><td><strong>download</strong></td><td></td><td>A map with protocols and links for artifact download</td></tr><tr><td>key</td><td>HTTP/HTTPS/FTP/SFTP</td><td>Available transport protocols</td></tr><tr><td>url</td><td></td><td>URL to download the artifact</td></tr><tr><td>md5url</td><td></td><td>MD5URL to download the MD5SUM file</td></tr><tr><td><strong>checksums</strong></td><td></td><td>A map with checksums to verify the proper download</td></tr><tr><td>MD5</td><td></td><td>MD5 checksum of the downloaded file</td></tr><tr><td>SHA1</td><td></td><td>SHA1 checksum of the downloaded file</td></tr><tr><td>SHA256</td><td></td><td>SHA256 checksum of the downloaded file</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : In this example, you can install the listed modules.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//install</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;forced&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;softwareModules&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;softwareModule&#34;</span>:{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;influxdb&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;1.8.4&#34;</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;artifacts&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;filename&#34;</span>:<span style=color:#a50>&#34;valid.json&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;download&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;HTTPS&#34;</span>:{
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;url&#34;</span>:<span style=color:#a50>&#34;https://raw.githubusercontent.com/eclipse-kanto/container-management/main/containerm/pkg/testutil/config/container/valid.json&#34;</span>,
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;md5url&#34;</span>:<span style=color:#a50>&#34;https://raw.githubusercontent.com/eclipse-kanto/container-management/main/containerm/pkg/testutil/config/container/valid.json&#34;</span>
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;checksums&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;MD5&#34;</span>:<span style=color:#a50>&#34;8c5a0fa2c01e218262d672bf643652fd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA1&#34;</span>:<span style=color:#a50>&#34;7539b451d818d94bcd97d401a5467b3e1c0b8981&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA256&#34;</span>:<span style=color:#a50>&#34;be8f5def8e6a61caab078be0995826ae65f5993b1a35c18ed6045c3db37c4a3a&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;size&#34;</span>:<span style=color:#099>100</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		]
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>install</code> operation`</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful install of the software modules.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//install``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=remove><strong>Remove</strong></h2><p>Remove of an installed software module.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/remove</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td>Json presentation of the software module to be removed</td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Force remove the software modules</td></tr><tr><td><strong>software</strong></td><td></td><td>An array of software modules to be removed</td></tr><tr><td>group</td><td></td><td>An identifier which groups the dependency into a certain category</td></tr><tr><td>name</td><td></td><td>The dependency name</td></tr><tr><td>version</td><td></td><td>The dependency version</td></tr><tr><td>type</td><td></td><td>The &ldquo;category&rdquo; classifier of the dependency</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : In this example, you can remove an existing software modules.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//remove</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;forced&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;software&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;influxdb&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		]
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/remove</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation remove software modules from container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of successful removal of software modules.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//remove``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-872c561eb6735f729f4b50e9127140d4>4.2.4 - Container configuration as Desired State component</h1><div class=lead>Customize the deployment of a container instance as a Desired State component.</div><h3 id=domain-identifier>Domain Identifier</h3><p>The default domain identifier for the Containers Update Agent is <code>containers</code>.
This can be modified within the update agent section in the <a href=./container-manager-config>container management JSON config file</a>.</p><h3 id=containers-update-agent-properties>Containers Update Agent Properties</h3><p>To control the container update agent behavior through desired state specification. As defined in the Desired State Specification, all properties are of type string.</p><table><thead><tr><th>Key</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>systemContainers</td><td>No</td><td></td><td>Comma-separated list of container names that shall not be processed by the update agent during the application of the given desired state. This configuration option can be used to temporarily override the general <code>systemContainers</code> setting from the update agent section in the container management JSON config file. The setting is valid only for the given desired state where it is present.</td></tr></tbody></table><h3 id=container-properties>Container Properties</h3><p>To control all aspects of the container instance behavior. As defined in the Desired State Specification, all properties are of type string.</p><table><thead><tr><th>Key</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>General config</strong></td><td></td><td></td><td></td></tr><tr><td>image</td><td>Yes</td><td></td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code>.</td></tr><tr><td>env</td><td>No</td><td></td><td>Sets the provided environment variable in the root container&rsquo;s process environment.Example: <code>VAR1=2</code>. If <code>VAR1</code>= is used, the environment variable would be set to empty. If <code>VAR1</code> is used, the environment variable would be removed from the container environment inherited from the image. The property can be included multiple times, each one specifying another environment variable.</td></tr><tr><td>cmd</td><td>No</td><td></td><td>Command with arguments that is executed upon the container’s start. The property can be included multiple times (order is important), each one specifying another command argument.</td></tr><tr><td><strong>Host config</strong></td><td></td><td></td><td></td></tr><tr><td>device</td><td>No</td><td></td><td>Device to be made available in the container and optional cgroups permissions configuration. Both path on host and in container must be set. Possible cgroup permissions options are &ldquo;r&rdquo; (read), &ldquo;w&rdquo; (write), &ldquo;m&rdquo; (mknod) and all combinations of the three are possible. If not set, &ldquo;rwm&rdquo; is default device configuration. Example: <code>/dev/ttyACM0:/dev/ttyUSB0[:rwm]</code>. The property can be included multiple times, each one specifying a separate device.</td></tr><tr><td>port</td><td>No</td><td></td><td>Port to be mapped from the host to the container instance. Format: <code>[&lt;host-ip>:]&lt;host-port>:&lt;container-port>[-&lt;range>][/&lt;proto>]</code>. Most common use-case: <code>80:80</code>. Mapping the container&rsquo;s 80 port to a host port in the 5000-6000 range: <code>5000-6000:80/udp</code>. Specifying port protocol (default is tcp): <code>80:80/udp</code>. By default the port mapping will set on all network interfaces, but this is also manageable: <code>0.0.0.0:80-100:80/udp</code>. The property can be included multiple times, each one specifying another port mapping.</td></tr><tr><td>network</td><td>No</td><td>bridge</td><td>Sets the networking mode for the container. Possible options are: <code>bridge</code> - the container is connected to the default bridge network interface of the engine and is assigned an IP. <code>host</code> - the container shares the network stack of the host (use with caution as this breaks the network&rsquo;s isolation!)</td></tr><tr><td>host</td><td>No</td><td></td><td>Extra host to be added in the current container&rsquo;s <code>/etc/hosts</code> file. Example: hostname1:<ip1>. If the IP of the host machine is to be added to the container&rsquo;s hosts file the reserved <code>host_ip[_&lt;network-interface>]</code> must be provided. Example: <code>local.host.machine.ip.custom.if:host_ip_myNetIf0</code> - this will automatically resolve the host&rsquo;s IP on the <code>myNetIf0</code> network interface and add it to the container&rsquo;s hosts file. <code>local.host.machine.ip.default.bridge:host_ip</code> - this will automatically resolve the host&rsquo;s IP on the default bridge network interface for container management and add it to the container&rsquo;s hosts file if the container is configured to use it. The property can be included multiple times, each one specifying another extra host</td></tr><tr><td>mount</td><td>No</td><td></td><td>Sets mount points so a source directory on the host can be accessed via a destination directory in the container. Format: <code>source:destination[:propagation_mode]</code>. If the propagation mode parameter is omitted, <code>rprivate</code> will be set by default. Available propagation modes are: <code>rprivate</code>, <code>private</code>, <code>rshared</code>, <code>shared</code>, <code>rslave</code>, <code>slave</code>. The property can be included multiple times, each one specifying another mount point.</td></tr><tr><td><strong>IO config</strong></td><td></td><td></td><td></td></tr><tr><td>terminal</td><td>No</td><td>false</td><td>Boolean flag. Enables terminal for the current container, e.g. attach standard streams to a TTY.</td></tr><tr><td>interactive</td><td>No</td><td>false</td><td>Boolean flag. Enables interaction with the container, e.g. open the terminal&rsquo;s standard input for an interaction with the container.</td></tr><tr><td>privileged</td><td>No</td><td>false</td><td>Boolean flag. Creates the container as privileged, grants root capabilities to all devices on the host system</td></tr><tr><td><strong>Restart policy config</strong></td><td></td><td></td><td></td></tr><tr><td>restartPolicy</td><td>string</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported values are: <code>always</code> - an attempt to restart the container will be made made each time the container exits regardless of the exit code, <code>no</code> - no attempts to restart the container for any reason will be made, <code>on-failure</code> - restart attempts will be made if the container exits with an exit code != 0, <code>unless-stopped</code> - restart attempts will be made only if the container has not been stopped by the user.</td></tr><tr><td>restartMaxRetries</td><td>No</td><td>1</td><td>Integer value. Maximum number of retries that are made to restart the container on exit with fail, valid only if the <code>restartPolicy</code> is <code>on-failure</code>.</td></tr><tr><td>restartTimeout</td><td>No</td><td>30</td><td>Integer value. Timeout period in seconds for each retry that is made to restart the container on exit with fail, valid only if the <code>restartPolicy</code> is <code>on-failure</code>.</td></tr><tr><td><strong>Logging config</strong></td><td></td><td></td><td></td></tr><tr><td>logDriver</td><td>No</td><td>json-file</td><td>Sets the type of the log driver to be used for the container - <code>json-file</code>, <code>none</code>.</td></tr><tr><td>logMaxFiles</td><td>No</td><td>2</td><td>Integer value. Sets the max number of log files to be rotated - applicable for <code>json-file</code> log driver only.</td></tr><tr><td>logMaxSize</td><td>No</td><td>100M</td><td>Sets the max size of the logs files for rotation in the form of 1, 1.2m, 1g, etc. - applicable for <code>json-file</code> log driver only.</td></tr><tr><td>logPath</td><td>No</td><td></td><td>Sets the path to the directory where the log files will be stored - applicable for <code>json-file</code> log driver only.</td></tr><tr><td>logMode</td><td>No</td><td>blocking</td><td>Sets the mode of the logger - <code>blocking</code>, <code>non-blocking</code>.</td></tr><tr><td>logMaxBufferSize</td><td>No</td><td>1M</td><td>Sets the max size of the logger buffer in the form of 1, 1.2m - applicable for <code>non-blocking</code> mode only.</td></tr><tr><td><strong>Resources config</strong></td><td></td><td></td><td></td></tr><tr><td>memory</td><td>No</td><td></td><td>Sets the max amount of memory the container can use in the form of 200m, 1.2g. The minimum allowed value is 3m. By default, a container has no memory constraints.</td></tr><tr><td>memorySwap</td><td>No</td><td></td><td>Sets the total amount of memory + swap that the container can use in the form of 200m, 1.2g. If set must not be smaller than <code>memory</code>. If equal to <code>memory</code>, then the container will not have access to swap. If not set and <code>memory</code> is set, than the container can use as much swap as the <code>memory</code> setting. If set to -1, the container can use unlimited swap, up to the amount available on the host.</td></tr><tr><td>memoryReservation</td><td>No</td><td></td><td>Sets a soft memory limitation in the form of 200m, 1.2g. Must be smaller than <code>memory</code>. When the system detects memory contention or low memory, control groups are pushed back to their soft limits. There is no guarantee that the container memory usage will not exceed the soft limit.</td></tr></tbody></table><h4 id=desired-state-containers-domain-example>Desired State Containers Domain Example</h4><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;domains&#34;</span>: [
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;containers&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;systemContainers&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;self-update-agent&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;components&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;hello-world&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>: <span style=color:#a50>&#34;latest&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;image&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;docker.io/library/hello-world:latest&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;env&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;x=y&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;env&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;a=b&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;cmd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;arg1&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;cmd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;arg2&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;device&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;/dev/tty:/dev/tty:rw&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;port&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;80:80/tcp&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;network&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;host&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;host&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;host_name&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;mount&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;/data:/data:private&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;terminal&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;true&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;interactive&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;true&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;privileged&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;true&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;restartPolicy&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;always&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;restartMaxRetries&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;3&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;restartTimeout&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;1000&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logDriver&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMaxFiles&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;3&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMaxSize&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;5M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logPath&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;/var/log&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMode&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMaxBufferSize&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;memory&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;200M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;memorySwap&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;300M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;memoryReservation&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					]
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5743bc867ec5e301d16f987251313c8d>4.3 - Software Updatable</h1><div class=lead>Customize the deployment and management of software artifacts.</div></div><div class=td-content><h1 id=pg-9767bb4be0bb151351b0ddd78b022cca>4.3.1 - Software update configuration</h1><div class=lead>Customize the deployment and management of software artifacts.</div><h3 id=properties>Properties</h3><p>To control all aspects of the software update behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>SoftwareUpdatable</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>moduleType</td><td>string</td><td>software</td><td>Type of the software that is managed by this feature</td></tr><tr><td>artifactType</td><td>string</td><td>archive</td><td>Type of the artifact that is to be processed: archive or plain</td></tr><tr><td>install</td><td>string[]</td><td></td><td>Absolute path to the install script/command and an optional sequence of additional flags/parameters</td></tr><tr><td>storageLocation</td><td>string</td><td>./</td><td>Path to the storage directory where the working files are stored</td></tr><tr><td>installDirs</td><td>string[]</td><td></td><td>File system directories where the local artifacts are stored</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction where the local artifacts can be stored on the file system, the supported modes are: strict, lax and scope</td></tr><tr><td><strong>Download</strong></td><td></td><td></td><td></td></tr><tr><td>downloadRetryCount</td><td>int</td><td>0</td><td>Number of retries, in case of a failed download</td></tr><tr><td>downloadRetryInterval</td><td>string</td><td>5s</td><td>Interval between retries, in case of a failed download as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Download - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure downloads</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the software update will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/software-update.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets the software type to firmware.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;moduleType&#34;</span>: <span style=color:#a50>&#34;firmware&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storageLocation&#34;</span>: <span style=color:#a50>&#34;/var/lib/software-update&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/software-update/software-update.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;SoftwareUpdatable&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;moduleType&#34;</span>: <span style=color:#a50>&#34;software&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;artifactType&#34;</span>: <span style=color:#a50>&#34;archive&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;install&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storageLocation&#34;</span>: <span style=color:#a50>&#34;./&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;installDirs&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;downloadRetryCount&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;downloadRetryInterval&#34;</span>: <span style=color:#a50>&#34;5s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/software-update.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-2c8e931dc6982e84bbb9b080f0132227>4.3.2 - Software Updatable API</h1><div class=lead>The software updatable service provides the ability to install given list of software modules and to download modules.</div><h2 id=install><strong>Install</strong></h2><p>Install given list of software modules.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the response message</td></tr><tr><td><strong>Value</strong></td><td></td><td>JSON presentation of software module that will be installed</td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Forced to remove the software modules</td></tr><tr><td><strong>softwareModules</strong></td><td></td><td>An array of software modules to be installed</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td><strong>softwareModule</strong></td><td></td><td>An unique identifier for the software module</td></tr><tr><td>name</td><td></td><td>The name of the software module</td></tr><tr><td>version</td><td></td><td>The version of the software module</td></tr><tr><td><strong>artifacts</strong></td><td></td><td>An array of artifacts contained in the software module</td></tr><tr><td>filename</td><td></td><td>The file name of the artifact</td></tr><tr><td>size</td><td></td><td>Artifact file size in bytes</td></tr><tr><td><strong>download</strong></td><td></td><td>A map with protocols and links for downloading the artifacts</td></tr><tr><td>key</td><td>HTTP/HTTPS/FTP/SFTP</td><td>Available transport protocols</td></tr><tr><td>url</td><td></td><td>URL to download the artifact</td></tr><tr><td>md5url</td><td></td><td>MD5URL to download the MD5SUM file</td></tr><tr><td><strong>checksums</strong></td><td></td><td>A map with checksums to verify the proper download</td></tr><tr><td>MD5</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA1</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA256</td><td></td><td>MD5 checksum</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Install a <code>hello-world</code> software module.</p><p><strong>Topic:</strong> <code>command//edge:device/req//install</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;softwareModules&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;softwareModule&#34;</span>:{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;install-hello&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;artifacts&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;checksums&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA256&#34;</span>:<span style=color:#a50>&#34;db954c633393c1402f145a60fd58d312f5af96ce49422fcfd6ce42a3c4cceeca&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;MD5&#34;</span>:<span style=color:#a50>&#34;8c5a0fa2c01e218262d672bf643652fd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA1&#34;</span>:<span style=color:#a50>&#34;7539b451d818d94bcd97d401a5467b3e1c0b8981&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;download&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;HTTPS&#34;</span>:{
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;url&#34;</span>:<span style=color:#a50>&#34;https://github.com/eclipse-kanto/kanto/raw/main/quickstart/install_hello.sh&#34;</span>
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;filename&#34;</span>:<span style=color:#a50>&#34;install.sh&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;size&#34;</span>:<span style=color:#099>544</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		]
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation install software modules</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the install software modules operation.</p><p><strong>Topic:</strong> `command//edge:device/res//install``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=download><strong>Download</strong></h2><p>Download software modules.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//download</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/download</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/download</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>download</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td>JSON representation of the software modules that will be downloaded</td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Remove the software modules forcefully</td></tr><tr><td><strong>softwareModules</strong></td><td></td><td>An array of software modules that will be downloaded</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td><strong>softwareModule</strong></td><td></td><td>A unique identifier for the software module</td></tr><tr><td>name</td><td></td><td>The name of the software module</td></tr><tr><td>version</td><td></td><td>The version of the software module</td></tr><tr><td><strong>artifacts</strong></td><td></td><td>An array of artifacts contained in the software module</td></tr><tr><td>filename</td><td></td><td>The file name of the artifact</td></tr><tr><td>size</td><td></td><td>Artifact file size in bytes</td></tr><tr><td><strong>download</strong></td><td></td><td>A map with protocols and links for downloading the artifacts</td></tr><tr><td>key</td><td>HTTP/HTTPS/FTP/SFTP</td><td>Available transport protocols</td></tr><tr><td>url</td><td></td><td>URL to download the artifact</td></tr><tr><td>md5url</td><td></td><td>MD5URL to download the MD5SUM file</td></tr><tr><td><strong>checksums</strong></td><td></td><td>A map with checksums to verify the proper download</td></tr><tr><td>MD5</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA1</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA256</td><td></td><td>MD5 checksum</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Download a hello-world software module.</p><p><strong>Topic:</strong> <code>command//edge:device/req//download</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;softwareModules&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;softwareModule&#34;</span>:{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;install-hello&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;artifacts&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;checksums&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA256&#34;</span>:<span style=color:#a50>&#34;db954c633393c1402f145a60fd58d312f5af96ce49422fcfd6ce42a3c4cceeca&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;MD5&#34;</span>:<span style=color:#a50>&#34;8c5a0fa2c01e218262d672bf643652fd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA1&#34;</span>:<span style=color:#a50>&#34;7539b451d818d94bcd97d401a5467b3e1c0b8981&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;download&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;HTTPS&#34;</span>:{
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;url&#34;</span>:<span style=color:#a50>&#34;https://github.com/eclipse-kanto/kanto/raw/main/quickstart/install_hello.sh&#34;</span>
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;filename&#34;</span>:<span style=color:#a50>&#34;install.sh&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;size&#34;</span>:<span style=color:#099>544</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//download</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/download</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/download</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>download</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>download</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful download response.</p><p><strong>Topic:</strong> `command//edge:device/res//download``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-9d38c7f4f5116dc634462336dcb1b22f>4.4 - File Upload</h1><div class=lead>Customize the files transfer to a backend storage.</div></div><div class=td-content><h1 id=pg-ca900b9c63933f0b4aafc84a253b5e30>4.4.1 - File upload configuration</h1><div class=lead>Customize the files transfer to a backend storage.</div><h3 id=properties>Properties</h3><p>To control all aspects of the file upload behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>AutoUploadable</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>type</td><td>string</td><td>file</td><td>Type of the files that are uploaded by this feature</td></tr><tr><td>context</td><td>string</td><td>edge</td><td>Context of the files that are uploaded by this feature, unique in the scope of the <code>type</code></td></tr><tr><td>files</td><td>string</td><td></td><td>Glob pattern to select the files for upload</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction on files that can be dynamically selected for an upload, the supported modes are: strict, lax and scoped</td></tr><tr><td>singleUpload</td><td>bool</td><td>false</td><td>Forbid triggering of new uploads when there is an upload in progress</td></tr><tr><td>checksum</td><td>bool</td><td>false</td><td>Send MD5 checksum for uploaded files to ensure data integrity</td></tr><tr><td>stopTimeout</td><td>string</td><td>30s</td><td>Time to wait for running uploads to finish as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td>delete</td><td>bool</td><td>false</td><td>Delete successfully uploaded files</td></tr><tr><td><strong>Upload - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure uploads</td></tr><tr><td><strong>Auto upload</strong></td><td></td><td></td><td></td></tr><tr><td>active</td><td>bool</td><td>false</td><td>Activate periodic uploads</td></tr><tr><td>activeFrom</td><td>string</td><td></td><td>Time from which periodic uploads should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) current time will be used as start of the periodic uploads</td></tr><tr><td>activeTill</td><td>string</td><td></td><td>Time till which periodic uploads should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) periodic uploads will be active indefinitely</td></tr><tr><td>period</td><td>string</td><td>10h</td><td>Upload period as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the file upload will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/file-upload.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets the file type to log.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;files&#34;</span>: <span style=color:#a50>&#34;/var/tmp/file-upload/*.*&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/file-upload/file-upload.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;AutoUploadable&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;file&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;context&#34;</span>: <span style=color:#a50>&#34;edge&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;files&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;singleUpload&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;checksum&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;stopTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;delete&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;active&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;activeFrom&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;activeTill&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;period&#34;</span>: <span style=color:#a50>&#34;10h&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/file-upload.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3e671f908383d295c4130420c45793ae>4.4.2 - File Upload API</h1><div class=lead>The file upload service provides the ability to start, trigger, cancel, activate or deactivate upload of the file.</div><h2 id=start><strong>Start</strong></h2><p>Start a file upload operation.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/start</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the uploaded file</td></tr><tr><td><strong>options</strong></td><td></td><td>Options are specific for each provider</td></tr><tr><td>storage.provider</td><td>aws/azure/generic</td><td>Storage provider that will be used for uploading the files</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Start uploading a file.</p><p><strong>Topic:</strong> <code>command//edge:device/req//start</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.access.key.id&#34;</span>:<span style=color:#a50>&#34;AWSACCESSKEYID&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.region&#34;</span>:<span style=color:#a50>&#34;eu-central-1&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.s3.bucket&#34;</span>:<span style=color:#a50>&#34;blob-upload-test&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.secret.access.key&#34;</span>:<span style=color:#a50>&#34;AWSSECRETACCESSKEY&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;storage.provider&#34;</span>:<span style=color:#a50>&#34;aws&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/start</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation start upload the file</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>start</code> file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//start``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=trigger><strong>Trigger</strong></h2><p>Trigger a file upload operation.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//trigger</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/trigger</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/trigger</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>trigger</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the triggered file</td></tr><tr><td><strong>options</strong></td><td></td><td>Options are specific for each provider</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Trigger a file upload operation.</p><p><strong>Topic:</strong> <code>command//edge:device/req//trigger</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;other &lt;UUID&gt;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//trigger</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/trigger</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/trigger</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>trigger</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>trigger</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>trigger</code> operation.</p><p><strong>Topic:</strong> `command//edge:device/res//trigger``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=cancel><strong>Cancel</strong></h2><p>Cancel a file upload operation.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//cancel</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/cancel</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/cancel</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>cancel</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the uploaded file</td></tr><tr><td>statusCode</td><td></td><td>This status code is set to update status code</td></tr><tr><td>message</td><td></td><td>This message is set to update status message</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Cancel a file upload operation.</p><p><strong>Topic:</strong> <code>command//edge:device/req//cancel</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;statusCode&#34;</span>: <span style=color:#099>400</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;message&#34;</span>:<span style=color:#a50>&#34;description why the upload is canceled &#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//cancel</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/cancel</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/cancel</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>cancel</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation <code>cancel</code> file upload</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the cancel file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//cancel``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=activate><strong>Activate</strong></h2><p>Activate an upload of a file.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//activate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/activate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/activate</code></td><td>A path that references a part of a Thing which is affected by this message</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>from</td><td></td><td>A Time after which the upload must be activated</td></tr><tr><td>to</td><td></td><td>A Time grater than <code>from</code> marks the end of activated</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Activate file upload.</p><p><strong>Topic:</strong> <code>command//edge:device/req//activate</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;from&#34;</span>:<span style=color:#099>957139200</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;to&#34;</span>:<span style=color:#099>959817599</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//activate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/activate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/activate</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>activate</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation <code>activate</code> file upload</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an activate file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//activate``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=deactivate><strong>Deactivate</strong></h2><p>Deactivate a file upload.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//deactivate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/deactivate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/deactivate</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>deactivate</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Deactivate a file upload.</p><p><strong>Topic:</strong> <code>command//edge:device/req//deactivate</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>0/res//deactivate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/deactivate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/deactivate</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>deactivate</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation <code>deactivate</code> file upload</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of the <code>deactivate</code> file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//deactivate``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-84e5886ae702fe90cbd5bba81b089dae>4.5 - File Backup</h1><div class=lead>Customize the files backup and restore to and from a backend storage.</div></div><div class=td-content><h1 id=pg-290fdafe0927e4ac6fe74cc82c6af513>4.5.1 - File backup configuration</h1><div class=lead>Customize the files backup and restore to and from a backend storage.</div><h3 id=properties>Properties</h3><p>To control all aspects of the file backup behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>BackupAndRestore</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>type</td><td>string</td><td>file</td><td>Type of the files that are backed up by this feature</td></tr><tr><td>context</td><td>string</td><td>edge</td><td>Context of the files backed up by this feature, unique in the scope of the <code>type</code></td></tr><tr><td>dir</td><td>string</td><td></td><td>Directory to be backed up</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction on directories that can be dynamically selected for a backup, the supported modes are: strict, lax and scoped</td></tr><tr><td>backupCmd</td><td>string</td><td></td><td>Command to be executed before the backup is done</td></tr><tr><td>restoreCmd</td><td>string</td><td></td><td>Command to be executed after the restore</td></tr><tr><td>singleUpload</td><td>bool</td><td>false</td><td>Forbid triggering of new backups when there is a backup in progress</td></tr><tr><td>checksum</td><td>bool</td><td>false</td><td>Send MD5 checksum for backed up files to ensure data integrity</td></tr><tr><td>stopTimeout</td><td>string</td><td>30s</td><td>Time to wait for running backups to finish as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td>keepUploaded</td><td>bool</td><td>false</td><td>Keep successfully uploaded backups locally</td></tr><tr><td>storage</td><td>string</td><td>./storage</td><td>Directory where backups and downloads will be stored</td></tr><tr><td><strong>Upload/Download - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure uploads and downloads</td></tr><tr><td><strong>Auto backup</strong></td><td></td><td></td><td></td></tr><tr><td>active</td><td>bool</td><td>false</td><td>Activate periodic backups</td></tr><tr><td>activeFrom</td><td>string</td><td></td><td>Time from which periodic backups should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) current time will be used as start of the periodic backups</td></tr><tr><td>activeTill</td><td>string</td><td></td><td>Time till which periodic backups should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) periodic backups will be active indefinitely</td></tr><tr><td>period</td><td>string</td><td>10h</td><td>Backup period as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the file backup will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/file-backup.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that enables backing up a directory and sets the file type to config.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;config&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;dir&#34;</span>: <span style=color:#a50>&#34;/var/tmp/file-backup&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;scoped&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storage&#34;</span>: <span style=color:#a50>&#34;/var/lib/file-backup&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/file-backup/file-backup.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible.</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;BackupAndRestore&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;file&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;context&#34;</span>: <span style=color:#a50>&#34;edge&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;dir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;backupCmd&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;restoreCmd&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;singleUpload&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;checksum&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;stopTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;keepUploaded&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;storage&#34;</span>: <span style=color:#a50>&#34;./storage&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;active&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;activeFrom&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;activeTill&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;period&#34;</span>: <span style=color:#a50>&#34;10h&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/file-backup.log&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-7559fb3ffc69ee07f9345429fd1560b5>4.5.2 - File Backup API</h1><div class=lead>The file backup service allows you to backup and restore data to and from a backend storage.</div><h2 id=backup><strong>Backup</strong></h2><p>Create a file backup.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//backup</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/backup</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/inbox/messages/backup</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>backup</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>UUID</td><td>Identifier of the backup file</td></tr><tr><td>providers</td><td></td><td>The providers of the restore command</td></tr><tr><td><strong>options</strong></td><td></td><td></td></tr><tr><td>backup.dir</td><td></td><td>A local directory, to be backed up</td></tr><tr><td>https.url</td><td></td><td>The URL for restoring the backed up directory</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Back up a directory.</p><p><strong>Topic:</strong> <code>command//edge:device/req//backup</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/inbox/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;providers&#34;</span>:{},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;backup.dir&#34;</span>:<span style=color:#a50>&#34;/var/tmp/backup&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;https.url&#34;</span>:<span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//backup</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/backup</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/outbox/messages/backup</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>backup</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>backup</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>backup</code> operation.</p><p><strong>Topic:</strong> `command//edge:device/res//backup``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/outbox/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=restore><strong>Restore</strong></h2><p>Restore the backed up files or directory from a backend service.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//restore</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/restore</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/inbox/messages/restore</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>restore</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the restored file</td></tr><tr><td>providers</td><td></td><td>Storage provider, one of <code>aws</code>, <code>azure</code>, <code>generic</code></td></tr><tr><td><strong>options</strong></td><td></td><td>Options are specific for each provider</td></tr><tr><td>backup.dir</td><td></td><td>A local directory, which to be backed up and then uploaded, using a storage provider of choice and temporary credentials</td></tr><tr><td>https.url</td><td></td><td>The URL for restoring the backed up directory</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Restore a backup from a storage provider.</p><p><strong>Topic:</strong> <code>command//edge:device/req//restore</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/inbox/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;providers&#34;</span>:{},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;backup.dir&#34;</span>:<span style=color:#a50>&#34;/var/tmp/backup&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;https.url&#34;</span>:<span style=color:#a50>&#34;https://raw.githubusercontent.com/eclipse-kanto/container-management/main/containerm/pkg/testutil/config/&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//restore</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/restore</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/outbox/messages/restore</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>restore</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation restore</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful <code>restore</code> operation.</p><p><strong>Topic:</strong> `command//edge:device/res//restore``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/outbox/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-9e75257ab5f9aee5b02ba95678c80a00>4.6 - System Metrics</h1><div class=lead>Customize the reporting of system metrics.</div></div><div class=td-content><h1 id=pg-a6c68d347ea5a9f2fae78240687edde1>4.6.1 - System metrics configuration</h1><div class=lead>Customize the reporting of system metrics.</div><h3 id=properties>Properties</h3><p>To control all aspects of the system metrics behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>frequency</td><td>string</td><td></td><td>Initial system metrics reporting frequency as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the system metrics will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>clientCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>clientKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/system-metrics.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that enables the auto reporting of system metrics.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>: <span style=color:#a50>&#34;60s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/system-metrics/system-metrics.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span> : <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cleintKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/system-metrics.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-d1f90cffafa688f363b91bee56938207>4.6.2 - System Metrics API</h1><div class=lead>The system metrics service provides the ability to request and receive metrics data.</div><h2 id=request><strong>Request</strong></h2><p>Request to receive metrics data.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/inbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>frequency</td><td></td><td>Time interval of how often the metrics data will be published as duration string (e.g. 5s)</td></tr><tr><td><strong>filter</strong></td><td></td><td>Filter defines the type of metric data to be reported</td></tr><tr><td>id</td><td></td><td>An array of identifiers whose metric data to be reported, supported are: <code>cpu.utilization</code>, <code>memory.utilization</code>, <code>memory.total</code>, <code>memory.used</code>, <code>io.readBytes</code>, <code>io.writeBytes</code>, <code>net.readBytes</code>, <code>net.writeBytes</code>, <code>pids</code></td></tr><tr><td>originator</td><td></td><td>Metrics data originator</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Request metrics data with specified filter and frequency.</p><p><strong>Topic:</strong> <code>command//edge:device/req//request</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/inbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;filter&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:[<span style=color:#a50>&#34;io.*&#34;</span>,<span style=color:#a50>&#34;cpu.*&#34;</span>,<span style=color:#a50>&#34;memory.*&#34;</span>],
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;SYSTEM&#34;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>:<span style=color:#a50>&#34;5s&#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation request the metrics data</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>request</code> metrics message.</p><p><strong>Topic:</strong> `command//edge:device/res//request``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=data><strong>Data</strong></h2><p>Metrics data reported by the device.</p><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//data</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/data</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/data</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and metrics data</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td><strong>Value</strong></td><td></td><td>The value of the received data from the device in json format</td></tr><tr><td>timestamp</td><td></td><td>The timestamp in ms when this measure data is published</td></tr><tr><td><strong>snapshot</strong></td><td></td><td>All the measurements collected at a concrete time per originator</td></tr><tr><td>originator</td><td></td><td>The originator for whose metric data to be reported</td></tr><tr><td><strong>measurements</strong></td><td></td><td>An array of measurements identifier and value for originator</td></tr><tr><td>id</td><td></td><td>The identifier whose metric data to be reported, supported are: cpu.utilization, cpu.load1, cpu.load5, cpu.load15, memory.utilization, memory.total, memory.available, memory.used, io.readBytes, io.writeBytes</td></tr><tr><td>value</td><td></td><td>The measured value per metric ID</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Metrics data from the device.</p><p><strong>Topic:</strong> `command//edge:device/res//data``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;snapshot&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;SYSTEM&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;measurements&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>1.1555555555484411</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.load1&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.17</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.load5&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.27</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.load15&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.24</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.total&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>10371616768</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.available&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>5281644544</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.used&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>4563206144</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>43.99705702662538</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;timestamp&#34;</span>:<span style=color:#099>1234567890</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-2c5a03ed5bfeb95bab2eb24b32a3e2ab>4.7 - Update Manager</h1><div class=lead>The kanto update manager service provides orchestration of OTA Updates towards a target device in a smart way.</div></div><div class=td-content><h1 id=pg-aa8ed68920984e8aaf115be9f72d2e4b>4.7.1 - Update Manager API</h1><div class=lead>The kanto update manager service provides orchestration of OTA Updates towards a target device in a smart way.</div><h2 id=apply><strong>Apply</strong></h2><p>Applies a <a href=https://github.com/eclipse-kanto/update-manager/blob/main/docs/desired-state-specification.md>desired state</a> to the device.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//apply</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/apply</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/inbox/messages/apply</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>apply</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>activityId</td><td></td><td>The activity id of the new desired state</td></tr><tr><td><strong>desiredState</strong></td><td></td><td>The <a href=https://github.com/eclipse-kanto/update-manager/blob/main/docs/desired-state-specification.md>desired state</a> to be applied on a device</td></tr><tr><td><strong>baselines</strong></td><td></td><td>An array of domain or cross-domain dependencies between components</td></tr><tr><td>title</td><td></td><td>The title of the dependency</td></tr><tr><td>description</td><td></td><td>The description of the dependency</td></tr><tr><td>preconditions</td><td></td><td>The preconditions of the dependency</td></tr><tr><td>components</td><td></td><td>An array of the components of the dependency</td></tr><tr><td><strong>domains</strong></td><td></td><td>An array of desired state for a single domain</td></tr><tr><td>id</td><td></td><td>The id of this domain</td></tr><tr><td><strong>config</strong></td><td></td><td>An array of key/value string pair</td></tr><tr><td>key</td><td></td><td>The key string</td></tr><tr><td>value</td><td></td><td>The value of the key string</td></tr><tr><td><strong>components</strong></td><td></td><td>An array of desired state component with additional key-value configuration pairs</td></tr><tr><td>id</td><td></td><td>The id of the component</td></tr><tr><td>version</td><td></td><td>The version of the component</td></tr><tr><td>key</td><td></td><td>The key string</td></tr><tr><td>value</td><td></td><td>The value of the key string</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Apply a desired state to the device.</p><p><strong>Topic:</strong> <code>command//edge:device/req//apply</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/UpdateManager/inbox/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;activityId&#34;</span>: <span style=color:#a50>&#34;d91ad6fe-9b0c-4549-bf31-17d0a71b61de&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;desiredState&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;baselines&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;title&#34;</span>: <span style=color:#a50>&#34;simple-baseline&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;description&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;precondition&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;components&#34;</span>: [
</span></span><span style=display:flex><span>						<span style=color:#a50>&#34;domain:component1&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#a50>&#34;domain:component2&#34;</span>
</span></span><span style=display:flex><span>					]
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;domains&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;containers&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;source&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;value&#34;</span>
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					],
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;components&#34;</span>: [
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;containers:influxdb&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>: <span style=color:#a50>&#34;2.7.1&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>								{
</span></span><span style=display:flex><span>									<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;image&#34;</span>,
</span></span><span style=display:flex><span>									<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;docker.io/library/influxdb:$influxdb_version&#34;</span>
</span></span><span style=display:flex><span>								}
</span></span><span style=display:flex><span>							]
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					]
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//apply</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/apply</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/outbox/messages/apply</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>apply</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation apply</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an <code>apply</code> desired state operation.</p><p><strong>Topic:</strong> <code>command//edge:device/res//apply</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>: <span style=color:#a50>&#34;edge/device/things/live/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>: <span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>: <span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: <span style=color:#a50>&#34;/features/UpdateManager/outbox/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=refresh><strong>Refresh</strong></h2><p>Reads the <a href=https://github.com/eclipse-kanto/update-manager/blob/main/docs/current-state-specification.md>current state</a> from the device and updates the status of the <code>UpdateManager</code> feature.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//refresh</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/refresh</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/inbox/messages/refresh</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>refresh</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>activityId</td><td></td><td>The activity id of the <code>refresh</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Update the status of the <code>UpdateManager</code> feature.</p><p><strong>Topic:</strong> <code>command//edge:device/req//refresh</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>: <span style=color:#a50>&#34;edge/device/things/live/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34; application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>: <span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: <span style=color:#a50>&#34;/features/UpdateManager/inbox/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;activityId&#34;</span>: <span style=color:#a50>&#34;e08b071c-c19e-41de-8da0-e2843113161f&#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//refresh</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/refresh</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/outbox/messages/refresh</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>refresh</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>refresh</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>refresh</code> operation.</p><p><strong>Topic:</strong> <code>command//edge:device/res//refresh</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>: <span style=color:#a50>&#34;edge/device/things/live/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>: <span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>: <span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: <span style=color:#a50>&#34;/features/UpdateManager/outbox/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-33034280392f17e986def02436a6d904>4.7.2 - Update manager configuration</h1><div class=lead>Customize the update manager.</div><h3 id=properties>Properties</h3><p>To control all aspects of the update manager.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>General</strong></td><td></td><td></td><td></td></tr><tr><td>domain</td><td>string</td><td>device</td><td>The domain of the update manager, used as MQTT topic prefix</td></tr><tr><td>domains</td><td>string</td><td>containers</td><td>A comma-separated list of domains handled by the update manager. This configuration option is available only as a flag, but not inside the JSON config file. In JSON config file, the keys inside the Domain agents structure serve as domain names.</td></tr><tr><td>phaseTimeout</td><td>string</td><td>10m</td><td>Timeout as duration string for completing an Update Orchestration phase</td></tr><tr><td>rebootAfter</td><td>string</td><td>30s</td><td>Time period as duration string to wait before a reboot process is initiated after successful update operation</td></tr><tr><td>rebootEnabled</td><td>bool</td><td>true</td><td>Enable the reboot process after successful update operation</td></tr><tr><td>reportFeedbackInterval</td><td>string</td><td>1m</td><td>Time interval as duration string for reporting intermediate desired state feedback messages during an active update operation</td></tr><tr><td>currentStateDelay</td><td>string</td><td>30s</td><td>Time interval as duration string for reporting current state messages</td></tr><tr><td>thingsEnabled</td><td>bool</td><td>true</td><td>Enable the Update Manager to behave as a thing&rsquo;s feature</td></tr><tr><td>ownerConsentCommands</td><td>[]string</td><td></td><td>List of commands for which an owner consent should be granted. Possible values are: &lsquo;DOWNLOAD&rsquo;, &lsquo;UPDATE&rsquo;, &lsquo;ACTIVATE&rsquo;</td></tr><tr><td>ownerConsentTimeout</td><td>string</td><td>30m</td><td>Timeout as duration string to wait for owner consent"</td></tr><tr><td><strong>Domain agents</strong></td><td></td><td></td><td>Holds a map structure (<em>agents</em>) with update agent configurations where each map key is treated as domain name</td></tr><tr><td>readTimeout</td><td>string</td><td>1m</td><td>Timeout as duration string for reading the current state for the domain</td></tr><tr><td>rebootRequired</td><td>bool</td><td>false</td><td>Require a reboot for the domain after successful update</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the container manager will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>keepAlive</td><td>string</td><td>20s</td><td>Keep alive duration for the MQTT requests as duration string</td></tr><tr><td>disconnectTimeout</td><td>string</td><td>250ms</td><td>Disconnect timeout for the MQTT server/broker as duration string</td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>acknowledgeTimeout</td><td>string</td><td>15s</td><td>Acknowledge timeout for the MQTT requests as duration string</td></tr><tr><td>connectTimeout</td><td>string</td><td>30s</td><td>Connect timeout for the MQTT server/broker as duration string</td></tr><tr><td>subscribeTimeout</td><td>string</td><td>15s</td><td>Subscribe timeout for the MQTT requests as duration string</td></tr><tr><td>unsubscribeTimeout</td><td>string</td><td>5s</td><td>Unsubscribe timeout for the MQTT requests as duration string</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td></td><td>Path to the file where the update manager’s log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>An example for configuring the update manager with two domains - <code>containers</code> and <code>custom-domain</code>, report feedback interval at 30 seconds, and log, written to custom log file <code>update-manager.log</code> with
log level <code>DEBUG</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;update-manager.log&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;DEBUG&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;agents&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;readTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;custom-domain&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;rebootRequired&#34;</span>: <span style=color:#00a>true</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;reportFeedbackInterval&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;domain&#34;</span>: <span style=color:#a50>&#34;device&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;agents&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;rebootRequired&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;readTimeout&#34;</span>: <span style=color:#a50>&#34;1m&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;connection&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;keepAlive&#34;</span>: <span style=color:#a50>&#34;20s&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;acknowledgeTimeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;connectTimeout&#34;</span>: <span style=color:#a50>&#34;30a&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;disconnectTimeout&#34;</span>: <span style=color:#a50>&#34;250ms&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;subscribeTimeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;unsubscribeTimeout&#34;</span>: <span style=color:#a50>&#34;5s&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;phaseTimeout&#34;</span>: <span style=color:#a50>&#34;10m&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;rebootAfter&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;rebootEnabled&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;reportFeedbackInterval&#34;</span>: <span style=color:#a50>&#34;1m&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;currentStateDelay&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;thingsEnabled&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;ownerConsentCommands&#34;</span>: [<span style=color:#a50>&#34;DOWNLOAD&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Eclipse Kanto project" aria-label="Eclipse Kanto project"><a class=text-white target=_blank rel=noopener href=https://projects.eclipse.org/projects/iot.kanto aria-label="Eclipse Kanto project"><i class="fas fa-external-link-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/eclipse-kanto aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=YouTube aria-label=YouTube><a class=text-white target=_blank rel=noopener href="https://www.youtube.com/watch?v=bMN_ZiUS3Bc" aria-label=YouTube><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=Newsletter aria-label=Newsletter><a class=text-white target=_blank rel=noopener href=https://newsroom.eclipse.org/eclipse-newsletter/2022/february/five-ways-eclipse-kanto-accelerates-iot-edge-development aria-label=Newsletter><i class="fas fa-book-open"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=Releases aria-label=Releases><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/releases aria-label=Releases><i class="fas fa-rocket"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Task board" aria-label="Task board"><a class=text-white target=_blank rel=noopener href=https://github.com/orgs/eclipse-kanto/projects/1 aria-label="Task board"><i class="fas fa-clipboard-list"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://accounts.eclipse.org/mailing-list/kanto-dev aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 The Eclipse Kanto™ Project. All Rights Reserved.</small></div></div><div class=row><div class="col-12 text-center mb-2"><a href=https://eclipse.org/projects/what-is-incubation.php><img class=eclipse-incubation-logo src=https://eclipse.dev/kanto//images/logos/eclipse/eclipse_incubation_horizontal.svg alt=eclipse-incubation-logo>
</a><a href=https://iot.eclipse.org/><img class=eclipse-iot-logo src="https://eclipse.dev/kanto//images/logos/eclipse/new_iot_logo_clr -white.svg" alt=eclipse-iot></a></div></div><div class=row><div class="col-12 text-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org>Eclipse Foundation</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/>Legal</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/raw/main/LICENSE>License</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/security/>Report a Vulnerability</a></small></li></ul></div></div></footer></div><script src=/kanto/js/main.min.71ce084bcf13abbf1fcd942047313f25a70594ce26ec4a6a93ab9a359a8cbf66.js integrity="sha256-cc4IS88Tq78fzZQgRzE/JacFlM4m7Epqk6uaNZqMv2Y=" crossorigin=anonymous></script><script src=/kanto/js/prism.js></script><script src=/kanto/js/tabpane-persist.js></script><script src=//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js></script></body></html>