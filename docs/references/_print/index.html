<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://eclipse.dev/kanto/docs/references/><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/kanto/favicons/favicon.ico><link rel=apple-touch-icon href=/kanto/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/kanto/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/kanto/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/kanto/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/kanto/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/kanto/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/kanto/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/kanto/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/kanto/favicons/android-192x192.png sizes=192x192><title>References | Eclipse Kanto™ | IoT edge software stack</title>
<meta name=description content="Explore customization of Eclipse Kanto.
"><meta property="og:title" content="References"><meta property="og:description" content="Explore customization of Eclipse Kanto.
"><meta property="og:type" content="website"><meta property="og:url" content="https://eclipse.dev/kanto/docs/references/"><meta itemprop=name content="References"><meta itemprop=description content="Explore customization of Eclipse Kanto.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="References"><meta name=twitter:description content="Explore customization of Eclipse Kanto.
"><link rel=preload href=/kanto/scss/main.min.a18aba0e2d7976803148e96cc2d140e57525cec88f2ff9e586327efa4c1a646e.css as=style><link href=/kanto/scss/main.min.a18aba0e2d7976803148e96cc2d140e57525cec88f2ff9e586327efa4c1a646e.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><link rel=stylesheet href=/kanto/css/prism.css></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-dark navbar-color td-navbar"><div class=container-fluid role=navigation><a class=navbar-brand href=/kanto/><span class=navbar-logo><svg id="kanto_logo" data-name="Kanto Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50"><defs><style>.cls-kanto_logo{fill:#fff}</style></defs><title>Eclipse Kanto</title><g transform="translate(0.0,50.0) scale(0.025,-0.025)"><path class="cls-kanto_logo" d="M370 1754c-168-290-306-529-308-533-2-6 557-986 604-1059l14-22h619 619l255 442c327 569 357 622 357 635 0 6-137 246-305 534l-304 524-623 2-623 2-305-525zm780 352c0-2-72-129-161-281-88-152-159-279-157-281s33 14 68 35c255 151 9e2 521 908 521 9 0 182-293 182-308 0-4-219-133-487-287-267-154-485-284-485-290 1-8 930-553 966-568 7-2-140-275-170-316-2-2-222 123-490 278-268 154-490 279-492 276-2-2 66-125 152-274 86-148 156-272 156-275 0-4-80-6-178-6H783L530 768c-139 240-253 442-253 448s114 210 253 452l254 442h183c101 0 183-2 183-4z"/><path class="cls-kanto_logo" d="M2890 1240V520h110 110v236 235l29-3c26-3 50-31 193-233l163-230 128-3c70-1 127 0 127 3s-86 128-191 276c-189 268-191 271-172 292 10 12 96 106 191 208 94 103 172 190 172 193s-60 6-134 6h-135l-158-170c-130-140-163-170-185-170h-28v4e2 4e2H3e3h-110v-720z"/><path class="cls-kanto_logo" d="M5965 1738c-3-18-12-77-20-132-7-54-16-1e2-19-103s-40-15-83-27l-78-22v-64-65l82-3 81-3 4-292c5-323 11-360 71-433 51-61 92-74 245-74h133l-3 67-3 67-80 24c-144 43-145 45-145 381v260l118 3 117 3 3 88 3 87h-121-120v135 135h-90-89l-6-32z"/><path class="cls-kanto_logo" d="M4165 1510c-102-9-236-35-267-51-14-8-18-23-18-74v-65h37c21 0 121 5 224 11 276 16 309 1 309-137v-74h-193c-228 0-277-10-336-69-53-53-71-113-71-234 0-119 12-164 58-217 49-58 102-82 193-88 91-5 158 12 273 69 43 22 80 38 82 36 1-1 12-24 23-50l20-47h86 86l-3 393c-3 385-3 393-26 442-64 139-190 180-477 155zm285-635V770l-27-11c-102-41-176-61-233-66-59-5-69-3-93 18-22 19-29 35-34 79-8 81 10 137 50 155 27 13 170 29 3e2 34l37 1V875z"/><path class="cls-kanto_logo" d="M5225 1486c-33-12-86-39-117-59l-58-37-14 33c-7 19-17 43-20 55-7 20-14 22-92 22h-84v-490-490h105 105v360 359l43 25c99 58 244 83 304 53 61-32 63-47 63-441V520h111 110l-3 378c-4 367-4 379-27 435-30 75-73 124-136 153-70 33-204 33-290 0z"/><path class="cls-kanto_logo" d="M6820 15e2c-96-13-187-63-227-124-43-64-62-128-75-263-13-126-2-288 26-380 49-159 197-231 451-220 239 10 340 82 380 274 17 81 20 318 4 413-24 150-96 243-218 280-76 24-242 34-341 20zm287-206c52-39 66-99 67-279s-10-238-54-280c-33-31-82-45-165-45-135 0-193 40-215 146-17 81-8 346 13 394 33 75 70 90 214 87 96-2 116-5 140-23z"/></svg></span>
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=main_navbar><ul class="navbar-nav me-4 mb-2 mb-lg-0 ps-4 pl-lg-2"><li class="nav-item me-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/><span class=active>Home</span></a></li><li class="nav-item me-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/about/><span>About</span></a></li><li class="nav-item me-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/docs/><span class=active>Documentation</span></a></li><li class="nav-item me-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/community/><span>Community</span></a></li></ul><div class=navbar-nav><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/kanto/offline-search-index.c4d9f5190e81b319a3746109678b816c.json data-offline-search-base-href=/ data-offline-search-max-results=50></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/kanto/docs/references/>Return to the regular view of this page</a>.</p></div><h1 class=title>References</h1><div class=lead>Explore customization of Eclipse Kanto.</div><ul><li>1: <a href=#pg-1e43023a48407cfe64feb18a5509a0e0>Remote connectivity configuration</a></li><ul><li>1.1: <a href=#pg-4f33a938f47417e037b21a19a6c0028e>AWS Connector configuration</a></li><li>1.2: <a href=#pg-7644324c298e25d5c07c0085882211ba>Azure Connector configuration</a></li><li>1.3: <a href=#pg-acb76b8bad367952e99f3af2db1c0c2b>Suite connector configuration</a></li><li>1.4: <a href=#pg-3926d661a7ae1c567034b932f3851a4a>Local digital twins configuration</a></li></ul><li>2: <a href=#pg-06af2c208a89b1647c8ccdaa4b0a08d7>Container management configuration</a></li><ul><li>2.1: <a href=#pg-3a1ecf0c4318cf78aef2b1c17e1dfd41>Manager configuration</a></li><li>2.2: <a href=#pg-5ec561ebd13cd31801c37882f826ab0d>Container configuration</a></li><li>2.3: <a href=#pg-86f70e119f54e5f918738ddf3b2df8e5>API Reference</a></li><ul><li>2.3.1: <a href=#pg-9e6d9e03d959ccc1c4cf3a1b8df4dd16>Container Factory API</a></li><li>2.3.2: <a href=#pg-d92b0c2d8055aa885d88d167e96c76bb>Container API</a></li><li>2.3.3: <a href=#pg-a06f881f26a5aaab4f513dd987342133>Metrics API</a></li><li>2.3.4: <a href=#pg-a87803cbe8a7f247e049f3f168b5dec9>Software Updatable API</a></li></ul><li>2.4: <a href=#pg-872c561eb6735f729f4b50e9127140d4>Container configuration as Desired State component</a></li></ul><li>3: <a href=#pg-5743bc867ec5e301d16f987251313c8d>Software Updatable</a></li><ul><li>3.1: <a href=#pg-9767bb4be0bb151351b0ddd78b022cca>Software update configuration</a></li><li>3.2: <a href=#pg-2c8e931dc6982e84bbb9b080f0132227>Software Updatable API</a></li></ul><li>4: <a href=#pg-9d38c7f4f5116dc634462336dcb1b22f>File Upload</a></li><ul><li>4.1: <a href=#pg-ca900b9c63933f0b4aafc84a253b5e30>File upload configuration</a></li><li>4.2: <a href=#pg-3e671f908383d295c4130420c45793ae>File Upload API</a></li></ul><li>5: <a href=#pg-84e5886ae702fe90cbd5bba81b089dae>File Backup</a></li><ul><li>5.1: <a href=#pg-290fdafe0927e4ac6fe74cc82c6af513>File backup configuration</a></li><li>5.2: <a href=#pg-7559fb3ffc69ee07f9345429fd1560b5>File Backup API</a></li></ul><li>6: <a href=#pg-9e75257ab5f9aee5b02ba95678c80a00>System Metrics</a></li><ul><li>6.1: <a href=#pg-a6c68d347ea5a9f2fae78240687edde1>System metrics configuration</a></li><li>6.2: <a href=#pg-d1f90cffafa688f363b91bee56938207>System Metrics API</a></li></ul><li>7: <a href=#pg-2c5a03ed5bfeb95bab2eb24b32a3e2ab>Update Manager</a></li><ul><li>7.1: <a href=#pg-aa8ed68920984e8aaf115be9f72d2e4b>Update Manager API</a></li><li>7.2: <a href=#pg-33034280392f17e986def02436a6d904>Update manager configuration</a></li></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-1e43023a48407cfe64feb18a5509a0e0>1 - Remote connectivity configuration</h1><div class=lead>Customize the remote connectivity and automatic provisioning.</div></div><div class=td-content><h1 id=pg-4f33a938f47417e037b21a19a6c0028e>1.1 - AWS Connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the aws connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>topicFilter</td><td>string ​</td><td></td><td>Regex filter used to block incoming messages by their topic</td></tr><tr><td>payloadFilters</td><td>string ​</td><td></td><td>Regex filters used to exclude parts of the incoming messages payload</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td></td><td>Address of the MQTT endpoint that the connector will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>tenantId</td><td>string</td><td>default-tenant-id</td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>alpn</td><td>string[]</td><td></td><td>TLS application layer protocol negotiation options space separated for cloud access</td></tr><tr><td>caCert</td><td>string</td><td>aws.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the aws connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>logs/aws-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;tls://&lt;AWS-endpoint-address&gt;:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;AmazonRootCA1.pem&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;example-device.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;example-device.key&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/aws-connector/aws-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;topicFilter&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;payloadFilters&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;default-tenant-id&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;alpn&#34;</span> : [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;aws.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;logs/aws-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-7644324c298e25d5c07c0085882211ba>1.2 - Azure Connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the azure connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>tenantId</td><td>string</td><td>defaultTenant</td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>connectionString</td><td>string ​</td><td></td><td>The connection string for connectivity to Azure IoT Hub, the format is: <code>"HostName=newHostName.azure-devices.net;DeviceId=deviceId;SharedAccessKey=accessKey"</code></td></tr><tr><td>sasTokenValidity</td><td>string</td><td>1h</td><td>The validity period for the generated SAS token for device authentication. Positive integer number followed by a unit suffix, such as &lsquo;300m&rsquo;, &lsquo;1h&rsquo;, etc., time units are: m, h, d</td></tr><tr><td>idScope</td><td>string</td><td></td><td>ID scope for Azure Device Provisioning service</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>alpn</td><td>string[]</td><td></td><td>TLS application layer protocol negotiation options space separated for cloud access</td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the azure connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>logs/azure-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;connectionString&#34;</span>: <span style=color:#a50>&#34;HostName=hostName.azure-devices.net;DeviceId=deviceId;SharedAccessKey=cGFzc3AvcKQ=&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/azure-connector/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/azure-connector/azure-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;defaultTenant&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;connectionString&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;sasTokenValidity&#34;</span>: <span style=color:#a50>&#34;1h&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;idScope&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;alpn&#34;</span> : [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;logs/azure-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-acb76b8bad367952e99f3af2db1c0c2b>1.3 - Suite connector configuration</h1><div class=lead>Customize the remote connectivity.</div><h3 id=properties>Properties</h3><p>To control all aspects of the suite connector behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the suite connector will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>username</td><td>string</td><td></td><td>MQTT username that is a part of the credentials. This parameter takes precedence over authId and tenantId</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td>generic</td><td>bool</td><td></td><td>Force use of modified topics for cloud access</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>alpn</td><td>string[]</td><td></td><td>TLS application layer protocol negotiation options space separated for cloud access</td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the suite connector will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/suite-connector.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to connect the publicly available
<a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/suite-connector/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/suite-connector/suite-connector.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;generic&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;alpn&#34;</span> : [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/suite-connector.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3926d661a7ae1c567034b932f3851a4a>1.4 - Local digital twins configuration</h1><div class=lead>Customize the local digital twins persistency, access and synchronization.</div><h3 id=properties>Properties</h3><p>To control all aspects of the local digital twins behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>thingsDb</td><td>string</td><td>things.db</td><td>Path to the file where digital twins will be stored</td></tr><tr><td><strong>Remote connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>address</td><td>string</td><td>mqtts://mqtt.bosch-iot-hub.com:8883</td><td>Address of the MQTT endpoint that the local digital twins will connect for the remote communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>deviceId</td><td>string</td><td></td><td>Device unique identifier</td></tr><tr><td>authId</td><td>string</td><td></td><td>Authentication unique identifier that is a part of the credentials</td></tr><tr><td>tenantId</td><td>string</td><td></td><td>Tenant unique identifier that the device belongs to</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>clientId</td><td>string</td><td></td><td>MQTT client unique identifier</td></tr><tr><td>policyId</td><td>string</td><td></td><td>Policy unique identifier of the digital twin</td></tr><tr><td><strong>Remote connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td>iothub.crt</td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT endpoint</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT endpoint</td></tr><tr><td>deviceIdPattern</td><td>string</td><td></td><td>Pattern to generate the device identifier, <code>{{subject-dn}}</code> and <code>{{subject-cn}}</code> placeholders can be part of it</td></tr><tr><td><strong>Remote connectivity - TLS over TPM</strong></td><td></td><td></td><td></td></tr><tr><td>tpmDevice</td><td>string</td><td></td><td>Path to the device file or the unix socket to access the TPM 2.0</td></tr><tr><td>tpmHandle</td><td>int</td><td></td><td>TPM 2.0 storage root key handle, the type is unsigned 64-bit integer</td></tr><tr><td>tpmKeyPub</td><td>string</td><td></td><td>File path to the public part of the TPM 2.0 key</td></tr><tr><td>tpmKey</td><td>string</td><td></td><td>File path to the private part of the TPM 2.0 key</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>localAddress</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the local digital twins will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>localUsername</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>localPassword</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>localCACert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>localCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>localKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/local-digital-twins.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to enable the local digital twins and their synchronization with the publicly available <a href=https://www.eclipse.org/hono/sandbox/ target=_blank>Eclipse Hono sandbox</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;hono.eclipseprojects.io:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;/etc/local-digital-twins/iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto:exampleDevice&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;org.eclipse.kanto_example&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;secret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;thingsDb&#34;</span>: <span style=color:#a50>&#34;/var/lib/local-digital-twins/thing.db&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/local-digital-twins/local-digital-twins.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;thingsDb&#34;</span>: <span style=color:#a50>&#34;things.db&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;address&#34;</span>: <span style=color:#a50>&#34;mqtts://mqtt.bosch-iot-hub.com:8883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;authId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tenantId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;policyId&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;iothub.crt&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deviceIdPattern&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmDevice&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmHandle&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKeyPub&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;tpmKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localAddress&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localUsername&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localPassword&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCACert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;localKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/local-digital-twins.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-06af2c208a89b1647c8ccdaa4b0a08d7>2 - Container management configuration</h1><div class=lead>Customize the deployment and management of containers.</div></div><div class=td-content><h1 id=pg-3a1ecf0c4318cf78aef2b1c17e1dfd41>2.1 - Manager configuration</h1><div class=lead>Customize the container manager components.</div><h3 id=properties>Properties</h3><p>To control all aspects of the container manager behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the container manager data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the container manager&rsquo;s executable artifacts</td></tr><tr><td>container_client_sid</td><td>string</td><td>container-management.service.local.v1.service-containerd-client</td><td>Unique identifier that is used for an interaction with the runtime</td></tr><tr><td>network_manager_sid</td><td>string</td><td>container-management.service.local.v1.service-libnetwork-manager</td><td>Unique identifier that is used for networking</td></tr><tr><td>default_ctrs_stop_timeout</td><td>string</td><td>30s</td><td>Timeout for a container to stop gracefully in duration string format (e.g. 1h2m3s5ms), otherwise its root process will be forcefully stopped</td></tr><tr><td><strong>Runtime</strong></td><td></td><td></td><td></td></tr><tr><td>default_ns</td><td>string</td><td>kanto-cm</td><td>Namespace that is used by the runtime for isolation</td></tr><tr><td>address_path</td><td>string</td><td>/run/containerd/containerd.sock</td><td>Path to the runtime&rsquo;s communication endpoint</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the runtime data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the runtime&rsquo;s executable artifacts</td></tr><tr><td>image_dec_keys</td><td>string[]</td><td></td><td>Private keys (GPG private key ring, JWE or PKCS7) used for decrypting container images, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>image_dec_recipients</td><td>string[]</td><td></td><td>Recipients (only for PKCS7 and must be an x509) used for decrypting container images, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td>runc_runtime</td><td>string</td><td>io.containerd.runc.v2</td><td>Runc communication mode, the possible values are: io.containerd.runtime.v1.linux, io.containerd.runc.v1 and io.containerd.runc.v2</td></tr><tr><td>image_expiry</td><td>string</td><td>744h</td><td>Time period for the cached images and content to be kept in the form of e.g. 72h3m0.5s</td></tr><tr><td>image_expiry_disable</td><td>bool</td><td>false</td><td>Disable expiry management of cached images and content, must be used with caution as it may lead to large memory volumes being persistently allocated</td></tr><tr><td>lease_id</td><td>string</td><td>kanto-cm.lease</td><td>Lease identifier to be used for container resources persistence</td></tr><tr><td>image_verifier_type</td><td>string</td><td>none</td><td>The image verifier type - possible values are none and notation, when set to none image signatures wil not be verified</td></tr><tr><td>image_verifier_config</td><td>map[string]string</td><td></td><td>The configuration of the image verifier, as a string map - possible keys for notation verifier are <code>configDir</code> and <code>libexecDir</code>, for more info check <a href=https://notaryproject.dev/docs/user-guides/how-to/directory-structure/#user-level>notation documentation</a></td></tr><tr><td><strong>Registry access - secure</strong></td><td></td><td></td><td></td></tr><tr><td>user_id</td><td>string</td><td></td><td>User unique identifier to authenticate to the image registry</td></tr><tr><td>password</td><td>string</td><td></td><td>Password to authenticate to the image registry</td></tr><tr><td>root_ca</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>client_cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the image registry</td></tr><tr><td>client_key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the image registry</td></tr><tr><td><strong>Registry access - insecure</strong></td><td></td><td></td><td></td></tr><tr><td>insecure_registries</td><td>string[]</td><td>localhost</td><td>Image registries that do not use valid certificates or do not require a HTTPS connection, the format is: <code>host[:port]</code></td></tr><tr><td><strong>Networking</strong></td><td></td><td></td><td></td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the network manager data</td></tr><tr><td>exec_root_dir</td><td>string</td><td>/var/run/container-management</td><td>Root directory for the network manager&rsquo;s executable artifacts</td></tr><tr><td><strong>Networking - bridge</strong></td><td></td><td></td><td></td></tr><tr><td>name</td><td>string</td><td>kanto-cm0</td><td>Bridge name</td></tr><tr><td>ip4</td><td>string</td><td></td><td>Bridge IPv4 address</td></tr><tr><td>fcidr4</td><td>string</td><td></td><td>IPv4 address range for the bridge, using the standard CIDR notation</td></tr><tr><td>gwip4</td><td>string</td><td></td><td>Bridge gateway IPv4 address</td></tr><tr><td>enable_ip6</td><td>bool</td><td>false</td><td>Permit the bridge IPv6 support</td></tr><tr><td>mtu</td><td>int</td><td>1500</td><td>Bridge maximum transmission unit in bytes</td></tr><tr><td>icc</td><td>bool</td><td>true</td><td>Permit the inter-container communication</td></tr><tr><td>ip_tables</td><td>bool</td><td>true</td><td>Permit the IP tables rules</td></tr><tr><td>ip_forward</td><td>bool</td><td>true</td><td>Permit the IP forwarding</td></tr><tr><td>ip_masq</td><td>bool</td><td>true</td><td>Permit the IP masquerading</td></tr><tr><td>userland_proxy</td><td>bool</td><td>false</td><td>Forbid the userland proxy for the loopback traffic</td></tr><tr><td><strong>Local communication</strong></td><td></td><td></td><td></td></tr><tr><td>protocol</td><td>string</td><td>unix</td><td>Communication protocol used for accessing the gRPC server, the possible values are: tcp, tcp4, tcp6, unix or unixpacket</td></tr><tr><td>address_path</td><td>string</td><td>/run/container-management/container-management.sock</td><td>Path to the gRPC server&rsquo;s communication endpoint</td></tr><tr><td><strong>Digital twin</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the container manager digital twin representation</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the digital twin data</td></tr><tr><td>features</td><td>string[]</td><td>ContainerFactory, SoftwareUpdatable, Metrics</td><td>Features that will be registered for the container manager digital twin, the possible values are: ContainerFactory, SoftwareUpdatable and Metrics</td></tr><tr><td><strong>Update Agent</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the containers update agent service</td></tr><tr><td>domain</td><td>string</td><td>containers</td><td>The domain of the update agent, used as a prefix in MQTT topic handled by the update agent implementation</td></tr><tr><td>containers</td><td>string[]</td><td></td><td>List of system (core) containers that shall not be updated/destroyed by the containers update agent</td></tr><tr><td>verbose_inventory_report</td><td>bool</td><td>false</td><td>Includes extensive, verbose key-value properties in containers software nodes for the current state report. If not set, only valuable and non-default key-value parameters are reported</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker_url</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the container manager will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>keep_alive</td><td>string</td><td>20s</td><td>Keep alive duration for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>disconnect_timeout</td><td>string</td><td>250ms</td><td>Disconnect timeout for the MQTT server/broker, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>client_username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>client_password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>connect_timeout</td><td>string</td><td>30s</td><td>Connect timeout for the MQTT server/broker, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>acknowledge_timeout</td><td>string</td><td>15s</td><td>Acknowledge timeout for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>subscribe_timeout</td><td>string</td><td>15s</td><td>Subscribe timeout for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td>unsubscribe_timeout</td><td>string</td><td>5s</td><td>Unsubscribe timeout for the MQTT requests, duration string format, e.g. 1h2m3s5ms</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>root_ca</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>client_cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>client_key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>log_file</td><td>string</td><td>log/container-management.log</td><td>Path to the file where the container manager&rsquo;s log messages are written</td></tr><tr><td>log_level</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>log_file_count</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>log_file_max_age</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>log_file_size</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr><tr><td>syslog</td><td>bool</td><td>false</td><td>Route logs to the local syslog</td></tr><tr><td><strong>Deployment</strong></td><td></td><td></td><td></td></tr><tr><td>enable</td><td>bool</td><td>true</td><td>Permit the deployment manager service providing installation/update of containers via the container descriptor files</td></tr><tr><td>mode</td><td>string</td><td>update</td><td>Deployment manager mode, the possible values are: init (container descriptors are processed only on first start, new containers are deployed and started), update (container descriptors are processed on each restart, new containers can be deployed and started, existing containers may be updated, no container removals)</td></tr><tr><td>home_dir</td><td>string</td><td>/var/lib/container-management</td><td>Home directory for the deployment manager data</td></tr><tr><td>ctr_dir</td><td>string</td><td>/etc/container-management/containers</td><td>Directory containing descriptors of containers that will be automatically deployed on first start or updated on restart</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets a timeout period of 5 seconds for the managed containers to stop gracefully.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;manager&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ctrs_stop_timeout&#34;</span>: <span style=color:#099>5</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file&#34;</span>: <span style=color:#a50>&#34;/var/log/container-management/container-management.log&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that in the registry configuration the host (used as a key) has to be set instead of the default empty string, the format is: host[:port]</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;manager&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;container_client_sid&#34;</span>: <span style=color:#a50>&#34;container-management.service.local.v1.service-containerd-client&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;network_manager_sid&#34;</span>: <span style=color:#a50>&#34;container-management.service.local.v1.service-libnetwork-manager&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ctrs_stop_timeout&#34;</span>: <span style=color:#099>30</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_ns&#34;</span>: <span style=color:#a50>&#34;kanto-cm&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;address_path&#34;</span>: <span style=color:#a50>&#34;/run/containerd/containerd.sock&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_dec_keys&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_dec_recipients&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;runc_runtime&#34;</span>: <span style=color:#a50>&#34;io.containerd.runc.v2&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_expiry&#34;</span>: <span style=color:#a50>&#34;744h&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_expiry_disable&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_verifier_type&#34;</span>: <span style=color:#a50>&#34;notation&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;image_verifier_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;configDir&#34;</span>: <span style=color:#a50>&#34;/home/user/.config/notation&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;lease_id&#34;</span>: <span style=color:#a50>&#34;kanto-cm.lease&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;registry_configurations&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;credentials&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;user_id&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;transport&#34;</span>: {
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;root_ca&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;client_cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                    <span style=color:#1e90ff;font-weight:700>&#34;client_key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;insecure_registries&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;localhost&#34;</span>
</span></span><span style=display:flex><span>        ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;network&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;exec_root_dir&#34;</span>: <span style=color:#a50>&#34;/var/run/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;default_bridge&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;kanto-cm0&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip4&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;fcidr4&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;enable_ip6&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;mtu&#34;</span>: <span style=color:#099>1500</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;icc&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_tables&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_forward&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;ip_masq&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;userland_proxy&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;grpc_server&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;protocol&#34;</span>: <span style=color:#a50>&#34;unix&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;address_path&#34;</span>: <span style=color:#a50>&#34;/run/container-management/container-management.sock&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;things&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;features&#34;</span>: [
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;ContainerFactory&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;SoftwareUpdatable&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#a50>&#34;Metrics&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;update_agent&#34;</span>: {
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;domain&#34;</span>: <span style=color:#a50>&#34;containers&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;system_containers&#34;</span>: [
</span></span><span style=display:flex><span>             <span style=color:#a50>&#34;my-core-container-that-is-auto-deployed-and-updatable-only-through-firmware-update&#34;</span>
</span></span><span style=display:flex><span>         ],
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;verbose_inventory_report&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;connection&#34;</span>: {
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;broker_url&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;keep_alive&#34;</span>: <span style=color:#a50>&#34;20s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;disconnect_timeout&#34;</span>: <span style=color:#a50>&#34;250ms&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;client_username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;client_password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;connect_timeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;acknowledge_timeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;subscribe_timeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;unsubscribe_timeout&#34;</span>: <span style=color:#a50>&#34;5s&#34;</span>,
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;transport&#34;</span>: {
</span></span><span style=display:flex><span>             <span style=color:#1e90ff;font-weight:700>&#34;root_ca&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>             <span style=color:#1e90ff;font-weight:700>&#34;client_cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>             <span style=color:#1e90ff;font-weight:700>&#34;client_key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>     },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file&#34;</span>: <span style=color:#a50>&#34;log/container-management.log&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_level&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_count&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_size&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_file_max_age&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;syslog&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;deployment&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;enable&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;update&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;home_dir&#34;</span>: <span style=color:#a50>&#34;/var/lib/container-management&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;ctr_dir&#34;</span>: <span style=color:#a50>&#34;/etc/container-management/containers&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5ec561ebd13cd31801c37882f826ab0d>2.2 - Container configuration</h1><div class=lead>Customize the deployment of a container instance.</div><h3 id=properties>Properties</h3><p>To control all aspects of the container instance behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>container_name</td><td>string</td><td>&lt;container_id></td><td>User-defined name for the container, if omitted the internally auto-generated container ID will be set</td></tr><tr><td><strong>Image</strong></td><td></td><td></td><td></td></tr><tr><td>name</td><td>string</td><td></td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td><strong>Image - decryption</strong></td><td></td><td></td><td></td></tr><tr><td>keys</td><td>string[]</td><td></td><td>Private keys (GPG private key ring, JWE or PKCS7) used for decrypting the container&rsquo;s image, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>recipients</td><td>string[]</td><td></td><td>Recipients (only for PKCS7 and must be an x509) used for decrypting the container&rsquo;s image, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td><strong>Networking</strong></td><td></td><td></td><td></td></tr><tr><td>domain_name</td><td>string</td><td>&lt;container_name>-domain</td><td>Domain name inside the container, if omitted the <code>container_name</code> with suffix -domain will be set</td></tr><tr><td>host_name</td><td>string</td><td>&lt;container_name>-host</td><td>Host name for the container, if omitted the <code>container_name</code> with suffix -host will be set</td></tr><tr><td>network_mode</td><td>string</td><td>bridge</td><td>The container&rsquo;s networking capabilities type based on the desired communication mode, the possible options are: bridge or host</td></tr><tr><td>extra_hosts</td><td>string[]</td><td></td><td>Extra host name to IP address mappings added to the container network configuration, the format is: <code>hostname:ip</code>. If the IP of the host machine is to be added to the container&rsquo;s hosts file the reserved host_ip[_&lt;network-interface>] must be provided. If only host_ip (the network-interface part is skipped) is used, by default it will be resolved to the host&rsquo;s IP on the default bridge network interface for containerm (the default configuration is kanto-cm0) and add it to the container&rsquo;s hosts file. If the IP of a container in the same bridge network is to be added to the hosts file the reserved container_&lt;container-host_name> must be provided.</td></tr><tr><td><strong>Networking - port mappings</strong></td><td></td><td></td><td></td></tr><tr><td>proto</td><td>string</td><td>tcp</td><td>Protocol used for the port mapping from the container to the host, the possible options are: tcp and udp</td></tr><tr><td>container_port</td><td>int</td><td></td><td>Port number on the container that is mapped to the host port</td></tr><tr><td>host_ip</td><td>string</td><td>0.0.0.0</td><td>Host IP address</td></tr><tr><td>host_port</td><td>int</td><td></td><td>Beginning of the host ports range</td></tr><tr><td>host_port_end</td><td>int</td><td>&lt;host_port></td><td>Ending of the host ports range</td></tr><tr><td><strong>Host resources - devices</strong></td><td></td><td></td><td></td></tr><tr><td>path_on_host</td><td>string</td><td></td><td>Path to the device on the host</td></tr><tr><td>path_in_container</td><td>string</td><td></td><td>Path to the device in the container</td></tr><tr><td>cgroup_permissions</td><td>string</td><td>rwm</td><td>Cgroup permissions for the device access, possible options are: r(read), w(write), m(mknod) and all combinations are possible</td></tr><tr><td>privileged</td><td>bool</td><td>false</td><td>Grant root capabilities to all devices on the host system</td></tr><tr><td>extra_capabilities</td><td>string[]</td><td></td><td>Add additional Linux capabilities to the container</td></tr><tr><td><strong>Host resources - mount points</strong></td><td></td><td></td><td></td></tr><tr><td>source</td><td>string</td><td></td><td>Path to the file or directory on the host that is referred from within the container</td></tr><tr><td>destination</td><td>string</td><td></td><td>Path to the file or directory that is mounted inside the container</td></tr><tr><td>propagation_mode</td><td>string</td><td>rprivate</td><td>Bind propagation for the mount, supported are: rprivate, private, rshared, shared, rslave or slave</td></tr><tr><td><strong>Process</strong></td><td></td><td></td><td></td></tr><tr><td>env</td><td>string[]</td><td></td><td>Environment variables that are set into the container</td></tr><tr><td>cmd</td><td>string[]</td><td></td><td>Command with arguments that is executed upon the container&rsquo;s start</td></tr><tr><td><strong>I/O</strong></td><td></td><td></td><td></td></tr><tr><td>open_stdin</td><td>bool</td><td></td><td>Open the terminal&rsquo;s standard input for an interaction with the current container</td></tr><tr><td>tty</td><td>bool</td><td></td><td>Attach standard streams to a TTY</td></tr><tr><td><strong>Resource management</strong></td><td></td><td></td><td></td></tr><tr><td>memory</td><td>string</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memory_reservation</td><td>string</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memory_reservation</code> must be smaller than it</td></tr><tr><td>memory_swap</td><td>string</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr><tr><td><strong>Lifecycle</strong></td><td></td><td></td><td></td></tr><tr><td>type</td><td>string</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maximum_retry_count</td><td>int</td><td></td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>retry_timeout</td><td>int</td><td></td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>type</td><td>string</td><td>json-file</td><td>Type in which the logs are produced, the possible options are: json-file or none</td></tr><tr><td>max_files</td><td>int</td><td>2</td><td>Maximum log files before getting rotated</td></tr><tr><td>max_size</td><td>string</td><td>100M</td><td>Maximum log file size before getting rotated as a number with a unit suffix of B, K, M and G</td></tr><tr><td>root_dir</td><td>string</td><td>&lt;meta_path>/containers/&lt;container_id></td><td>Root directory where the container&rsquo;s log messages are stored</td></tr><tr><td>mode</td><td>string</td><td>blocking</td><td>Messaging delivery mode from the container to the log driver, the supported modes are: blocking and non-blocking</td></tr><tr><td>max_buffer_size</td><td>string</td><td>1M</td><td>Maximum size of the buffered container&rsquo;s log messages in a non-blocking mode as a number with a unit suffix of B, K, M and G</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration to spin up an InfluxDB container instance.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;image&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;docker.io/library/influxdb:1.8.4&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case. The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may require property removal</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;container_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;image&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;decrypt_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;keys&#34;</span>: [],
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;recipients&#34;</span>: []
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;domain_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;host_name&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mount_points&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;destination&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;source&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;propagation_mode&#34;</span>: <span style=color:#a50>&#34;rprivate&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;env&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;cmd&#34;</span>: []
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;io_config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;open_stdin&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;tty&#34;</span>: <span style=color:#00a>false</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;host_config&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;devices&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;path_on_host&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;path_in_container&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;cgroup_permissions&#34;</span>: <span style=color:#a50>&#34;rwm&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;network_mode&#34;</span>: <span style=color:#a50>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;privileged&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;extra_hosts&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;extra_capabilities&#34;</span>: [],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;port_mappings&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;proto&#34;</span>: <span style=color:#a50>&#34;tcp&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;container_port&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_ip&#34;</span>: <span style=color:#a50>&#34;0.0.0.0&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_port&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;host_port_end&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory_reservation&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;memory_swap&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;restart_policy&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;unless-stopped&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;maximum_retry_count&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;retry_timeout&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;log_config&#34;</span>: {
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;driver_config&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_files&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_size&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;root_dir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            <span style=color:#1e90ff;font-weight:700>&#34;mode_config&#34;</span>: {
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#1e90ff;font-weight:700>&#34;max_buffer_size&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-86f70e119f54e5f918738ddf3b2df8e5>2.3 - API Reference</h1><div class=lead>API Reference for the Container Management Things service.</div></div><div class=td-content><h1 id=pg-9e6d9e03d959ccc1c4cf3a1b8df4dd16>2.3.1 - Container Factory API</h1><div class=lead>The container factory service provides the ability to create new containers form a container image, or from a <a href=../container-config.md>container configuration</a>.</div><h2 id=create><strong>Create</strong></h2><p>Create a container from a single container image reference with an option to start it.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//create</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/create</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/inbox/messages/create</code></td><td>A path to the <code>ContainerFactory</code> Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>imageRef</td><td>URL</td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td>start</td><td>true/false</td><td>Start or only create the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Create and automatically start a new <code>Hello World</code> container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//create</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/inbox/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;imageRef&#34;</span>:<span style=color:#a50>&#34;docker.io/library/hello-world:latest&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;start&#34;</span>:<span style=color:#00a>true</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//create</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/create</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/outbox/messages/create</code></td><td>A path to the Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td>application/json</td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Value</strong></td><td></td><td>UUID of the created container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a <code>create</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//create``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/outbox/messages/create&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#a50>&#34;&lt;Container UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=create--with-config><strong>Create with config</strong></h2><p>Create a container with a specified container configuration.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//createWithConfig</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/createWithConfig</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/inbox/messages/createWithConfig</code></td><td>A path to the <code>ContainerFactory</code> Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>imageRef</td><td>URL</td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code></td></tr><tr><td>start</td><td>true/false</td><td>Force to start created container</td></tr><tr><td><strong>config</strong></td><td></td><td>json presentation of the configuration</td></tr><tr><td>domainName</td><td></td><td>Domain name inside the container, if omitted the container&rsquo;s domain name will be set to a system-defined value</td></tr><tr><td>hostName</td><td></td><td>Host name for the container, if omitted the container&rsquo;s hostname will be set to a system-defined value</td></tr><tr><td>env</td><td></td><td>An array of environment variables that are set into the container</td></tr><tr><td>cmd</td><td></td><td>An array of command with arguments that is executed upon the container&rsquo;s start</td></tr><tr><td>privileged</td><td>false</td><td>Grant root capabilities to all devices on the host system</td></tr><tr><td>extraHosts</td><td></td><td>An array of additional extra host names to IP address mappings added to the container network configuration, the format is: hostname:ip. If the IP of the host machine is to be added to the container&rsquo;s hosts file the reserved host_ip[<em><network-interface>] must be provided. If only host_ip (the network-interface part is skipped) is used, by default it will be resolved to the host&rsquo;s IP on the default bridge network interface for containerm (the default configuration is kanto-cm0) and add it to the container&rsquo;s hosts file. If the IP of a container in the same bridge network is to be added to the hosts file the reserved container</em>&lt;container-host_name> must be provided.</td></tr><tr><td>extraCapabilities</td><td></td><td>An array of additional capabilities for a container</td></tr><tr><td>networkMode</td><td></td><td>The container&rsquo;s networking capabilities type based on the desired communication mode. The possible options are: bridge or host</td></tr><tr><td>openStdin</td><td>true/false</td><td>Open the terminal&rsquo;s standard input for an interaction with the current container</td></tr><tr><td>tty</td><td>true/false</td><td>Attach standard streams to a TTY</td></tr><tr><td><strong>mountPoints</strong></td><td></td><td>An array of the mount points</td></tr><tr><td>source</td><td></td><td>Path to the file or directory on the host that is referred from within the container</td></tr><tr><td>destination</td><td></td><td>Path to the file or directory that is mounted inside the container</td></tr><tr><td>propagationMode</td><td></td><td>Bind propagation for the mount, supported are: rprivate, private, rshared, shared, rslave or slave</td></tr><tr><td><strong>decryption</strong></td><td></td><td></td></tr><tr><td>keys</td><td></td><td>A string array of private keys (GPG private key ring, JWE or PKCS7) used for decrypting the container&rsquo;s image, the format is: <code>filepath_private_key[:password]</code></td></tr><tr><td>recipients</td><td></td><td>A string array of recipients (only for PKCS7 and must be an x509) used for decrypting the container&rsquo;s image, the format is: <code>pkcs7:filepath_x509_certificate</code></td></tr><tr><td><strong>devices</strong></td><td></td><td>An array of accessible devices from the host</td></tr><tr><td>pathOnHost</td><td></td><td>Path to the device on the host</td></tr><tr><td>pathInContainer</td><td></td><td>Path to the device in the container</td></tr><tr><td>cgroupPermissions</td><td>rwm</td><td>Cgroup permissions for the device access, possible options are: r(read), w(write), m(mknod) and all combinations are possible</td></tr><tr><td><strong>restartPolicy</strong></td><td></td><td>The container restart policy</td></tr><tr><td>type</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maxRetryCount</td><td></td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>retryTimeout</td><td></td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>portMappings</strong></td><td></td><td>An array of port mappings from the host to a container</td></tr><tr><td>proto</td><td>tcp</td><td>Protocol used for the port mapping from the container to the host, the possible options are: tcp and udp</td></tr><tr><td>containerPort</td><td></td><td>Port number on the container that is mapped to the host port</td></tr><tr><td>hostIP</td><td>0.0.0.0</td><td>Host IP address</td></tr><tr><td>hostPort</td><td></td><td>Beginning of the host ports range</td></tr><tr><td>hostPortEnd</td><td>&lt;host_port></td><td>Ending of the host ports range</td></tr><tr><td><strong>log</strong></td><td></td><td></td></tr><tr><td>type</td><td>json-file</td><td>Type in which the logs are produced, the possible options are: json-file or none</td></tr><tr><td>maxFiles</td><td>2</td><td>Maximum log files before getting rotated</td></tr><tr><td>maxSize</td><td>100M</td><td>Maximum log file size before getting rotated as a number with a unit suffix of B, K, M and G</td></tr><tr><td>rootDir</td><td>&lt;meta_path>/containers/&lt;container_id></td><td>Root directory where the container&rsquo;s log messages are stored</td></tr><tr><td>mode</td><td>blocking</td><td>Messaging delivery mode from the container to the log driver, the supported modes are: blocking and non-blocking</td></tr><tr><td>maxBufferSize</td><td>1M</td><td>Maximum size of the buffered container&rsquo;s log messages in a non-blocking mode as a number with a unit suffix of B, K, M and G</td></tr><tr><td><strong>resources</strong></td><td></td><td></td></tr><tr><td>memory</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memoryReservation</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memoryReservation</code> must be smaller than it</td></tr><tr><td>memorySwap</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Create and automatically start a new <code>Hello World</code> container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//createWithConfig</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/inbox/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;imageRef&#34;</span>:<span style=color:#a50>&#34;docker.io/library/influxdb:1.8.4&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;start&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;domainName&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;hostName&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;env&#34;</span>: [],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;cmd&#34;</span>: [],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;privileged&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;extraHosts&#34;</span>: [<span style=color:#a50>&#34;ctrhost:host_ip&#34;</span>],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;extraCapabilities&#34;</span>: [],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;networkMode&#34;</span>: <span style=color:#a50>&#34;bridge&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;openStdin&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;tty&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;mountPoints&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;source&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;destination&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;propagationMode&#34;</span>: <span style=color:#a50>&#34;rprivate&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;decryption&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;keys&#34;</span>: [],
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;recipients&#34;</span>: []
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;devices&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;pathOnHost&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;pathInContainer&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;cgroupPermissions&#34;</span>: <span style=color:#a50>&#34;rwm&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;restartPolicy&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;unless-stopped&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxRetryCount&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;retryTimeout&#34;</span>: <span style=color:#099>0</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;portMappings&#34;</span>:[
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;proto&#34;</span>: <span style=color:#a50>&#34;tcp&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;containerPort&#34;</span>: <span style=color:#099>80</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;hostIP&#34;</span>: <span style=color:#a50>&#34;0.0.0.0&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;hostPort&#34;</span>: <span style=color:#099>5000</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;hostPortEnd&#34;</span>: <span style=color:#099>5005</span>,
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxFiles&#34;</span>: <span style=color:#099>2</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxSize&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;rootDir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;maxBufferSize&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>: {
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;memoryReservation&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;memorySwap&#34;</span>: <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//createWithConfig</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/createWithConfig</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/ContainerFactory/outbox/messages/createWithConfig</code></td><td>A path to the <code>ContainerFactory</code> Feature, it&rsquo;s message channel, and command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td></td></tr><tr><td><strong>Value</strong></td><td></td><td>UUID of the created container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a <code>createWithConfig</code> operation.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/res//createWithConfig</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/ContainerFactory/outbox/messages/createWithConfig&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#a50>&#34;&lt;Container UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-d92b0c2d8055aa885d88d167e96c76bb>2.3.2 - Container API</h1><div class=lead>The container service offers a comprehensive range of operations for managing existing containers. Users can effortlessly start, pause, resume or stop, containers with specific configurations. Additionally, they have the flexibility to rename, update, or remove containers as needed.</div><h2 id=start><strong>Start</strong></h2><p>Start an existing container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/start</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Start an existing container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//start</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/start</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation start over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful <code>start</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//start``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=stop><strong>Stop</strong></h2><p>Stop an existing and running container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//stop</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stop</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/stop</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stop</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Stop an existing and running container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//stop</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//stop</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stop</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/stop</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stop</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation stop over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful stop operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//stop``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/stop&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=stop-with-options><strong>Stop with options</strong></h2><p>Stop an existing and running container with given options.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//stopWithOptions</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stopWithOptions</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/stopWithOptions</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stopWithOptions</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>signal</td><td><code>SIGTERM</code></td><td>Stop a container using a specific signal. Signals could be specified by using their names or numbers, e.g. <code>SIGINT</code> or 2</td></tr><tr><td>timeout</td><td>-1 &#171; 63 // -9223372036854775808</td><td>Sets the timeout period in seconds to gracefully stop the container. When timeout expires the container process would be forcibly killed</td></tr><tr><td>force</td><td>true/false</td><td>Whether to send a SIGKILL signal to the container&rsquo;s process if it does not finish within the timeout specified</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Stop an existing and running container with specified options.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//stopWithOptions</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;signal&#34;</span>:<span style=color:#a50>&#34;SIGINT&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;timeout&#34;</span>: <span style=color:#099>30</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;force&#34;</span>: <span style=color:#00a>true</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//stopWithOptions</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/stopWithOptions</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/stopWithOptions</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>stopWithOptions</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation stop with options over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful the <code>stopWithOptions</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//stopWithOptions``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/stopWithOptions&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=rename><strong>Rename</strong></h2><p>Change the name of an existing container to the specified new name.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//rename</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/rename</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/rename</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>rename</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td>The new name of the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Change the name of an existing container to the specified new name.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//rename</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#a50>&#34;new_container_name&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//rename</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/rename</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/rename</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>rename</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation rename container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the rename operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//rename``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/rename&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=update><strong>Update</strong></h2><p>Update an existing container without recreating it. The provided configurations will be merged with the current one.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//update</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/update</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/update</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>update</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td><strong>restartPolicy</strong></td><td></td><td>Updates the restart policy for the container. The policy will be applied when the container exits</td></tr><tr><td>type</td><td>no/always/unless-stopped/on-failure</td><td>The container&rsquo;s restart policy, the supported types are: always, no, on-failure and unless-stopped</td></tr><tr><td>maxRetryCount</td><td>-1 &#171; 31 // -2147483648</td><td>Maximum number of retries that are made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td>timeout</td><td>-1 &#171; 63 // -9223372036854775808</td><td>Timeout period in seconds for each retry that is made to restart the container on exit with fail, if the <code>type</code> is on-failure</td></tr><tr><td><strong>resources</strong></td><td></td><td></td></tr><tr><td>memory</td><td></td><td>Hard memory limitation of the container as a number with a unit suffix of B, K, M and G, the minimum allowed value is 3M</td></tr><tr><td>memoryReservation</td><td></td><td>Soft memory limitation of the container as a number with a unit suffix of B, K, M and G, if <code>memory</code> is specified, the <code>memoryReservation</code> must be smaller than it</td></tr><tr><td>memorySwap</td><td></td><td>Total amount of memory and swap that the container can use as a number with a unit suffix of B, K, M and G, use -1 to allow the container to use unlimited swap</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Update an existing container resources and restart policy.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//update</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;restartPolicy&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>:<span style=color:#a50>&#34;on-failure&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;maxRetryCount&#34;</span>:<span style=color:#099>3</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;timeout&#34;</span>:<span style=color:#099>10</span>
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;resources&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;memory&#34;</span>:<span style=color:#a50>&#34;500M&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;memoryReservation&#34;</span>:<span style=color:#a50>&#34;300M&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;memorySwap&#34;</span>:<span style=color:#a50>&#34;1G&#34;</span>,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//update</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/update</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/update</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>update</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>update</code> operation over the container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an <code>update</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//update``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/update&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=remove><strong>Remove</strong></h2><p>Remove an existing container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/inbox/messages/remove</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td>true/false</td><td>Force stopping before removing a container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Remove an existing container.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//remove</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/inbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#00a>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Container:&lt;UUID>/outbox/messages/remove</code></td><td>A path to the <code>Container</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation remove container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an <code>remove</code> operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//remove``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Container:&lt;UUID&gt;/outbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-a06f881f26a5aaab4f513dd987342133>2.3.3 - Metrics API</h1><div class=lead>With the metrics service, you can request and receive metrics data for specific containers.</div><h2 id=request><strong>Request</strong></h2><p>Request to receive data from the container.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/inbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>frequency</td><td></td><td>Time interval of how often the metrics data will be published as duration string (e.g. 5s)</td></tr><tr><td><strong>filter</strong></td><td></td><td>Filter defines the type of metric data to be reported</td></tr><tr><td>id</td><td></td><td>An array of identifiers whose metric data to be reported, supported are: <code>cpu.utilization</code>, <code>memory.utilization</code>, <code>memory.total</code>, <code>memory.used</code>, <code>io.readBytes</code>, <code>io.writeBytes</code>, <code>net.readBytes</code>, <code>net.writeBytes</code>, <code>pids</code></td></tr><tr><td>originator</td><td></td><td>Metrics data originator</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Request metrics data with a specified filter and frequency.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//request</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/inbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;filter&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#00a>null</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;SYSTEM&#34;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>:<span style=color:#a50>&#34;2s&#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>request</code> metrics operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the request metrics data operation.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//request``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=data><strong>Data</strong></h2><p>Metrics data from a container based on the frequency specified in the request.</p><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//data</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/data</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/data</code></td><td>A path to the <code>Metrics</code> Feature and it&rsquo;s message channel.</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td><strong>Value</strong></td><td></td><td>The value of the received data from the container in json format</td></tr><tr><td>timestamp</td><td></td><td>The timestamp in ms when this measure data is published</td></tr><tr><td><strong>shapshot</strong></td><td></td><td>All the measurements collected per originator</td></tr><tr><td>originator</td><td></td><td>The originator for whose metric data to be reported</td></tr><tr><td><strong>measurements</strong></td><td></td><td>An array of measurements identifier and value for originator</td></tr><tr><td>id</td><td></td><td>The identifier whose metric data to be reported, supported are: <code>cpu.utilization</code>, <code>memory.utilization</code>, <code>memory.total</code>, <code>memory.used</code>, <code>io.readBytes</code>, <code>io.writeBytes</code>, <code>net.readBytes</code>, <code>net.writeBytes</code>, <code>pids</code></td></tr><tr><td>value</td><td></td><td>The measured value per metric ID</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Metrics data from a container.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//data``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;snapshot&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;Container:test&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;measurements&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.total&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>10371616768</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.used&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>1396736</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.01346690714903206</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.readBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>180</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.writeBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;pids&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>6</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;Container:test2&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;measurements&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>8.751566666666667</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.total&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>10371616768</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.used&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>4759552</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.04589016453717083</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;io.readBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;io.writeBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>4096</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.readBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>610</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;net.writeBytes&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>202</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;pids&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>14</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;timestamp&#34;</span>:<span style=color:#099>1234567890</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-a87803cbe8a7f247e049f3f168b5dec9>2.3.4 - Software Updatable API</h1><div class=lead>The software updatable service utilizes the Eclipse hawkBit message format to install a specified list of containers (software modules) and remove already installed modules.</div><h2 id=install><strong>Install</strong></h2><p>You can install a specified list of containers (software modules).</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Forced to install the software modules</td></tr><tr><td><strong>softwareModules</strong></td><td></td><td>An array of modules that will be installed</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td><strong>softwareModule</strong></td><td></td><td>An unique identifier for the software module</td></tr><tr><td>name</td><td></td><td>The name of the software module</td></tr><tr><td>version</td><td></td><td>The version of the software module</td></tr><tr><td><strong>artifacts</strong></td><td></td><td>An array of artifacts contained in the software module</td></tr><tr><td>filename</td><td></td><td>The file name of the artifact behind the provided URLs</td></tr><tr><td>size</td><td></td><td>The size of the file in bytes</td></tr><tr><td><strong>download</strong></td><td></td><td>A map with protocols and links for artifact download</td></tr><tr><td>key</td><td>HTTP/HTTPS/FTP/SFTP</td><td>Available transport protocols</td></tr><tr><td>url</td><td></td><td>URL to download the artifact</td></tr><tr><td>md5url</td><td></td><td>MD5URL to download the MD5SUM file</td></tr><tr><td><strong>checksums</strong></td><td></td><td>A map with checksums to verify the proper download</td></tr><tr><td>MD5</td><td></td><td>MD5 checksum of the downloaded file</td></tr><tr><td>SHA1</td><td></td><td>SHA1 checksum of the downloaded file</td></tr><tr><td>SHA256</td><td></td><td>SHA256 checksum of the downloaded file</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : In this example, you can install the listed modules.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//install</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;forced&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;softwareModules&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;softwareModule&#34;</span>:{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;influxdb&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;1.8.4&#34;</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;artifacts&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;filename&#34;</span>:<span style=color:#a50>&#34;valid.json&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;download&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;HTTPS&#34;</span>:{
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;url&#34;</span>:<span style=color:#a50>&#34;https://raw.githubusercontent.com/eclipse-kanto/container-management/main/containerm/pkg/testutil/config/container/valid.json&#34;</span>,
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;md5url&#34;</span>:<span style=color:#a50>&#34;https://raw.githubusercontent.com/eclipse-kanto/container-management/main/containerm/pkg/testutil/config/container/valid.json&#34;</span>
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;checksums&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;MD5&#34;</span>:<span style=color:#a50>&#34;8c5a0fa2c01e218262d672bf643652fd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA1&#34;</span>:<span style=color:#a50>&#34;7539b451d818d94bcd97d401a5467b3e1c0b8981&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA256&#34;</span>:<span style=color:#a50>&#34;be8f5def8e6a61caab078be0995826ae65f5993b1a35c18ed6045c3db37c4a3a&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;size&#34;</span>:<span style=color:#099>100</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		]
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>install</code> operation`</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful install of the software modules.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//install``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=remove><strong>Remove</strong></h2><p>Remove of an installed software module.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>:edge:containers/req//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/remove</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td>Json presentation of the software module to be removed</td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Force remove the software modules</td></tr><tr><td><strong>software</strong></td><td></td><td>An array of software modules to be removed</td></tr><tr><td>group</td><td></td><td>An identifier which groups the dependency into a certain category</td></tr><tr><td>name</td><td></td><td>The dependency name</td></tr><tr><td>version</td><td></td><td>The dependency version</td></tr><tr><td>type</td><td></td><td>The &ldquo;category&rdquo; classifier of the dependency</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : In this example, you can remove an existing software modules.</p><p><strong>Topic:</strong> <code>command//edge:device:edge:containers/req//remove</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;forced&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;software&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;influxdb&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		]
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>:edge:containers/res//remove</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>:edge:containers/things/live/messages/remove</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/remove</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>remove</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation remove software modules from container</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of successful removal of software modules.</p><p><strong>Topic:</strong> `command//edge:device:edge:containers/res//remove``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device:edge:containers/things/live/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/remove&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-872c561eb6735f729f4b50e9127140d4>2.4 - Container configuration as Desired State component</h1><div class=lead>Customize the deployment of a container instance as a Desired State component.</div><h3 id=domain-identifier>Domain Identifier</h3><p>The default domain identifier for the Containers Update Agent is <code>containers</code>.
This can be modified within the update agent section in the <a href=./container-manager-config>container management JSON config file</a>.</p><h3 id=containers-update-agent-properties>Containers Update Agent Properties</h3><p>To control the container update agent behavior through desired state specification. As defined in the Desired State Specification, all properties are of type string.</p><table><thead><tr><th>Key</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>systemContainers</td><td>No</td><td></td><td>Comma-separated list of container names that shall not be processed by the update agent during the application of the given desired state. This configuration option can be used to temporarily override the general <code>systemContainers</code> setting from the update agent section in the container management JSON config file. The setting is valid only for the given desired state where it is present.</td></tr></tbody></table><h3 id=container-properties>Container Properties</h3><p>To control all aspects of the container instance behavior. As defined in the Desired State Specification, all properties are of type string.</p><table><thead><tr><th>Key</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>General config</strong></td><td></td><td></td><td></td></tr><tr><td>image</td><td>Yes</td><td></td><td>Fully qualified image reference, that follows the <a href=https://github.com/opencontainers/image-spec target=_blank>OCI Image Specification</a>, the format is: <code>host[:port]/[namespace/]name:tag</code>.</td></tr><tr><td>env</td><td>No</td><td></td><td>Sets the provided environment variable in the root container&rsquo;s process environment.Example: <code>VAR1=2</code>. If <code>VAR1</code>= is used, the environment variable would be set to empty. If <code>VAR1</code> is used, the environment variable would be removed from the container environment inherited from the image. The property can be included multiple times, each one specifying another environment variable.</td></tr><tr><td>cmd</td><td>No</td><td></td><td>Command with arguments that is executed upon the container’s start. The property can be included multiple times (order is important), each one specifying another command argument.</td></tr><tr><td><strong>Host config</strong></td><td></td><td></td><td></td></tr><tr><td>device</td><td>No</td><td></td><td>Device to be made available in the container and optional cgroups permissions configuration. Both path on host and in container must be set. Possible cgroup permissions options are &ldquo;r&rdquo; (read), &ldquo;w&rdquo; (write), &ldquo;m&rdquo; (mknod) and all combinations of the three are possible. If not set, &ldquo;rwm&rdquo; is default device configuration. Example: <code>/dev/ttyACM0:/dev/ttyUSB0[:rwm]</code>. The property can be included multiple times, each one specifying a separate device.</td></tr><tr><td>port</td><td>No</td><td></td><td>Port to be mapped from the host to the container instance. Format: <code>[&lt;host-ip>:]&lt;host-port>:&lt;container-port>[-&lt;range>][/&lt;proto>]</code>. Most common use-case: <code>80:80</code>. Mapping the container&rsquo;s 80 port to a host port in the 5000-6000 range: <code>5000-6000:80/udp</code>. Specifying port protocol (default is tcp): <code>80:80/udp</code>. By default the port mapping will set on all network interfaces, but this is also manageable: <code>0.0.0.0:80-100:80/udp</code>. The property can be included multiple times, each one specifying another port mapping.</td></tr><tr><td>network</td><td>No</td><td>bridge</td><td>Sets the networking mode for the container. Possible options are: <code>bridge</code> - the container is connected to the default bridge network interface of the engine and is assigned an IP. <code>host</code> - the container shares the network stack of the host (use with caution as this breaks the network&rsquo;s isolation!)</td></tr><tr><td>host</td><td>No</td><td></td><td>Extra host to be added in the current container&rsquo;s <code>/etc/hosts</code> file. Example: hostname1:<ip1>. If the IP of the host machine is to be added to the container&rsquo;s hosts file the reserved <code>host_ip[_&lt;network-interface>]</code> must be provided. Example: <code>local.host.machine.ip.custom.if:host_ip_myNetIf0</code> - this will automatically resolve the host&rsquo;s IP on the <code>myNetIf0</code> network interface and add it to the container&rsquo;s hosts file. <code>local.host.machine.ip.default.bridge:host_ip</code> - this will automatically resolve the host&rsquo;s IP on the default bridge network interface for container management and add it to the container&rsquo;s hosts file if the container is configured to use it. The property can be included multiple times, each one specifying another extra host</td></tr><tr><td>mount</td><td>No</td><td></td><td>Sets mount points so a source directory on the host can be accessed via a destination directory in the container. Format: <code>source:destination[:propagation_mode]</code>. If the propagation mode parameter is omitted, <code>rprivate</code> will be set by default. Available propagation modes are: <code>rprivate</code>, <code>private</code>, <code>rshared</code>, <code>shared</code>, <code>rslave</code>, <code>slave</code>. The property can be included multiple times, each one specifying another mount point.</td></tr><tr><td><strong>IO config</strong></td><td></td><td></td><td></td></tr><tr><td>terminal</td><td>No</td><td>false</td><td>Boolean flag. Enables terminal for the current container, e.g. attach standard streams to a TTY.</td></tr><tr><td>interactive</td><td>No</td><td>false</td><td>Boolean flag. Enables interaction with the container, e.g. open the terminal&rsquo;s standard input for an interaction with the container.</td></tr><tr><td>privileged</td><td>No</td><td>false</td><td>Boolean flag. Creates the container as privileged, grants root capabilities to all devices on the host system</td></tr><tr><td><strong>Restart policy config</strong></td><td></td><td></td><td></td></tr><tr><td>restartPolicy</td><td>string</td><td>unless-stopped</td><td>The container&rsquo;s restart policy, the supported values are: <code>always</code> - an attempt to restart the container will be made made each time the container exits regardless of the exit code, <code>no</code> - no attempts to restart the container for any reason will be made, <code>on-failure</code> - restart attempts will be made if the container exits with an exit code != 0, <code>unless-stopped</code> - restart attempts will be made only if the container has not been stopped by the user.</td></tr><tr><td>restartMaxRetries</td><td>No</td><td>1</td><td>Integer value. Maximum number of retries that are made to restart the container on exit with fail, valid only if the <code>restartPolicy</code> is <code>on-failure</code>.</td></tr><tr><td>restartTimeout</td><td>No</td><td>30</td><td>Integer value. Timeout period in seconds for each retry that is made to restart the container on exit with fail, valid only if the <code>restartPolicy</code> is <code>on-failure</code>.</td></tr><tr><td><strong>Logging config</strong></td><td></td><td></td><td></td></tr><tr><td>logDriver</td><td>No</td><td>json-file</td><td>Sets the type of the log driver to be used for the container - <code>json-file</code>, <code>none</code>.</td></tr><tr><td>logMaxFiles</td><td>No</td><td>2</td><td>Integer value. Sets the max number of log files to be rotated - applicable for <code>json-file</code> log driver only.</td></tr><tr><td>logMaxSize</td><td>No</td><td>100M</td><td>Sets the max size of the logs files for rotation in the form of 1, 1.2m, 1g, etc. - applicable for <code>json-file</code> log driver only.</td></tr><tr><td>logPath</td><td>No</td><td></td><td>Sets the path to the directory where the log files will be stored - applicable for <code>json-file</code> log driver only.</td></tr><tr><td>logMode</td><td>No</td><td>blocking</td><td>Sets the mode of the logger - <code>blocking</code>, <code>non-blocking</code>.</td></tr><tr><td>logMaxBufferSize</td><td>No</td><td>1M</td><td>Sets the max size of the logger buffer in the form of 1, 1.2m - applicable for <code>non-blocking</code> mode only.</td></tr><tr><td><strong>Resources config</strong></td><td></td><td></td><td></td></tr><tr><td>memory</td><td>No</td><td></td><td>Sets the max amount of memory the container can use in the form of 200m, 1.2g. The minimum allowed value is 3m. By default, a container has no memory constraints.</td></tr><tr><td>memorySwap</td><td>No</td><td></td><td>Sets the total amount of memory + swap that the container can use in the form of 200m, 1.2g. If set must not be smaller than <code>memory</code>. If equal to <code>memory</code>, then the container will not have access to swap. If not set and <code>memory</code> is set, than the container can use as much swap as the <code>memory</code> setting. If set to -1, the container can use unlimited swap, up to the amount available on the host.</td></tr><tr><td>memoryReservation</td><td>No</td><td></td><td>Sets a soft memory limitation in the form of 200m, 1.2g. Must be smaller than <code>memory</code>. When the system detects memory contention or low memory, control groups are pushed back to their soft limits. There is no guarantee that the container memory usage will not exceed the soft limit.</td></tr></tbody></table><h4 id=desired-state-containers-domain-example>Desired State Containers Domain Example</h4><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;domains&#34;</span>: [
</span></span><span style=display:flex><span>		{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;containers&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;systemContainers&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;self-update-agent&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;components&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;hello-world&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>: <span style=color:#a50>&#34;latest&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;image&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;docker.io/library/hello-world:latest&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;env&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;x=y&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;env&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;a=b&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;cmd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;arg1&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;cmd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;arg2&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;device&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;/dev/tty:/dev/tty:rw&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;port&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;80:80/tcp&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;network&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;host&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;host&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;host_name&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;mount&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;/data:/data:private&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;terminal&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;true&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;interactive&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;true&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;privileged&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;true&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;restartPolicy&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;always&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;restartMaxRetries&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;3&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;restartTimeout&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;1000&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logDriver&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;json-file&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMaxFiles&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;3&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMaxSize&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;5M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logPath&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;/var/log&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMode&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;blocking&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;logMaxBufferSize&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;1M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;memory&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;200M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;memorySwap&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;300M&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;memoryReservation&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;100M&#34;</span>
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					]
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5743bc867ec5e301d16f987251313c8d>3 - Software Updatable</h1><div class=lead>Customize the deployment and management of software artifacts.</div></div><div class=td-content><h1 id=pg-9767bb4be0bb151351b0ddd78b022cca>3.1 - Software update configuration</h1><div class=lead>Customize the deployment and management of software artifacts.</div><h3 id=properties>Properties</h3><p>To control all aspects of the software update behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>SoftwareUpdatable</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>moduleType</td><td>string</td><td>software</td><td>Type of the software that is managed by this feature</td></tr><tr><td>artifactType</td><td>string</td><td>archive</td><td>Type of the artifact that is to be processed: archive or plain</td></tr><tr><td>install</td><td>string[]</td><td></td><td>Absolute path to the install script/command and an optional sequence of additional flags/parameters</td></tr><tr><td>storageLocation</td><td>string</td><td>./</td><td>Path to the storage directory where the working files are stored</td></tr><tr><td>installDirs</td><td>string[]</td><td></td><td>File system directories where the local artifacts are stored</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction where the local artifacts can be stored on the file system, the supported modes are: strict, lax and scope</td></tr><tr><td><strong>Download</strong></td><td></td><td></td><td></td></tr><tr><td>downloadRetryCount</td><td>int</td><td>0</td><td>Number of retries, in case of a failed download</td></tr><tr><td>downloadRetryInterval</td><td>string</td><td>5s</td><td>Interval between retries, in case of a failed download as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Download - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure downloads</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the software update will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/software-update.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets the software type to firmware.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;moduleType&#34;</span>: <span style=color:#a50>&#34;firmware&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storageLocation&#34;</span>: <span style=color:#a50>&#34;/var/lib/software-update&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/software-update/software-update.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;SoftwareUpdatable&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;moduleType&#34;</span>: <span style=color:#a50>&#34;software&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;artifactType&#34;</span>: <span style=color:#a50>&#34;archive&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;install&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storageLocation&#34;</span>: <span style=color:#a50>&#34;./&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;installDirs&#34;</span>: [],
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;downloadRetryCount&#34;</span>: <span style=color:#099>0</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;downloadRetryInterval&#34;</span>: <span style=color:#a50>&#34;5s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/software-update.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-2c8e931dc6982e84bbb9b080f0132227>3.2 - Software Updatable API</h1><div class=lead>The software updatable service provides the ability to install given list of software modules and to download modules.</div><h2 id=install><strong>Install</strong></h2><p>Install given list of software modules.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the response message</td></tr><tr><td><strong>Value</strong></td><td></td><td>JSON presentation of software module that will be installed</td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Forced to remove the software modules</td></tr><tr><td><strong>softwareModules</strong></td><td></td><td>An array of software modules to be installed</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td><strong>softwareModule</strong></td><td></td><td>An unique identifier for the software module</td></tr><tr><td>name</td><td></td><td>The name of the software module</td></tr><tr><td>version</td><td></td><td>The version of the software module</td></tr><tr><td><strong>artifacts</strong></td><td></td><td>An array of artifacts contained in the software module</td></tr><tr><td>filename</td><td></td><td>The file name of the artifact</td></tr><tr><td>size</td><td></td><td>Artifact file size in bytes</td></tr><tr><td><strong>download</strong></td><td></td><td>A map with protocols and links for downloading the artifacts</td></tr><tr><td>key</td><td>HTTP/HTTPS/FTP/SFTP</td><td>Available transport protocols</td></tr><tr><td>url</td><td></td><td>URL to download the artifact</td></tr><tr><td>md5url</td><td></td><td>MD5URL to download the MD5SUM file</td></tr><tr><td><strong>checksums</strong></td><td></td><td>A map with checksums to verify the proper download</td></tr><tr><td>MD5</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA1</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA256</td><td></td><td>MD5 checksum</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Install a <code>hello-world</code> software module.</p><p><strong>Topic:</strong> <code>command//edge:device/req//install</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;softwareModules&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;softwareModule&#34;</span>:{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;install-hello&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;artifacts&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;checksums&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA256&#34;</span>:<span style=color:#a50>&#34;db954c633393c1402f145a60fd58d312f5af96ce49422fcfd6ce42a3c4cceeca&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;MD5&#34;</span>:<span style=color:#a50>&#34;8c5a0fa2c01e218262d672bf643652fd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA1&#34;</span>:<span style=color:#a50>&#34;7539b451d818d94bcd97d401a5467b3e1c0b8981&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;download&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;HTTPS&#34;</span>:{
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;url&#34;</span>:<span style=color:#a50>&#34;https://github.com/eclipse-kanto/kanto/raw/main/quickstart/install_hello.sh&#34;</span>
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;filename&#34;</span>:<span style=color:#a50>&#34;install.sh&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;size&#34;</span>:<span style=color:#099>544</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		]
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//install</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/install</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/install</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>install</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation install software modules</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the install software modules operation.</p><p><strong>Topic:</strong> `command//edge:device/res//install``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/install&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=download><strong>Download</strong></h2><p>Download software modules.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//download</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/download</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/inbox/messages/download</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>download</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td>JSON representation of the software modules that will be downloaded</td></tr><tr><td>correlationId</td><td></td><td>Unique identifier that is used to associate and track the series of messages</td></tr><tr><td>weight</td><td></td><td>The weight is the priority in case of multiple, parallel instructions</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td>forced</td><td>true/false</td><td>Remove the software modules forcefully</td></tr><tr><td><strong>softwareModules</strong></td><td></td><td>An array of software modules that will be downloaded</td></tr><tr><td>metadata</td><td></td><td>The metadata is any other information which should be passed to the device</td></tr><tr><td><strong>softwareModule</strong></td><td></td><td>A unique identifier for the software module</td></tr><tr><td>name</td><td></td><td>The name of the software module</td></tr><tr><td>version</td><td></td><td>The version of the software module</td></tr><tr><td><strong>artifacts</strong></td><td></td><td>An array of artifacts contained in the software module</td></tr><tr><td>filename</td><td></td><td>The file name of the artifact</td></tr><tr><td>size</td><td></td><td>Artifact file size in bytes</td></tr><tr><td><strong>download</strong></td><td></td><td>A map with protocols and links for downloading the artifacts</td></tr><tr><td>key</td><td>HTTP/HTTPS/FTP/SFTP</td><td>Available transport protocols</td></tr><tr><td>url</td><td></td><td>URL to download the artifact</td></tr><tr><td>md5url</td><td></td><td>MD5URL to download the MD5SUM file</td></tr><tr><td><strong>checksums</strong></td><td></td><td>A map with checksums to verify the proper download</td></tr><tr><td>MD5</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA1</td><td></td><td>MD5 checksum</td></tr><tr><td>SHA256</td><td></td><td>MD5 checksum</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Download a hello-world software module.</p><p><strong>Topic:</strong> <code>command//edge:device/req//download</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/inbox/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationId&#34;</span>:<span style=color:#a50>&#34;other_correlation_id&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#1e90ff;font-weight:700>&#34;softwareModules&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;softwareModule&#34;</span>:{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;name&#34;</span>:<span style=color:#a50>&#34;install-hello&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>:<span style=color:#a50>&#34;1.0.0&#34;</span>
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;artifacts&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;checksums&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA256&#34;</span>:<span style=color:#a50>&#34;db954c633393c1402f145a60fd58d312f5af96ce49422fcfd6ce42a3c4cceeca&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;MD5&#34;</span>:<span style=color:#a50>&#34;8c5a0fa2c01e218262d672bf643652fd&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;SHA1&#34;</span>:<span style=color:#a50>&#34;7539b451d818d94bcd97d401a5467b3e1c0b8981&#34;</span>
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;download&#34;</span>:{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;HTTPS&#34;</span>:{
</span></span><span style=display:flex><span>								<span style=color:#1e90ff;font-weight:700>&#34;url&#34;</span>:<span style=color:#a50>&#34;https://github.com/eclipse-kanto/kanto/raw/main/quickstart/install_hello.sh&#34;</span>
</span></span><span style=display:flex><span>							}
</span></span><span style=display:flex><span>						},
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;filename&#34;</span>:<span style=color:#a50>&#34;install.sh&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;size&#34;</span>:<span style=color:#099>544</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//download</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/download</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/SoftwareUpdatable/outbox/messages/download</code></td><td>A path to the <code>SoftwareUpdatable</code> Feature, it&rsquo;s message channel, and <code>download</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>download</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful download response.</p><p><strong>Topic:</strong> `command//edge:device/res//download``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/SoftwareUpdatable/outbox/messages/download&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-9d38c7f4f5116dc634462336dcb1b22f>4 - File Upload</h1><div class=lead>Customize the files transfer to a backend storage.</div></div><div class=td-content><h1 id=pg-ca900b9c63933f0b4aafc84a253b5e30>4.1 - File upload configuration</h1><div class=lead>Customize the files transfer to a backend storage.</div><h3 id=properties>Properties</h3><p>To control all aspects of the file upload behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>AutoUploadable</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>type</td><td>string</td><td>file</td><td>Type of the files that are uploaded by this feature</td></tr><tr><td>context</td><td>string</td><td>edge</td><td>Context of the files that are uploaded by this feature, unique in the scope of the <code>type</code></td></tr><tr><td>files</td><td>string</td><td></td><td>Glob pattern to select the files for upload</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction on files that can be dynamically selected for an upload, the supported modes are: strict, lax and scoped</td></tr><tr><td>singleUpload</td><td>bool</td><td>false</td><td>Forbid triggering of new uploads when there is an upload in progress</td></tr><tr><td>checksum</td><td>bool</td><td>false</td><td>Send MD5 checksum for uploaded files to ensure data integrity</td></tr><tr><td>stopTimeout</td><td>string</td><td>30s</td><td>Time to wait for running uploads to finish as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td>delete</td><td>bool</td><td>false</td><td>Delete successfully uploaded files</td></tr><tr><td><strong>Upload - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure uploads</td></tr><tr><td><strong>Auto upload</strong></td><td></td><td></td><td></td></tr><tr><td>active</td><td>bool</td><td>false</td><td>Activate periodic uploads</td></tr><tr><td>activeFrom</td><td>string</td><td></td><td>Time from which periodic uploads should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) current time will be used as start of the periodic uploads</td></tr><tr><td>activeTill</td><td>string</td><td></td><td>Time till which periodic uploads should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) periodic uploads will be active indefinitely</td></tr><tr><td>period</td><td>string</td><td>10h</td><td>Upload period as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the file upload will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/file-upload.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that sets the file type to log.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;files&#34;</span>: <span style=color:#a50>&#34;/var/tmp/file-upload/*.*&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/file-upload/file-upload.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;AutoUploadable&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;file&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;context&#34;</span>: <span style=color:#a50>&#34;edge&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;files&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;singleUpload&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;checksum&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;stopTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;delete&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;active&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;activeFrom&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;activeTill&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;period&#34;</span>: <span style=color:#a50>&#34;10h&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/file-upload.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-3e671f908383d295c4130420c45793ae>4.2 - File Upload API</h1><div class=lead>The file upload service provides the ability to start, trigger, cancel, activate or deactivate upload of the file.</div><h2 id=start><strong>Start</strong></h2><p>Start a file upload operation.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/start</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the uploaded file</td></tr><tr><td><strong>options</strong></td><td></td><td>Options are specific for each provider</td></tr><tr><td>storage.provider</td><td>aws/azure/generic</td><td>Storage provider that will be used for uploading the files</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Start uploading a file.</p><p><strong>Topic:</strong> <code>command//edge:device/req//start</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.access.key.id&#34;</span>:<span style=color:#a50>&#34;AWSACCESSKEYID&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.region&#34;</span>:<span style=color:#a50>&#34;eu-central-1&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.s3.bucket&#34;</span>:<span style=color:#a50>&#34;blob-upload-test&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;aws.secret.access.key&#34;</span>:<span style=color:#a50>&#34;AWSSECRETACCESSKEY&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;storage.provider&#34;</span>:<span style=color:#a50>&#34;aws&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//start</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/start</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/start</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>start</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation start upload the file</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>start</code> file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//start``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/start&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=trigger><strong>Trigger</strong></h2><p>Trigger a file upload operation.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//trigger</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/trigger</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/trigger</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>trigger</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the triggered file</td></tr><tr><td><strong>options</strong></td><td></td><td>Options are specific for each provider</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Trigger a file upload operation.</p><p><strong>Topic:</strong> <code>command//edge:device/req//trigger</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;other &lt;UUID&gt;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//trigger</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/trigger</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/trigger</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>trigger</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>trigger</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>trigger</code> operation.</p><p><strong>Topic:</strong> `command//edge:device/res//trigger``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/trigger&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=cancel><strong>Cancel</strong></h2><p>Cancel a file upload operation.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//cancel</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/cancel</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/cancel</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>cancel</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the uploaded file</td></tr><tr><td>statusCode</td><td></td><td>This status code is set to update status code</td></tr><tr><td>message</td><td></td><td>This message is set to update status message</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Cancel a file upload operation.</p><p><strong>Topic:</strong> <code>command//edge:device/req//cancel</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;statusCode&#34;</span>: <span style=color:#099>400</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;message&#34;</span>:<span style=color:#a50>&#34;description why the upload is canceled &#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//cancel</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/cancel</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/cancel</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>cancel</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation <code>cancel</code> file upload</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : The response of the cancel file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//cancel``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/cancel&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=activate><strong>Activate</strong></h2><p>Activate an upload of a file.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//activate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/activate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/activate</code></td><td>A path that references a part of a Thing which is affected by this message</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>from</td><td></td><td>A Time after which the upload must be activated</td></tr><tr><td>to</td><td></td><td>A Time grater than <code>from</code> marks the end of activated</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Activate file upload.</p><p><strong>Topic:</strong> <code>command//edge:device/req//activate</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;from&#34;</span>:<span style=color:#099>957139200</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;to&#34;</span>:<span style=color:#099>959817599</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//activate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/activate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/activate</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>activate</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation <code>activate</code> file upload</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an activate file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//activate``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/activate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=deactivate><strong>Deactivate</strong></h2><p>Deactivate a file upload.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//deactivate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/deactivate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/inbox/messages/deactivate</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>deactivate</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Deactivate a file upload.</p><p><strong>Topic:</strong> <code>command//edge:device/req//deactivate</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/inbox/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>0/res//deactivate</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/deactivate</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/AutoUploadable/outbox/messages/deactivate</code></td><td>A path to the <code>AutoUploadable</code> Feature, it&rsquo;s message channel, and <code>deactivate</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the sent request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation <code>deactivate</code> file upload</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of the <code>deactivate</code> file upload operation.</p><p><strong>Topic:</strong> `command//edge:device/res//deactivate``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/AutoUploadable/outbox/messages/deactivate&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-84e5886ae702fe90cbd5bba81b089dae>5 - File Backup</h1><div class=lead>Customize the files backup and restore to and from a backend storage.</div></div><div class=td-content><h1 id=pg-290fdafe0927e4ac6fe74cc82c6af513>5.1 - File backup configuration</h1><div class=lead>Customize the files backup and restore to and from a backend storage.</div><h3 id=properties>Properties</h3><p>To control all aspects of the file backup behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>featureId</td><td>string</td><td>BackupAndRestore</td><td>Feature unique identifier in the scope of the edge digital twin</td></tr><tr><td>type</td><td>string</td><td>file</td><td>Type of the files that are backed up by this feature</td></tr><tr><td>context</td><td>string</td><td>edge</td><td>Context of the files backed up by this feature, unique in the scope of the <code>type</code></td></tr><tr><td>dir</td><td>string</td><td></td><td>Directory to be backed up</td></tr><tr><td>mode</td><td>string</td><td>strict</td><td>Restriction on directories that can be dynamically selected for a backup, the supported modes are: strict, lax and scoped</td></tr><tr><td>backupCmd</td><td>string</td><td></td><td>Command to be executed before the backup is done</td></tr><tr><td>restoreCmd</td><td>string</td><td></td><td>Command to be executed after the restore</td></tr><tr><td>singleUpload</td><td>bool</td><td>false</td><td>Forbid triggering of new backups when there is a backup in progress</td></tr><tr><td>checksum</td><td>bool</td><td>false</td><td>Send MD5 checksum for backed up files to ensure data integrity</td></tr><tr><td>stopTimeout</td><td>string</td><td>30s</td><td>Time to wait for running backups to finish as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td>keepUploaded</td><td>bool</td><td>false</td><td>Keep successfully uploaded backups locally</td></tr><tr><td>storage</td><td>string</td><td>./storage</td><td>Directory where backups and downloads will be stored</td></tr><tr><td><strong>Upload/Download - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>serverCert</td><td>string</td><td></td><td>PEM encoded certificate file for secure uploads and downloads</td></tr><tr><td><strong>Auto backup</strong></td><td></td><td></td><td></td></tr><tr><td>active</td><td>bool</td><td>false</td><td>Activate periodic backups</td></tr><tr><td>activeFrom</td><td>string</td><td></td><td>Time from which periodic backups should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) current time will be used as start of the periodic backups</td></tr><tr><td>activeTill</td><td>string</td><td></td><td>Time till which periodic backups should be active, in RFC 3339 format, if omitted (and <code>active</code> flag is set) periodic backups will be active indefinitely</td></tr><tr><td>period</td><td>string</td><td>10h</td><td>Backup period as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the file backup will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>cert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>key</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/file-backup.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that enables backing up a directory and sets the file type to config.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;config&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;dir&#34;</span>: <span style=color:#a50>&#34;/var/tmp/file-backup&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;scoped&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;storage&#34;</span>: <span style=color:#a50>&#34;/var/lib/file-backup&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/file-backup/file-backup.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class="alert primary alert-docs-container" role=alert><div><span class=alert-docs-pic><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><defs><style>.cls-alert-warn{fill:#476e40}</style></defs><title>Warning</title><path class="cls-alert-warn" d="M175.783 160H16.217L96 15.735 175.783 160zm-146-8h132.434L96 32.265 29.783 152zm73.328-15.111c0 3.89-3.222 7.111-7.111 7.111-4 0-7.111-3.11-7.111-7.111.0-4 3.11-7.111 7.111-7.111 3.889.0 7.111 3.222 7.111 7.11zm-12.223-48V64h10.223v24.889l-2.667 30.667h-4.888l-2.668-30.667z"/></svg></span></div>Be aware that some combinations may be incompatible.</div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;featureId&#34;</span>: <span style=color:#a50>&#34;BackupAndRestore&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;type&#34;</span>: <span style=color:#a50>&#34;file&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;context&#34;</span>: <span style=color:#a50>&#34;edge&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;dir&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;mode&#34;</span>: <span style=color:#a50>&#34;strict&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;backupCmd&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;restoreCmd&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;singleUpload&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;checksum&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;stopTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;keepUploaded&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;storage&#34;</span>: <span style=color:#a50>&#34;./storage&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;serverCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;active&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;activeFrom&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;activeTill&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;period&#34;</span>: <span style=color:#a50>&#34;10h&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;cert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/file-backup.log&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>  <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-7559fb3ffc69ee07f9345429fd1560b5>5.2 - File Backup API</h1><div class=lead>The file backup service allows you to backup and restore data to and from a backend storage.</div><h2 id=backup><strong>Backup</strong></h2><p>Create a file backup.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//backup</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/backup</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/inbox/messages/backup</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>backup</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>UUID</td><td>Identifier of the backup file</td></tr><tr><td>providers</td><td></td><td>The providers of the restore command</td></tr><tr><td><strong>options</strong></td><td></td><td></td></tr><tr><td>backup.dir</td><td></td><td>A local directory, to be backed up</td></tr><tr><td>https.url</td><td></td><td>The URL for restoring the backed up directory</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Back up a directory.</p><p><strong>Topic:</strong> <code>command//edge:device/req//backup</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/inbox/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;providers&#34;</span>:{},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;backup.dir&#34;</span>:<span style=color:#a50>&#34;/var/tmp/backup&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;https.url&#34;</span>:<span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//backup</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/backup</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/outbox/messages/backup</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>backup</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>backup</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>backup</code> operation.</p><p><strong>Topic:</strong> `command//edge:device/res//backup``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/outbox/messages/backup&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>:<span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=restore><strong>Restore</strong></h2><p>Restore the backed up files or directory from a backend service.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//restore</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/restore</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/inbox/messages/restore</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>restore</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>correlationID</td><td>other UUID</td><td>Identifier of the restored file</td></tr><tr><td>providers</td><td></td><td>Storage provider, one of <code>aws</code>, <code>azure</code>, <code>generic</code></td></tr><tr><td><strong>options</strong></td><td></td><td>Options are specific for each provider</td></tr><tr><td>backup.dir</td><td></td><td>A local directory, which to be backed up and then uploaded, using a storage provider of choice and temporary credentials</td></tr><tr><td>https.url</td><td></td><td>The URL for restoring the backed up directory</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Restore a backup from a storage provider.</p><p><strong>Topic:</strong> <code>command//edge:device/req//restore</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/inbox/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlationID&#34;</span>:<span style=color:#a50>&#34;upload-id-1704439450#n&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;providers&#34;</span>:{},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;options&#34;</span>:{
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;backup.dir&#34;</span>:<span style=color:#a50>&#34;/var/tmp/backup&#34;</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;https.url&#34;</span>:<span style=color:#a50>&#34;https://raw.githubusercontent.com/eclipse-kanto/container-management/main/containerm/pkg/testutil/config/&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//restore</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/restore</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/BackupAndRestore/outbox/messages/restore</code></td><td>A path to the <code>BackupAndRestore</code> Feature, it&rsquo;s message channel, and <code>restore</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation restore</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Response of a successful <code>restore</code> operation.</p><p><strong>Topic:</strong> `command//edge:device/res//restore``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/BackupAndRestore/outbox/messages/restore&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-9e75257ab5f9aee5b02ba95678c80a00>6 - System Metrics</h1><div class=lead>Customize the reporting of system metrics.</div></div><div class=td-content><h1 id=pg-a6c68d347ea5a9f2fae78240687edde1>6.1 - System metrics configuration</h1><div class=lead>Customize the reporting of system metrics.</div><h3 id=properties>Properties</h3><p>To control all aspects of the system metrics behavior.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>frequency</td><td>string</td><td></td><td>Initial system metrics reporting frequency as a sequence of decimal numbers, each with optional fraction and a unit suffix, such as: 300ms, 1.5h, 10m30s, etc., time units are: ns, us (or µs), ms, s, m, h</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the system metrics will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td><strong>Local connectivity - TLS</strong></td><td></td><td></td><td></td></tr><tr><td>caCert</td><td>string</td><td></td><td>PEM encoded CA certificates file</td></tr><tr><td>clientCert</td><td>string</td><td></td><td>PEM encoded certificate file to authenticate to the MQTT server/broker</td></tr><tr><td>clientKey</td><td>string</td><td></td><td>PEM encoded unencrypted private key file to authenticate to the MQTT server/broker</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td>log/system-metrics.log</td><td>Path to the file where log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>The minimal required configuration that enables the auto reporting of system metrics.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>: <span style=color:#a50>&#34;60s&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;/var/log/system-metrics/system-metrics.log&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span> : <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;caCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;clientCert&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;cleintKey&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;log/system-metrics.log&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>    <span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-d1f90cffafa688f363b91bee56938207>6.2 - System Metrics API</h1><div class=lead>The system metrics service provides the ability to request and receive metrics data.</div><h2 id=request><strong>Request</strong></h2><p>Request to receive metrics data.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/inbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>frequency</td><td></td><td>Time interval of how often the metrics data will be published as duration string (e.g. 5s)</td></tr><tr><td><strong>filter</strong></td><td></td><td>Filter defines the type of metric data to be reported</td></tr><tr><td>id</td><td></td><td>An array of identifiers whose metric data to be reported, supported are: <code>cpu.utilization</code>, <code>memory.utilization</code>, <code>memory.total</code>, <code>memory.used</code>, <code>io.readBytes</code>, <code>io.writeBytes</code>, <code>net.readBytes</code>, <code>net.writeBytes</code>, <code>pids</code></td></tr><tr><td>originator</td><td></td><td>Metrics data originator</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Request metrics data with specified filter and frequency.</p><p><strong>Topic:</strong> <code>command//edge:device/req//request</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/inbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;filter&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:[<span style=color:#a50>&#34;io.*&#34;</span>,<span style=color:#a50>&#34;cpu.*&#34;</span>,<span style=color:#a50>&#34;memory.*&#34;</span>],
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;SYSTEM&#34;</span>
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;frequency&#34;</span>:<span style=color:#a50>&#34;5s&#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//request</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/request</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/request</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and <code>request</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation request the metrics data</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>request</code> metrics message.</p><p><strong>Topic:</strong> `command//edge:device/res//request``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/request&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=data><strong>Data</strong></h2><p>Metrics data reported by the device.</p><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//data</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/data</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/Metrics/outbox/messages/data</code></td><td>A path to the <code>Metrics</code> Feature, it&rsquo;s message channel, and metrics data</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td><strong>Value</strong></td><td></td><td>The value of the received data from the device in json format</td></tr><tr><td>timestamp</td><td></td><td>The timestamp in ms when this measure data is published</td></tr><tr><td><strong>snapshot</strong></td><td></td><td>All the measurements collected at a concrete time per originator</td></tr><tr><td>originator</td><td></td><td>The originator for whose metric data to be reported</td></tr><tr><td><strong>measurements</strong></td><td></td><td>An array of measurements identifier and value for originator</td></tr><tr><td>id</td><td></td><td>The identifier whose metric data to be reported, supported are: cpu.utilization, cpu.load1, cpu.load5, cpu.load15, memory.utilization, memory.total, memory.available, memory.used, io.readBytes, io.writeBytes</td></tr><tr><td>value</td><td></td><td>The measured value per metric ID</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Metrics data from the device.</p><p><strong>Topic:</strong> `command//edge:device/res//data``</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/Metrics/outbox/messages/data&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;snapshot&#34;</span>:[
</span></span><span style=display:flex><span>			{
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;originator&#34;</span>:<span style=color:#a50>&#34;SYSTEM&#34;</span>,
</span></span><span style=display:flex><span>				<span style=color:#1e90ff;font-weight:700>&#34;measurements&#34;</span>:[
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>1.1555555555484411</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.load1&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.17</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.load5&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.27</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;cpu.load15&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>0.24</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.total&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>10371616768</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.available&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>5281644544</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.used&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>4563206144</span>
</span></span><span style=display:flex><span>					},
</span></span><span style=display:flex><span>					{
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>:<span style=color:#a50>&#34;memory.utilization&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:<span style=color:#099>43.99705702662538</span>
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				]
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		],
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;timestamp&#34;</span>:<span style=color:#099>1234567890</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-2c5a03ed5bfeb95bab2eb24b32a3e2ab>7 - Update Manager</h1><div class=lead>The kanto update manager service provides orchestration of OTA Updates towards a target device in a smart way.</div></div><div class=td-content><h1 id=pg-aa8ed68920984e8aaf115be9f72d2e4b>7.1 - Update Manager API</h1><div class=lead>The kanto update manager service provides orchestration of OTA Updates towards a target device in a smart way.</div><h2 id=apply><strong>Apply</strong></h2><p>Applies a <a href=https://github.com/eclipse-kanto/update-manager/blob/main/docs/desired-state-specification.md>desired state</a> to the device.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//apply</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/apply</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/inbox/messages/apply</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>apply</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>Used for correlating protocol messages, the same correlation-id as the sent back response message</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>activityId</td><td></td><td>The activity id of the new desired state</td></tr><tr><td><strong>desiredState</strong></td><td></td><td>The <a href=https://github.com/eclipse-kanto/update-manager/blob/main/docs/desired-state-specification.md>desired state</a> to be applied on a device</td></tr><tr><td><strong>baselines</strong></td><td></td><td>An array of domain or cross-domain dependencies between components</td></tr><tr><td>title</td><td></td><td>The title of the dependency</td></tr><tr><td>description</td><td></td><td>The description of the dependency</td></tr><tr><td>preconditions</td><td></td><td>The preconditions of the dependency</td></tr><tr><td>components</td><td></td><td>An array of the components of the dependency</td></tr><tr><td><strong>domains</strong></td><td></td><td>An array of desired state for a single domain</td></tr><tr><td>id</td><td></td><td>The id of this domain</td></tr><tr><td><strong>config</strong></td><td></td><td>An array of key/value string pair</td></tr><tr><td>key</td><td></td><td>The key string</td></tr><tr><td>value</td><td></td><td>The value of the key string</td></tr><tr><td><strong>components</strong></td><td></td><td>An array of desired state component with additional key-value configuration pairs</td></tr><tr><td>id</td><td></td><td>The id of the component</td></tr><tr><td>version</td><td></td><td>The version of the component</td></tr><tr><td>key</td><td></td><td>The key string</td></tr><tr><td>value</td><td></td><td>The value of the key string</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Apply a desired state to the device.</p><p><strong>Topic:</strong> <code>command//edge:device/req//apply</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>:<span style=color:#a50>&#34;edge/device/things/live/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>:<span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>:<span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>:<span style=color:#a50>&#34;/features/UpdateManager/inbox/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>:{
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;activityId&#34;</span>: <span style=color:#a50>&#34;d91ad6fe-9b0c-4549-bf31-17d0a71b61de&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;desiredState&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;baselines&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;title&#34;</span>: <span style=color:#a50>&#34;simple-baseline&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;description&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;precondition&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;components&#34;</span>: [
</span></span><span style=display:flex><span>						<span style=color:#a50>&#34;domain:component1&#34;</span>,
</span></span><span style=display:flex><span>						<span style=color:#a50>&#34;domain:component2&#34;</span>
</span></span><span style=display:flex><span>					]
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			],
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;domains&#34;</span>: [
</span></span><span style=display:flex><span>				{
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;containers&#34;</span>,
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;source&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;value&#34;</span>
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					],
</span></span><span style=display:flex><span>					<span style=color:#1e90ff;font-weight:700>&#34;components&#34;</span>: [
</span></span><span style=display:flex><span>						{
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;id&#34;</span>: <span style=color:#a50>&#34;containers:influxdb&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;version&#34;</span>: <span style=color:#a50>&#34;2.7.1&#34;</span>,
</span></span><span style=display:flex><span>							<span style=color:#1e90ff;font-weight:700>&#34;config&#34;</span>: [
</span></span><span style=display:flex><span>								{
</span></span><span style=display:flex><span>									<span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;image&#34;</span>,
</span></span><span style=display:flex><span>									<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;docker.io/library/influxdb:$influxdb_version&#34;</span>
</span></span><span style=display:flex><span>								}
</span></span><span style=display:flex><span>							]
</span></span><span style=display:flex><span>						}
</span></span><span style=display:flex><span>					]
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			]
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//apply</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/apply</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/outbox/messages/apply</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>apply</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the operation apply</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of an <code>apply</code> desired state operation.</p><p><strong>Topic:</strong> <code>command//edge:device/res//apply</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>: <span style=color:#a50>&#34;edge/device/things/live/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>: <span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>: <span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: <span style=color:#a50>&#34;/features/UpdateManager/outbox/messages/apply&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><h2 id=refresh><strong>Refresh</strong></h2><p>Reads the <a href=https://github.com/eclipse-kanto/update-manager/blob/main/docs/current-state-specification.md>current state</a> from the device and updates the status of the <code>UpdateManager</code> feature.</p><details><summary>Request</summary><p><strong>Hono Command:</strong> <code>command//&lt;name>:&lt;namespace>/req//refresh</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/refresh</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/inbox/messages/refresh</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>refresh</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>response-required</td><td>true/false</td><td>If response is required</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>container UUID</td><td>The container UUID</td></tr><tr><td><strong>Value</strong></td><td></td><td></td></tr><tr><td>activityId</td><td></td><td>The activity id of the <code>refresh</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Update the status of the <code>UpdateManager</code> feature.</p><p><strong>Topic:</strong> <code>command//edge:device/req//refresh</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>: <span style=color:#a50>&#34;edge/device/things/live/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;response-required&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>:<span style=color:#a50>&#34; application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>: <span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: <span style=color:#a50>&#34;/features/UpdateManager/inbox/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;activityId&#34;</span>: <span style=color:#a50>&#34;e08b071c-c19e-41de-8da0-e2843113161f&#34;</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details><details><summary>Response</summary><p><strong>Hono Command</strong> : <code>command//&lt;name>:&lt;namespace>/res//refresh</code></p><p><strong>Ditto Message:</strong></p><blockquote><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>topic</td><td><code>&lt;name>/&lt;namespace>/things/live/messages/refresh</code></td><td>Information about the affected Thing and the type of operation</td></tr><tr><td>path</td><td><code>/features/UpdateManager/outbox/messages/refresh</code></td><td>A path to the <code>UpdateManager</code> Feature, it&rsquo;s message channel, and <code>refresh</code> command</td></tr><tr><td><strong>Headers</strong></td><td></td><td>Additional headers</td></tr><tr><td>content-type</td><td><code>application/json</code></td><td>The content type</td></tr><tr><td>correlation-id</td><td>&lt;UUID></td><td>The same correlation id as the request message</td></tr><tr><td><strong>Status</strong></td><td></td><td>Status of the <code>refresh</code> operation</td></tr></tbody></table></blockquote><br><p><strong>Example</strong> : Successful response of a <code>refresh</code> operation.</p><p><strong>Topic:</strong> <code>command//edge:device/res//refresh</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;topic&#34;</span>: <span style=color:#a50>&#34;edge/device/things/live/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;headers&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;content-type&#34;</span>: <span style=color:#a50>&#34;application/json&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;correlation-id&#34;</span>: <span style=color:#a50>&#34;&lt;UUID&gt;&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: <span style=color:#a50>&#34;/features/UpdateManager/outbox/messages/refresh&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;status&#34;</span>: <span style=color:#099>204</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></details></div><div class=td-content style=page-break-before:always><h1 id=pg-33034280392f17e986def02436a6d904>7.2 - Update manager configuration</h1><div class=lead>Customize the update manager.</div><h3 id=properties>Properties</h3><p>To control all aspects of the update manager.</p><table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><strong>General</strong></td><td></td><td></td><td></td></tr><tr><td>domain</td><td>string</td><td>device</td><td>The domain of the update manager, used as MQTT topic prefix</td></tr><tr><td>domains</td><td>string</td><td>containers</td><td>A comma-separated list of domains handled by the update manager. This configuration option is available only as a flag, but not inside the JSON config file. In JSON config file, the keys inside the Domain agents structure serve as domain names.</td></tr><tr><td>phaseTimeout</td><td>string</td><td>10m</td><td>Timeout as duration string for completing an Update Orchestration phase</td></tr><tr><td>rebootAfter</td><td>string</td><td>30s</td><td>Time period as duration string to wait before a reboot process is initiated after successful update operation</td></tr><tr><td>rebootEnabled</td><td>bool</td><td>true</td><td>Enable the reboot process after successful update operation</td></tr><tr><td>reportFeedbackInterval</td><td>string</td><td>1m</td><td>Time interval as duration string for reporting intermediate desired state feedback messages during an active update operation</td></tr><tr><td>currentStateDelay</td><td>string</td><td>30s</td><td>Time interval as duration string for reporting current state messages</td></tr><tr><td>thingsEnabled</td><td>bool</td><td>true</td><td>Enable the Update Manager to behave as a thing&rsquo;s feature</td></tr><tr><td>ownerConsentCommands</td><td>[]string</td><td></td><td>List of commands for which an owner consent should be granted. Possible values are: &lsquo;DOWNLOAD&rsquo;, &lsquo;UPDATE&rsquo;, &lsquo;ACTIVATE&rsquo;</td></tr><tr><td>ownerConsentTimeout</td><td>string</td><td>30m</td><td>Timeout as duration string to wait for owner consent"</td></tr><tr><td><strong>Domain agents</strong></td><td></td><td></td><td>Holds a map structure (<em>agents</em>) with update agent configurations where each map key is treated as domain name</td></tr><tr><td>readTimeout</td><td>string</td><td>1m</td><td>Timeout as duration string for reading the current state for the domain</td></tr><tr><td>rebootRequired</td><td>bool</td><td>false</td><td>Require a reboot for the domain after successful update</td></tr><tr><td><strong>Local connectivity</strong></td><td></td><td></td><td></td></tr><tr><td>broker</td><td>string</td><td>tcp://localhost:1883</td><td>Address of the MQTT server/broker that the container manager will connect for the local communication, the format is: <code>scheme://host:port</code></td></tr><tr><td>keepAlive</td><td>string</td><td>20s</td><td>Keep alive duration for the MQTT requests as duration string</td></tr><tr><td>disconnectTimeout</td><td>string</td><td>250ms</td><td>Disconnect timeout for the MQTT server/broker as duration string</td></tr><tr><td>username</td><td>string</td><td></td><td>Username that is a part of the credentials</td></tr><tr><td>password</td><td>string</td><td></td><td>Password that is a part of the credentials</td></tr><tr><td>acknowledgeTimeout</td><td>string</td><td>15s</td><td>Acknowledge timeout for the MQTT requests as duration string</td></tr><tr><td>connectTimeout</td><td>string</td><td>30s</td><td>Connect timeout for the MQTT server/broker as duration string</td></tr><tr><td>subscribeTimeout</td><td>string</td><td>15s</td><td>Subscribe timeout for the MQTT requests as duration string</td></tr><tr><td>unsubscribeTimeout</td><td>string</td><td>5s</td><td>Unsubscribe timeout for the MQTT requests as duration string</td></tr><tr><td><strong>Logging</strong></td><td></td><td></td><td></td></tr><tr><td>logFile</td><td>string</td><td></td><td>Path to the file where the update manager’s log messages are written</td></tr><tr><td>logLevel</td><td>string</td><td>INFO</td><td>All log messages at this or a higher level will be logged, the log levels in descending order are: ERROR, WARN, INFO, DEBUG and TRACE</td></tr><tr><td>logFileCount</td><td>int</td><td>5</td><td>Log file maximum rotations count</td></tr><tr><td>logFileMaxAge</td><td>int</td><td>28</td><td>Log file rotations maximum age in days, use 0 to not remove old log files</td></tr><tr><td>logFileSize</td><td>int</td><td>2</td><td>Log file size in MB before it gets rotated</td></tr></tbody></table><h3 id=example>Example</h3><p>An example for configuring the update manager with two domains - <code>containers</code> and <code>custom-domain</code>, report feedback interval at 30 seconds, and log, written to custom log file <code>update-manager.log</code> with
log level <code>DEBUG</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;update-manager.log&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;DEBUG&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;agents&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;readTimeout&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;custom-domain&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;rebootRequired&#34;</span>: <span style=color:#00a>true</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;reportFeedbackInterval&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=template>Template</h3><p>The configuration can be further adjusted according to the use case.
The following template illustrates all possible properties with their default values.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;domain&#34;</span>: <span style=color:#a50>&#34;device&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;agents&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;containers&#34;</span>: {
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;rebootRequired&#34;</span>: <span style=color:#00a>false</span>,
</span></span><span style=display:flex><span>			<span style=color:#1e90ff;font-weight:700>&#34;readTimeout&#34;</span>: <span style=color:#a50>&#34;1m&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;log&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFile&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logLevel&#34;</span>: <span style=color:#a50>&#34;INFO&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFileCount&#34;</span>: <span style=color:#099>5</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFileMaxAge&#34;</span>: <span style=color:#099>28</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;logFileSize&#34;</span>: <span style=color:#099>2</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;connection&#34;</span>: {
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;broker&#34;</span>: <span style=color:#a50>&#34;tcp://localhost:1883&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;keepAlive&#34;</span>: <span style=color:#a50>&#34;20s&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;acknowledgeTimeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;username&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;password&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;connectTimeout&#34;</span>: <span style=color:#a50>&#34;30a&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;disconnectTimeout&#34;</span>: <span style=color:#a50>&#34;250ms&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;subscribeTimeout&#34;</span>: <span style=color:#a50>&#34;15s&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#1e90ff;font-weight:700>&#34;unsubscribeTimeout&#34;</span>: <span style=color:#a50>&#34;5s&#34;</span>
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;phaseTimeout&#34;</span>: <span style=color:#a50>&#34;10m&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;rebootAfter&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;rebootEnabled&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;reportFeedbackInterval&#34;</span>: <span style=color:#a50>&#34;1m&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;currentStateDelay&#34;</span>: <span style=color:#a50>&#34;30s&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;thingsEnabled&#34;</span>: <span style=color:#00a>true</span>,
</span></span><span style=display:flex><span>	<span style=color:#1e90ff;font-weight:700>&#34;ownerConsentCommands&#34;</span>: [<span style=color:#a50>&#34;DOWNLOAD&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Eclipse Kanto project" aria-label="Eclipse Kanto project"><a class=text-white target=_blank rel=noopener href=https://projects.eclipse.org/projects/iot.kanto aria-label="Eclipse Kanto project"><i class="fas fa-external-link-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/eclipse-kanto aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=YouTube aria-label=YouTube><a class=text-white target=_blank rel=noopener href="https://www.youtube.com/watch?v=bMN_ZiUS3Bc" aria-label=YouTube><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=Newsletter aria-label=Newsletter><a class=text-white target=_blank rel=noopener href=https://newsroom.eclipse.org/eclipse-newsletter/2022/february/five-ways-eclipse-kanto-accelerates-iot-edge-development aria-label=Newsletter><i class="fas fa-book-open"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title=Releases aria-label=Releases><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/releases aria-label=Releases><i class="fas fa-rocket"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Task board" aria-label="Task board"><a class=text-white target=_blank rel=noopener href=https://github.com/orgs/eclipse-kanto/projects/1 aria-label="Task board"><i class="fas fa-clipboard-list"></i></a></li><li class="list-inline-item mx-2 h3" data-bs-toggle=tooltip data-bs-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://accounts.eclipse.org/mailing-list/kanto-dev aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2024 The Eclipse Kanto™ Project. All Rights Reserved.</small></div></div><div class=row><div class="col-12 text-center mb-2"><a href=https://eclipse.org/projects/what-is-incubation.php><img class=eclipse-incubation-logo src=https://eclipse.dev/kanto//images/logos/eclipse/eclipse_incubation_horizontal.svg alt=eclipse-incubation-logo>
</a><a href=https://iot.eclipse.org/><img class=eclipse-iot-logo src="https://eclipse.dev/kanto//images/logos/eclipse/new_iot_logo_clr -white.svg" alt=eclipse-iot></a></div></div><div class=row><div class="col-12 text-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org>Eclipse Foundation</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/>Legal</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/raw/main/LICENSE>License</a></small></li><li class="list-inline-item mx-2"><small class=ms-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/security/>Report a Vulnerability</a></small></li></ul></div></div></footer></div><script src=/kanto/js/main.min.71ce084bcf13abbf1fcd942047313f25a70594ce26ec4a6a93ab9a359a8cbf66.js integrity="sha256-cc4IS88Tq78fzZQgRzE/JacFlM4m7Epqk6uaNZqMv2Y=" crossorigin=anonymous></script><script src=/kanto/js/prism.js></script><script src=/kanto/js/tabpane-persist.js></script><script src=//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js></script></body></html>