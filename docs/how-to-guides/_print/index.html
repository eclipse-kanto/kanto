<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.100.2"><link rel=canonical type=text/html href=https://eclipse.dev/kanto/docs/how-to-guides/><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/kanto/favicons/favicon.ico><link rel=apple-touch-icon href=/kanto/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/kanto/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/kanto/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/kanto/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/kanto/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/kanto/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/kanto/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/kanto/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/kanto/favicons/android-192x192.png sizes=192x192><title>How-to guides | Eclipse Kanto™ | IoT edge software stack</title><meta name=description content="Explore the functionalities of Eclipse Kanto.
"><meta property="og:title" content="How-to guides"><meta property="og:description" content="Explore the functionalities of Eclipse Kanto.
"><meta property="og:type" content="website"><meta property="og:url" content="https://eclipse.dev/kanto/docs/how-to-guides/"><meta itemprop=name content="How-to guides"><meta itemprop=description content="Explore the functionalities of Eclipse Kanto.
"><meta name=twitter:card content="summary"><meta name=twitter:title content="How-to guides"><meta name=twitter:description content="Explore the functionalities of Eclipse Kanto.
"><link rel=preload href=/kanto/scss/main.min.4b19341075ec8ec17ee06f68e963c47a18cd1b9cbb7bf581564c416060106c7a.css as=style><link href=/kanto/scss/main.min.4b19341075ec8ec17ee06f68e963c47a18cd1b9cbb7bf581564c416060106c7a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<link rel=stylesheet href=/kanto/css/prism.css></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand-lg navbar-dark navbar-color td-navbar"><a class=navbar-brand href=/kanto/><span class=navbar-logo><svg id="kanto_logo" data-name="Kanto Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 50"><defs><style>.cls-kanto_logo{fill:#fff}</style></defs><title>Eclipse Kanto</title><g transform="translate(0.0,50.0) scale(0.025,-0.025)"><path class="cls-kanto_logo" d="M370 1754c-168-290-306-529-308-533-2-6 557-986 604-1059l14-22h619 619l255 442c327 569 357 622 357 635 0 6-137 246-305 534l-304 524-623 2-623 2-305-525zm780 352c0-2-72-129-161-281-88-152-159-279-157-281s33 14 68 35c255 151 9e2 521 908 521 9 0 182-293 182-308 0-4-219-133-487-287-267-154-485-284-485-290 1-8 930-553 966-568 7-2-140-275-170-316-2-2-222 123-490 278-268 154-490 279-492 276-2-2 66-125 152-274 86-148 156-272 156-275 0-4-80-6-178-6H783L530 768c-139 240-253 442-253 448s114 210 253 452l254 442h183c101 0 183-2 183-4z"/><path class="cls-kanto_logo" d="M2890 1240V520h110 110v236 235l29-3c26-3 50-31 193-233l163-230 128-3c70-1 127 0 127 3s-86 128-191 276c-189 268-191 271-172 292 10 12 96 106 191 208 94 103 172 190 172 193s-60 6-134 6h-135l-158-170c-130-140-163-170-185-170h-28v4e2 4e2H3e3h-110v-720z"/><path class="cls-kanto_logo" d="M5965 1738c-3-18-12-77-20-132-7-54-16-1e2-19-103s-40-15-83-27l-78-22v-64-65l82-3 81-3 4-292c5-323 11-360 71-433 51-61 92-74 245-74h133l-3 67-3 67-80 24c-144 43-145 45-145 381v260l118 3 117 3 3 88 3 87h-121-120v135 135h-90-89l-6-32z"/><path class="cls-kanto_logo" d="M4165 1510c-102-9-236-35-267-51-14-8-18-23-18-74v-65h37c21 0 121 5 224 11 276 16 309 1 309-137v-74h-193c-228 0-277-10-336-69-53-53-71-113-71-234 0-119 12-164 58-217 49-58 102-82 193-88 91-5 158 12 273 69 43 22 80 38 82 36 1-1 12-24 23-50l20-47h86 86l-3 393c-3 385-3 393-26 442-64 139-190 180-477 155zm285-635V770l-27-11c-102-41-176-61-233-66-59-5-69-3-93 18-22 19-29 35-34 79-8 81 10 137 50 155 27 13 170 29 3e2 34l37 1V875z"/><path class="cls-kanto_logo" d="M5225 1486c-33-12-86-39-117-59l-58-37-14 33c-7 19-17 43-20 55-7 20-14 22-92 22h-84v-490-490h105 105v360 359l43 25c99 58 244 83 304 53 61-32 63-47 63-441V520h111 110l-3 378c-4 367-4 379-27 435-30 75-73 124-136 153-70 33-204 33-290 0z"/><path class="cls-kanto_logo" d="M6820 15e2c-96-13-187-63-227-124-43-64-62-128-75-263-13-126-2-288 26-380 49-159 197-231 451-220 239 10 340 82 380 274 17 81 20 318 4 413-24 150-96 243-218 280-76 24-242 34-341 20zm287-206c52-39 66-99 67-279s-10-238-54-280c-33-31-82-45-165-45-135 0-193 40-215 146-17 81-8 346 13 394 33 75 70 90 214 87 96-2 116-5 140-23z"/></svg></span></a><button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse justify-content-end" id=main_navbar><ul class="navbar-nav mr-4 mb-2 mb-lg-0 pl-4 pl-lg-2"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/><span class=active>Home</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/kanto/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/kanto/community/><span>Community</span></a></li></ul><div class=navbar-nav><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/kanto/offline-search-index.0d8e1c1bf4bb65799f01fa9d92544100.json data-offline-search-base-href=/ data-offline-search-max-results=50></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/kanto/docs/how-to-guides/>Return to the regular view of this page</a>.</p></div><h1 class=title>How-to guides</h1><div class=lead>Explore the functionalities of Eclipse Kanto.</div><ul><li>1: <a href=#pg-3295c64fd45a7278dec1f9ac3fb381aa>Update software</a></li><li>2: <a href=#pg-ea8723f5a1c117f2bc76a16b024f0ff2>Upload files</a></li><li>3: <a href=#pg-170e578a7b1df9ad1c0c8ef0bb738ad1>Back up and restore files</a></li><li>4: <a href=#pg-2a79ac78ab1545b92525d2ec84f64c3e>Perform OTA update</a></li><li>5: <a href=#pg-6fde9501abfa40949911a42750ff0751>Monitor system metrics</a></li></ul><div class=content></div></div><div class=td-content><h1 id=pg-3295c64fd45a7278dec1f9ac3fb381aa>1 - Update software</h1><div class=lead>Install a Debian package on your edge device.</div><p>By following the steps below you will install a<a href=https://www.gnu.org/software/hello/ target=_blank><code>hello</code></a>
Debian package via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A couple of simple Eclipse Hono northbound business applications written in Python are provided to explore
the capabilities for remotely installing and monitoring.
On the edge side, a basic
<a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/install_hello.sh target=_blank><code>install_hello.sh</code></a>
script will be downloaded and executed.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that your edge device is capable to execute the steps in this guide, you need:</p><ul><li><p>Debian-based linux distribution and the <code>apt</code> command line tool</p></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto, follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_su.py target=_blank>software update application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a>
guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_su.py
</span></span></code></pre></div></li><li><p>Executing <code>hello</code> in the terminal will return that the command is not found</p></li></ul><h3 id=install-debian-package>Install Debian package</h3><p>To explore the software management, we will use two Python scripts to install and monitor the <code>hello</code> Debian package.
The location where the Python applications will run does not have to be your edge device as they communicate remotely
with Eclipse Hono only.</p><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and will print all
received events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo
</span></span></code></pre></div><p>In another terminal, we are ready to spin up a <code>hello</code> Debian package at the edge via executing the second application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_su.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the new package is installed on your edge device via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>hello
</span></span></code></pre></div><p>The command now displays: <code>Hello, world!</code></p><h3 id=clean-up>Clean up</h3><p>The installed <code>hello</code> Debian package can be removed via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt remove hello
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-ea8723f5a1c117f2bc76a16b024f0ff2>2 - Upload files</h1><div class=lead>Upload a log file from your edge device.</div><p>By following the steps below you will upload an example log file to your HTTP file server
via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A simple Eclipse Hono northbound business application written in Python is
provided to explore the capabilities for remotely uploading and monitoring.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://github.com/sebageek/servefile/ target=_blank><code>servefile</code></a> installed</p><p>This is a small Python HTTP server used in the example to serve the uploads.
It does not have to be running on your edge device but it has to be accessible from there.
You can install it by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install servefile
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_fu.py target=_blank>file upload application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_fu.py
</span></span></code></pre></div></li></ul><h3 id=upload-log-file>Upload log file</h3><p>By default, all files in <code>/var/tmp/file-upload/</code> directory can be uploaded.
For example, grab the suite connector log file and place it in the directory via executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir -p /var/tmp/file-upload/ &amp;&amp; sudo cp /var/log/suite-connector/suite-connector.log /var/tmp/file-upload/
</span></span></code></pre></div><p>Choose a directory where the log file will be uploaded, open a new terminal there and run <code>servefile</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -u .
</span></span></code></pre></div><p>To explore the file upload, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the log file upload from the edge via executing the application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fu.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the log file is on your HTTP file server by listing the content of <code>servefile</code> working directory.</p><h3 id=clean-up>Clean up</h3><p>Stop <code>servefile</code> and clean up its working directory.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-170e578a7b1df9ad1c0c8ef0bb738ad1>3 - Back up and restore files</h1><div class=lead>Back up and restore a file from and to your edge device.</div><p>By following the steps below you will back up a simple text file to an HTTP file server
and then restore it back via a publicly available Eclipse Hono sandbox using Eclipse Kanto.
A simple Eclipse Hono northbound business application written in Python is
provided to explore the capabilities for remotely backing up and restoring files.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://github.com/sebageek/servefile/ target=_blank><code>servefile</code></a> installed</p><p>This is a small Python HTTP server used in the example to serve the uploads and downloads.
It does not have to be running on your edge device, but it has to be accessible from there.
You can install it by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install servefile
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_fb.py target=_blank>file backup and restore application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_fb.py
</span></span></code></pre></div></li></ul><h3 id=back-up>Back up</h3><p>By default, all directories in <code>/var/tmp/file-backup/</code> or the directory itself can be backed up.
For this example, create a file <code>data.txt</code> which will be later backed up:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo mkdir -p /var/tmp/file-backup &amp;&amp; sudo <span style=color:#0aa>echo</span> <span style=color:#a50>&#34;This is the first line in the file!&#34;</span> &gt;&gt; /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>You can verify that the file was successfully created by executing the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>This should produce <code>This is the first line in the file!</code> as an output.</p><p>Choose a directory where the text file will be uploaded, open a new terminal there and run <code>servefile</code>
with the flag <code>-u</code> to enable a file upload:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -u .
</span></span></code></pre></div><p>To explore the file backup, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the text file backup from the edge via executing the application that requires the command
to execute (<code>backup</code>), Eclipse Hono tenant (<code>-t</code>), the device identifier (<code>-d</code>) and the host where the backup will
be uploaded to:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fb.py backup -t demo -d demo:device -h localhost
</span></span></code></pre></div><p>You can check out that the backup file <code>data.zip</code> is on your HTTP file server by
listing the content of the <code>servefile</code> working directory.</p><h3 id=restore>Restore</h3><p>To explore the restore capabilities you will first modify the <code>data.txt</code> file, and then you will restore it to
the version before the changes by using the backup, that was created earlier.</p><p>You can modify the <code>data.txt</code> file with the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo <span style=color:#0aa>echo</span> <span style=color:#a50>&#34;This is the second line in the file!&#34;</span> &gt;&gt; /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>You can verify that the file was successfully updated by executing the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>This output should be:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>This is the first line in the file!
</span></span><span style=display:flex><span>This is the second line in the file!
</span></span></code></pre></div><p>Navigate to the terminal where <code>servefile</code> was started and terminate it.
Start it again with the flag <code>-l</code> to enable a file download:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>servefile -l .
</span></span></code></pre></div><p>To explore the file restore, we will use a Python script to request and monitor the operation.
The location where the Python application will run does not have to be your edge device as it communicates remotely
with Eclipse Hono only.</p><p>Now we are ready to request the text file restore from the edge via executing the application that requires the command
to execute (<code>restore</code>), Eclipse Hono tenant (<code>-t</code>), the device identifier (<code>-d</code>) and the host where the backup file
will be downloaded from:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_fb.py restore -t demo -d demo:device -h localhost
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the original file is restored by executing the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cat /var/tmp/file-backup/data.txt
</span></span></code></pre></div><p>This should produce <code>This is the first line in the file!</code> as an output.</p><h3 id=clean-up>Clean up</h3><p>Stop <code>servefile</code> and clean up its working directory.
Remove the <code>data.txt</code> file from the <code>/var/tmp/file-backup</code> directory.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-2a79ac78ab1545b92525d2ec84f64c3e>4 - Perform OTA update</h1><div class=lead>Perform an OTA update on your edge device.</div><p>By following the steps below you will publish a simple <code>Desired State</code> specification via a publicly available Eclipse Hono sandbox and then the specification will be handled by the Eclipse Kanto Update Manager, which will trigger an OTA update on
the edge device.</p><p>A simple monitoring application will track the progress and the status of the update process.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p>Debian-based linux distribution and the <code>apt</code> command line tool</p></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto, follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_um.py target=_blank>update manager application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a>
guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_um.py
</span></span></code></pre></div></li><li><p>Enable the <code>containers update agent</code> service of the <code>Container Management</code> by adding the <code>"update_agent": {"enable": true}</code> property to the <code>container-management</code> service configuration (by default located at <code>/etc/container-management/config.json</code>)
and restart the service:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>systemctl restart container-management
</span></span></code></pre></div></li></ul><h3 id=publish-the-desired-state-specification>Publish the <code>Desired State</code> specification</h3><p>First, start the monitoring application that requires the configured Eclipse Hono tenant (<code>-t</code>) and an optional filter parameter (<code>-f</code>). It will print all
received feedback events triggered by the device:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_events.py -t demo -f demo/device/things/live/messages/feedback
</span></span></code></pre></div><p>The starting point of the OTA update process is to publish the example <code>Desired State</code> specification:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_um.py -t demo -d demo:device -o apply
</span></span></code></pre></div><p>The <code>Desired State</code> specification in this case consists of single domain section definition for the containers domain and a three container components - <code>influxdb</code>, <code>hello-world</code> and <code>alpine</code> image.</p><h3 id=apply-desired-state-specification>Apply <code>Desired State</code> specification</h3><p>The Update Manager receives the published <code>Desired State</code> to the local Mosquitto broker, splits the specification (in this case into single domain) and then
distributes the processed specification to the domain agents which initiates the actual update process logic on the domain agents side.</p><p>The update process is organized into multiple phases, which are triggered by sending specific <code>Desired State</code> commands (<code>DOWNLOAD/UPDATE/ACTIVATE</code>).</p><p>In the example scenario, the three images for the three container components will be pulled (if not available in the cache locally), created as containers during the <code>UPDATING</code> phase and
started in the <code>ACTIVATING</code> phase.</p><h3 id=monitor-ota-update-progress>Monitor OTA update progress</h3><p>During the OTA update, the progress can be tracked in the monitoring application fot the <code>Desired State</code> feedback messages, started in the prerequisite section above.</p><p>The Update Manager reports at a time interval of a second the status of the active update process. For example:</p><pre tabindex=0><code>{
   &#34;activityId&#34;:&#34;e5c858cc-2057-41b0-bd5f-83aee0aad22e&#34;,
   &#34;timestamp&#34;:1693201088401,
   &#34;desiredStateFeedback&#34;:{
      &#34;status&#34;:&#34;RUNNING&#34;,
      &#34;actions&#34;:[
         {
            &#34;component&#34;:{
               &#34;id&#34;:&#34;containers:alpine&#34;,
               &#34;version&#34;:&#34;latest&#34;
            },
            &#34;status&#34;:&#34;UPDATE_SUCCESS&#34;,
            &#34;message&#34;:&#34;New container instance is started.&#34;
         },
         {
            &#34;component&#34;:{
               &#34;id&#34;:&#34;containers:hello-world&#34;,
               &#34;version&#34;:&#34;latest&#34;
            },
            &#34;status&#34;:&#34;UPDATE_SUCCESS&#34;,
            &#34;message&#34;:&#34;New container instance is started.&#34;
         },
         {
            &#34;component&#34;:{
               &#34;id&#34;:&#34;containers:influxdb&#34;,
               &#34;version&#34;:&#34;2.7.1&#34;
            },
            &#34;status&#34;:&#34;UPDATING&#34;,
            &#34;message&#34;:&#34;New container created.&#34;
         }
      ]
   }
}
</code></pre><h3 id=list-containers>List containers</h3><p>After the update process is completed, list the installed containers by executing the command <code>kanto-cm list</code> to verify if the <code>Desired State</code> is applied correctly.</p><p>The output of the command should display the info about the three containers, described in the <code>Desired State</code> specification. The <code>influxdb</code> is expected to be in <code>RUNNING</code> state and
the other containers in status <code>EXITED</code>. For example :</p><pre tabindex=0><code>ID                                    |Name         |Image                               |Status   |Finished At |Exit Code
|-------------------------------------|-------------|------------------------------------|----------------------|---------
7fe6b689-eb76-476d-a730-c2f422d6e8ea  |influxdb     |docker.io/library/influxdb:1.8.4    |Running  |            |0
c36523d7-8d17-4255-ae0c-37f11003f658  |hello-world  |docker.io/library/hello-world:latest|Exited   |            |0
9b99978b-2593-4736-bb52-7a07be4a7ed1  |alpine       |docker.io/library/alpine:latest     |Exited   |            |0
</code></pre><h3 id=update-desired-state-specification>Update <code>Desired State</code> specification</h3><p>To update the existing <code>Desired State</code> run the command below. The update changes affect two containers - <code>alpine</code> and <code>influxdb</code>. Being not present in the updated <code>Desired State</code> specification, the <code>alpine</code> container will be removed from the system. The <code>influxdb</code> will be updated to version 1.8.5. The last container - <code>hello-world</code> is not affected and any events will be not reported from the container update agent for this particular container.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_um.py -t demo -d demo:device -o update
</span></span></code></pre></div><h3 id=list-updated-containers>List updated containers</h3><p>After the update process of the existing <code>Desired State</code> is completed, list again the available containers to the verify the <code>Desired State</code> is updated correctly.</p><p>The output of the command should display the info about the two containers, described in the <code>Desired State</code> specification. The <code>influxdb</code> is expected to be updated with the version 1.8.5 and in <code>RUNNING</code> state and <code>hello-world</code> container to be status <code>EXITED</code> with version unchanged. The <code>alpine</code> container must be removed and not displayed.</p><pre tabindex=0><code>ID                                    |Name         |Image                               |Status   |Finished At |Exit Code
|-------------------------------------|-------------|------------------------------------|----------------------|---------
7fe6b689-eb76-476d-a730-c2f422d6e8ea  |influxdb     |docker.io/library/influxdb:1.8.5    |Running  |            |0
c36523d7-8d17-4255-ae0c-37f11003f658  |hello-world  |docker.io/library/hello-world:latest|Exited   |            |0
</code></pre><h3 id=remove-all-containers>Remove all containers</h3><p>To remove all containers, publish an empty <code>Desired State</code> specification (with empty <code>components</code> section):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_um.py -t demo -d demo:device -o clean
</span></span></code></pre></div><p>As a final step, execute the command <code>kanto-cm list</code> to verify that the containers are actually removed from the Kanto container management.
The expected output is <code>No found containers.</code>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6fde9501abfa40949911a42750ff0751>5 - Monitor system metrics</h1><div class=lead>Monitor system metrics from your edge device.</div><p>By following the steps below you will be able to monitor the system metrics from your edge device
via a publicly available Eclipse Hono sandbox using Eclipse Kanto. A simple Eclipse Hono
northbound business application written in Python is provided to explore the capabilities
for remotely monitoring the CPU and memory utilization.</p><h3 id=before-you-begin>Before you begin</h3><p>To ensure that all steps in this guide can be executed, you need:</p><ul><li><p><a href=https://plotly.com/ target=_blank><code>Plotly</code></a> and
<a href=https://plotly.com/dash/ target=_blank><code>Dash</code></a> installed</p><p><a href=https://plotly.com/ target=_blank><code>Plotly</code></a> is an open-source plotting library and
<a href=https://plotly.com/dash/ target=_blank><code>Dash</code></a> is a framework for building data application in Python.
They are used in this example to run a simple HTTP server and visualize the incoming system metrics data
in real time, and they do not have to be running on your edge device.
You can install them by executing:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install plotly dash
</span></span></code></pre></div></li><li><p>If you don&rsquo;t have an installed and running Eclipse Kanto on your edge device,
follow <a href=/kanto/docs/getting-started/install/ target=_blank>Install Eclipse Kanto</a></p></li><li><p>If you don&rsquo;t have a connected Eclipse Kanto to Eclipse Hono sandbox,
follow <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a></p></li><li><p>The <a href=https://github.com/eclipse-kanto/kanto/blob/main/quickstart/hono_commands_sm.py target=_blank>system metrics application</a></p><p>Navigate to the <code>quickstart</code> folder where the resources from the <a href=/kanto/docs/getting-started/hono/ target=_blank>Explore via Eclipse Hono</a> guide are located and execute the following script:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>wget https://github.com/eclipse-kanto/kanto/raw/main/quickstart/hono_commands_sm.py
</span></span></code></pre></div></li></ul><h3 id=monitor-system-metrics>Monitor system metrics</h3><p>To explore the system metrics, we will use a Python script to request and monitor the
CPU and memory utilization. The location where the Python application will run does
not have to be your edge device as it communicates remotely with Eclipse Hono only.</p><p>Now we are ready to request the system metrics from the edge via executing the application
that requires the Eclipse Hono tenant (<code>-t</code>) and the device identifier (<code>-d</code>):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 hono_commands_sm.py -t demo -d demo:device
</span></span></code></pre></div><h3 id=verify>Verify</h3><p>You can check out that the CPU and memory utilization metrics are properly received and displayed
by checking out the application dashboard (by default - <a href=http://127.0.0.1:8050 target=_blank>http://127.0.0.1:8050</a>).</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Eclipse Kanto project" aria-label="Eclipse Kanto project"><a class=text-white target=_blank rel=noopener href=https://projects.eclipse.org/projects/iot.kanto aria-label="Eclipse Kanto project"><i class="fas fa-external-link-alt"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel=noopener href=https://stackoverflow.com/questions/tagged/eclipse-kanto aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=YouTube aria-label=YouTube><a class=text-white target=_blank rel=noopener href="https://www.youtube.com/watch?v=bMN_ZiUS3Bc" aria-label=YouTube><i class="fab fa-youtube"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Newsletter aria-label=Newsletter><a class=text-white target=_blank rel=noopener href=https://newsroom.eclipse.org/eclipse-newsletter/2022/february/five-ways-eclipse-kanto-accelerates-iot-edge-development aria-label=Newsletter><i class="fas fa-book-open"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Releases aria-label=Releases><a class=text-white target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/releases aria-label=Releases><i class="fas fa-rocket"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Task board" aria-label="Task board"><a class=text-white target=_blank rel=noopener href=https://github.com/orgs/eclipse-kanto/projects/1/views/1 aria-label="Task board"><i class="fas fa-clipboard-list"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel=noopener href=https://accounts.eclipse.org/mailing-list/kanto-dev aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Eclipse Kanto™ Project. All Rights Reserved.</small></div></div><div class=row><div class="col-12 text-center mb-2"><a href=https://eclipse.org/projects/what-is-incubation.php><img class=eclipse-incubation-logo src=https://eclipse.dev/kanto//images/logos/eclipse/eclipse_incubation_horizontal.svg alt=eclipse-incubation-logo></a>
<a href=https://iot.eclipse.org/><img class=eclipse-iot-logo src="https://eclipse.dev/kanto//images/logos/eclipse/new_iot_logo_clr -white.svg" alt=eclipse-iot></a></div></div><div class=row><div class="col-12 text-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org>Eclipse Foundation</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/legal/>Legal</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://github.com/eclipse-kanto/kanto/raw/main/LICENSE>License</a></small></li><li class="list-inline-item mx-2"><small class=ml-1><a class=text-footer-menu target=_blank rel=noopener href=https://eclipse.org/security/>Report a Vulnerability</a></small></li></ul></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/kanto/js/tabpane-persist.js></script>
<script src=/kanto/js/main.min.63f7ccf0f6f052be82a52cc628622eadcdaa7d38aa242c60a3cad13badb12dd9.js integrity="sha256-Y/fM8PbwUr6CpSzGKGIurc2qfTiqJCxgo8rRO62xLdk=" crossorigin=anonymous></script>
<script src=/kanto/js/prism.js></script>
<script src=//www.eclipse.org/eclipse.org-common/themes/solstice/public/javascript/vendor/cookieconsent/default.min.js></script></body></html>